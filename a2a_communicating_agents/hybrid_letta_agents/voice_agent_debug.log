INFO:livekit:livekit_ffi::server:139:livekit_ffi::server - initializing ffi server v0.12.39
INFO:livekit:livekit_ffi::cabi:50:livekit_ffi::cabi - initializing ffi server v0.12.39
DEBUG:asyncio:Using selector: EpollSelector
    16:01:27.746 DEBUG  asyncio          Using selector: EpollSelector  
DEV:livekit.agents:Watching /home/adamsl/planner/a2a_communicating_agents/hybrid_letta_agents
    16:01:27.749 DEV    livekit.agents   Watching                               
                                         /home/adamsl/planner/a2a_communicatin  
                                         g_agents/hybrid_letta_agents           
INFO:livekit:livekit_ffi::server:139:livekit_ffi::server - initializing ffi server v0.12.39
INFO:livekit:livekit_ffi::cabi:50:livekit_ffi::cabi - initializing ffi server v0.12.39
DEBUG:asyncio:Using selector: EpollSelector
    16:01:29.548 DEBUG  asyncio          Using selector: EpollSelector  
INFO:livekit.agents:starting worker
    16:01:29.555 INFO   livekit.agents   starting worker {"version": "1.3.5",   
                                                         "rtc-version":         
                                                         "1.0.19"}              
INFO:livekit.agents:preloading plugins
    16:01:29.557 INFO   livekit.agents   preloading plugins {"packages":        
                                                            ["livekit.plugins.o‚Ä¶
                                                            "livekit.plugins.de‚Ä¶
                                                            "livekit.plugins.si‚Ä¶
                                                            "livekit.plugins.ca‚Ä¶
                                                            "av"]}              
INFO:livekit.agents:registered worker
    16:01:29.568 INFO   livekit.agents   registered worker {"agent_name":       
                                                           "letta-voice-agent", 
                                                           "id":                
                                                           "AW_od9NRf8we7do",   
                                                           "url":               
                                                           "ws://localhost:7880‚Ä¶
                                                           "region": "",        
                                                           "protocol": 16}      
INFO:livekit.agents:received job request
    16:08:19.748 INFO   livekit.agents   received job       {"job_id":          
                                         request            "AJ_jMSkF2bGXoss",  
                                                            "dispatch_id":      
                                                            "AD_3pQEnadFvZsM",  
                                                            "room": "test-room",
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB",  
                                                            "agent_name":       
                                                            "letta-voice-agent",
                                                            "resuming": false,  
                                                            "enable_recording": 
                                                            false}              
INFO:__mp_main__:üì• Job request received for room: test-room
    16:08:19.752 INFO   __mp_main__      üì• Job request received for room:      
                                         test-room                              
INFO:livekit_room_manager:RoomManager initialized (stale timeout: 300s)
    16:08:19.756 INFO   livekit_room_ma‚Ä¶ RoomManager initialized (stale         
                                         timeout: 300s)                         
INFO:__mp_main__:üßπ Ensuring room test-room is clean before joining...
    16:08:19.759 INFO   __mp_main__      üßπ Ensuring room test-room is clean    
                                         before joining...                      
INFO:livekit_room_manager:üîç Ensuring room test-room is clean...
    16:08:19.760 INFO   livekit_room_ma‚Ä¶ üîç Ensuring room test-room is          
                                         clean...                               
INFO:livekit_room_manager:Keeping human participant user1 (age: 1s)
    16:08:19.767 INFO   livekit_room_ma‚Ä¶ Keeping human participant user1 (age:  
                                         1s)                                    
INFO:livekit_room_manager:‚úÖ Room test-room has only active human users - no cleanup needed
    16:08:19.769 INFO   livekit_room_ma‚Ä¶ ‚úÖ Room test-room has only active      
                                         human users - no cleanup needed        
INFO:__mp_main__:‚úÖ Room test-room is clean and ready for agent
    16:08:19.771 INFO   __mp_main__      ‚úÖ Room test-room is clean and ready   
                                         for agent                              
DEBUG:livekit.agents:received assignment
    16:08:19.773 DEBUG  livekit.agents   received assignment {"agent_name":     
                                                             "letta-voice-agent‚Ä¶
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB", 
                                                             "room":            
                                                             "test-room",       
                                                             "job_id":          
                                                             "AJ_jMSkF2bGXoss", 
                                                             "dispatch_id":     
                                                             "AD_3pQEnadFvZsM", 
                                                             "enable_recording":
                                                             false}             
INFO:livekit.agents:initializing process
    16:08:21.590 INFO   livekit.agents   initializing process {"pid": 3847}
INFO:livekit.agents:process initialized
DEBUG:asyncio:Using selector: EpollSelector
    16:08:21.843 INFO   livekit.agents   process initialized {"pid": 3847,      
                                                             "elapsed_time":    
                                                             0.25}              
INFO:__mp_main__:‚úÖ Job accepted, starting optimized entrypoint...
    16:08:21.846 INFO   __mp_main__      ‚úÖ Job accepted, starting optimized    
                                         entrypoint...                          
DEBUG:asyncio:Using selector: EpollSelector
    16:08:21.843 DEBUG  asyncio          Using selector:     {"pid": 3847,      
                                         EpollSelector       "job_id":          
                                                             "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
ERROR:asyncio:Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x738c879ac050>
INFO:livekit:livekit_ffi::server:139:livekit_ffi::server - initializing ffi server v0.12.39
INFO:livekit:livekit_ffi::cabi:50:livekit_ffi::cabi - initializing ffi server v0.12.39
INFO:__mp_main__:üöÄ Voice agent starting in room: test-room
    16:08:21.849 ERROR  asyncio          Unclosed client session                
                                         client_session:                        
                                         <aiohttp.client.ClientSession object   
                                         at 0x738c879ac050>                     
INFO:__mp_main__:‚ö° Hybrid streaming: ENABLED (with agent memory)
INFO:__mp_main__:üöÄ Voice agent starting in room: test-room
    16:08:21.856 INFO   __mp_main__      üöÄ Voice agent     {"pid": 3847,       
                                         starting in room:  "job_id":           
                                         test-room          "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
ERROR:asyncio:Unclosed connector
connections: ['deque([(<aiohttp.client_proto.ResponseHandler object at 0x738c879b8290>, 4460.009710969)])']
connector: <aiohttp.connector.TCPConnector object at 0x738c879aca70>
    16:08:21.857 ERROR  asyncio          Unclosed connector                     
                                         connections:                           
                                         ['deque([(<aiohttp.client_proto.Respo  
                                         nseHandler object at 0x738c879b8290>,  
                                         4460.009710969)])']                    
                                         connector:                             
                                         <aiohttp.connector.TCPConnector        
                                         object at 0x738c879aca70>              
INFO:__mp_main__:‚ö° Hybrid streaming: ENABLED (with agent memory)
    16:08:21.856 INFO   __mp_main__      ‚ö° Hybrid          {"pid": 3847,       
                                         streaming: ENABLED "job_id":           
                                         (with agent        "AJ_jMSkF2bGXoss",  
                                         memory)            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:üöÄ ========================================
INFO:__mp_main__:üöÄ VOICE AGENT INITIALIZATION
INFO:__mp_main__:üöÄ Target Agent Name: Agent_66
INFO:__mp_main__:üöÄ Target Agent ID (from env): agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
INFO:__mp_main__:üöÄ ========================================
INFO:__mp_main__:üöÄ ========================================
    16:08:21.886 INFO   __mp_main__      üöÄ                  {"pid": 3847,      
                                         =================== "job_id":          
                                         =================== "AJ_jMSkF2bGXoss", 
                                         ==                  "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üöÄ VOICE AGENT INITIALIZATION
                 INFO   __mp_main__      üöÄ VOICE AGENT      {"pid": 3847,      
                                         INITIALIZATION      "job_id":          
                                                             "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üöÄ Target Agent Name: Agent_66
DEBUG:letta_client._base_client:Request options: {'method': 'get', 'url': '/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e', 'params': {}}
DEBUG:letta_client._base_client:Sending HTTP Request: GET http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
                 INFO   __mp_main__      üöÄ Target Agent    {"pid": 3847,       
                                         Name: Agent_66     "job_id":           
                                                            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:üöÄ Target Agent ID (from env): agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
                 INFO   __mp_main__      üöÄ Target Agent ID  {"pid": 3847,      
                                         (from env):         "job_id":          
                                         agent-4dfca708-49a8 "AJ_jMSkF2bGXoss", 
                                         -4982-8e36-0f1146f9 "room_id":         
                                         a66e                "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üöÄ ========================================
                 INFO   __mp_main__      üöÄ                  {"pid": 3847,      
                                         =================== "job_id":          
                                         =================== "AJ_jMSkF2bGXoss", 
                                         ==                  "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
DEBUG:letta_client._base_client:Request options: {'method': 'get', 'url': '/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e', 'params': {}}
DEBUG:httpcore.connection:connect_tcp.started host='localhost' port=8283 local_address=None timeout=5.0 socket_options=None
    16:08:21.892 DEBUG  letta_client._b‚Ä¶ Request options:    {"pid": 3847,      
                                         {'method': 'get',   "job_id":          
                                         'url':              "AJ_jMSkF2bGXoss", 
                                         '/v1/agents/agent-4 "room_id":         
                                         dfca708-49a8-4982-8 "RM_fb2LtQVHREBB"} 
                                         e36-0f1146f9a66e',                     
                                         'params': {}}                          
DEBUG:letta_client._base_client:Sending HTTP Request: GET http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
DEBUG:httpcore.connection:connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x79608ada65a0>
    16:08:21.894 DEBUG  letta_client._b‚Ä¶ Sending HTTP        {"pid": 3847,      
                                         Request: GET        "job_id":          
                                         http://localhost:82 "AJ_jMSkF2bGXoss", 
                                         83/v1/agents/agent- "room_id":         
                                         4dfca708-49a8-4982- "RM_fb2LtQVHREBB"} 
                                         8e36-0f1146f9a66e                      
DEBUG:httpcore.http11:send_request_headers.started request=<Request [b'GET']>
DEBUG:httpcore.http11:send_request_headers.complete
DEBUG:httpcore.http11:send_request_body.started request=<Request [b'GET']>
DEBUG:httpcore.http11:send_request_body.complete
DEBUG:httpcore.http11:receive_response_headers.started request=<Request [b'GET']>
DEBUG:httpcore.http11:receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Sun, 28 Dec 2025 21:08:21 GMT'), (b'server', b'uvicorn'), (b'content-length', b'21496'), (b'content-type', b'application/json')])
INFO:httpx:HTTP Request: GET http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e "HTTP/1.1 200 OK"
DEBUG:httpcore.http11:receive_response_body.started request=<Request [b'GET']>
DEBUG:httpcore.http11:receive_response_body.complete
DEBUG:httpcore.http11:response_closed.started
DEBUG:httpcore.http11:response_closed.complete
DEBUG:letta_client._base_client:HTTP Response: GET http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e "200 OK" Headers({'date': 'Sun, 28 Dec 2025 21:08:21 GMT', 'server': 'uvicorn', 'content-length': '21496', 'content-type': 'application/json'})
DEBUG:letta_client._base_client:HTTP Response: GET http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e "200 OK" Headers({'date': 'Sun, 28 Dec 2025 21:08:21 GMT', 'server': 'uvicorn', 'content-length': '21496', 'content-type': 'application/json'})
    16:08:22.012 DEBUG  letta_client._b‚Ä¶ HTTP Response: GET  {"pid": 3847,      
                                         http://localhost:82 "job_id":          
                                         83/v1/agents/agent- "AJ_jMSkF2bGXoss", 
                                         4dfca708-49a8-4982- "room_id":         
                                         8e36-0f1146f9a66e   "RM_fb2LtQVHREBB"} 
                                         "200 OK"                               
                                         Headers({'date':                       
                                         'Sun, 28 Dec 2025                      
                                         21:08:21 GMT',                         
                                         'server':                              
                                         'uvicorn',                             
                                         'content-length':                      
                                         '21496',                               
                                         'content-type':                        
                                         'application/json'}                    
                                         )                                      
INFO:__mp_main__:‚úÖ Using configured agent ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e (name: Agent_66)
INFO:__mp_main__:üöÄ ========================================
INFO:__mp_main__:üöÄ AGENT INITIALIZED
INFO:__mp_main__:‚úÖ Using configured agent ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e (name: Agent_66)
INFO:__mp_main__:üöÄ Agent Name: Agent_66
INFO:__mp_main__:üöÄ Agent ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
INFO:__mp_main__:üöÄ ========================================
    16:08:22.059 INFO   __mp_main__      ‚úÖ Using configured {"pid": 3847,      
                                         agent ID:           "job_id":          
                                         agent-4dfca708-49a8 "AJ_jMSkF2bGXoss", 
                                         -4982-8e36-0f1146f9 "room_id":         
                                         a66e (name:         "RM_fb2LtQVHREBB"} 
                                         Agent_66)                              
INFO:__mp_main__:üöÄ ========================================
                 INFO   __mp_main__      üöÄ                  {"pid": 3847,      
                                         =================== "job_id":          
                                         =================== "AJ_jMSkF2bGXoss", 
                                         ==                  "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üöÄ AGENT INITIALIZED
    16:08:22.060 INFO   __mp_main__      üöÄ AGENT           {"pid": 3847,       
                                         INITIALIZED        "job_id":           
                                                            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:üöÄ Agent Name: Agent_66
                 INFO   __mp_main__      üöÄ Agent Name:      {"pid": 3847,      
                                         Agent_66            "job_id":          
                                                             "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üöÄ Agent ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
                 INFO   __mp_main__      üöÄ Agent ID:        {"pid": 3847,      
                                         agent-4dfca708-49a8 "job_id":          
                                         -4982-8e36-0f1146f9 "AJ_jMSkF2bGXoss", 
                                         a66e                "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üöÄ ========================================
    16:08:22.061 INFO   __mp_main__      üöÄ                  {"pid": 3847,      
                                         =================== "job_id":          
                                         =================== "AJ_jMSkF2bGXoss", 
                                         ==                  "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:Using OpenAI TTS
INFO:__mp_main__:Using OpenAI TTS
    16:08:22.097 INFO   __mp_main__      Using OpenAI TTS {"pid": 3847,         
                                                          "job_id":             
                                                          "AJ_jMSkF2bGXoss",    
                                                          "room_id":            
                                                          "RM_fb2LtQVHREBB"}    
INFO:__mp_main__:üß† Pre-loading agent memory for fast hybrid mode...
INFO:__mp_main__:üß† LOADING MEMORY - Agent ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
INFO:__mp_main__:üß† LOADING MEMORY - Agent Name: Agent_66
INFO:__mp_main__:üß† Pre-loading agent memory for fast hybrid mode...
INFO:__mp_main__:üß† Retrieving agent details from Letta for ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
DEBUG:letta_client._base_client:Request options: {'method': 'get', 'url': '/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e', 'params': {}}
DEBUG:letta_client._base_client:Sending HTTP Request: GET http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
DEBUG:httpcore.http11:send_request_headers.started request=<Request [b'GET']>
DEBUG:httpcore.http11:send_request_headers.complete
    16:08:22.249 INFO   __mp_main__      üß† Pre-loading      {"pid": 3847,      
                                         agent memory for    "job_id":          
                                         fast hybrid mode... "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
DEBUG:httpcore.http11:send_request_body.started request=<Request [b'GET']>
INFO:__mp_main__:üß† LOADING MEMORY - Agent ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
DEBUG:httpcore.http11:send_request_body.complete
DEBUG:httpcore.http11:receive_response_headers.started request=<Request [b'GET']>
                 INFO   __mp_main__      üß† LOADING MEMORY - {"pid": 3847,      
                                         Agent ID:           "job_id":          
                                         agent-4dfca708-49a8 "AJ_jMSkF2bGXoss", 
                                         -4982-8e36-0f1146f9 "room_id":         
                                         a66e                "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üß† LOADING MEMORY - Agent Name: Agent_66
    16:08:22.250 INFO   __mp_main__      üß† LOADING MEMORY  {"pid": 3847,       
                                         - Agent Name:      "job_id":           
                                         Agent_66           "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:üß† Retrieving agent details from Letta for ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
                 INFO   __mp_main__      üß† Retrieving agent {"pid": 3847,      
                                         details from Letta  "job_id":          
                                         for ID:             "AJ_jMSkF2bGXoss", 
                                         agent-4dfca708-49a8 "room_id":         
                                         -4982-8e36-0f1146f9 "RM_fb2LtQVHREBB"} 
                                         a66e                                   
DEBUG:letta_client._base_client:Request options: {'method': 'get', 'url': '/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e', 'params': {}}
    16:08:22.251 DEBUG  letta_client._b‚Ä¶ Request options:    {"pid": 3847,      
                                         {'method': 'get',   "job_id":          
                                         'url':              "AJ_jMSkF2bGXoss", 
                                         '/v1/agents/agent-4 "room_id":         
                                         dfca708-49a8-4982-8 "RM_fb2LtQVHREBB"} 
                                         e36-0f1146f9a66e',                     
                                         'params': {}}                          
DEBUG:letta_client._base_client:Sending HTTP Request: GET http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
    16:08:22.252 DEBUG  letta_client._b‚Ä¶ Sending HTTP        {"pid": 3847,      
                                         Request: GET        "job_id":          
                                         http://localhost:82 "AJ_jMSkF2bGXoss", 
                                         83/v1/agents/agent- "room_id":         
                                         4dfca708-49a8-4982- "RM_fb2LtQVHREBB"} 
                                         8e36-0f1146f9a66e                      
DEBUG:httpcore.http11:receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Sun, 28 Dec 2025 21:08:22 GMT'), (b'server', b'uvicorn'), (b'content-length', b'21496'), (b'content-type', b'application/json')])
INFO:httpx:HTTP Request: GET http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e "HTTP/1.1 200 OK"
DEBUG:httpcore.http11:receive_response_body.started request=<Request [b'GET']>
DEBUG:httpcore.http11:receive_response_body.complete
DEBUG:httpcore.http11:response_closed.started
DEBUG:httpcore.http11:response_closed.complete
DEBUG:letta_client._base_client:HTTP Response: GET http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e "200 OK" Headers({'date': 'Sun, 28 Dec 2025 21:08:22 GMT', 'server': 'uvicorn', 'content-length': '21496', 'content-type': 'application/json'})
INFO:__mp_main__:üß† Retrieved agent: Agent_66 (ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e)
DEBUG:letta_client._base_client:HTTP Response: GET http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e "200 OK" Headers({'date': 'Sun, 28 Dec 2025 21:08:22 GMT', 'server': 'uvicorn', 'content-length': '21496', 'content-type': 'application/json'})
INFO:__mp_main__:‚úÖ Memory loaded successfully in 0.12s
ERROR:__mp_main__:‚ùå Failed to load agent memory: object of type 'NoneType' has no len()
INFO:__mp_main__:üöÄ Voice agent starting in room: test-room
WARNING:livekit.agents:RoomInputOptions and RoomOutputOptions are deprecated, use RoomOptions instead
    16:08:22.367 DEBUG  letta_client._b‚Ä¶ HTTP Response: GET  {"pid": 3847,      
                                         http://localhost:82 "job_id":          
                                         83/v1/agents/agent- "AJ_jMSkF2bGXoss", 
                                         4dfca708-49a8-4982- "room_id":         
                                         8e36-0f1146f9a66e   "RM_fb2LtQVHREBB"} 
                                         "200 OK"                               
                                         Headers({'date':                       
                                         'Sun, 28 Dec 2025                      
                                         21:08:22 GMT',                         
                                         'server':                              
                                         'uvicorn',                             
                                         'content-length':                      
                                         '21496',                               
                                         'content-type':                        
                                         'application/json'}                    
                                         )                                      
INFO:__mp_main__:üß† Retrieved agent: Agent_66 (ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e)
    16:08:22.369 INFO   __mp_main__      üß† Retrieved agent: {"pid": 3847,      
                                         Agent_66 (ID:       "job_id":          
                                         agent-4dfca708-49a8 "AJ_jMSkF2bGXoss", 
                                         -4982-8e36-0f1146f9 "room_id":         
                                         a66e)               "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚úÖ Memory loaded successfully in 0.12s
DEBUG:livekit.agents:input stream attached
    16:08:22.370 INFO   __mp_main__      ‚úÖ Memory loaded   {"pid": 3847,       
                                         successfully in    "job_id":           
                                         0.12s              "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
ERROR:__mp_main__:‚ùå Failed to load agent memory: object of type 'NoneType' has no len()
                 ERROR  __mp_main__      ‚ùå Failed to load  {"pid": 3847,       
                                         agent memory:      "job_id":           
                                         object of type     "AJ_jMSkF2bGXoss",  
                                         'NoneType' has no  "room_id":          
                                         len()              "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:üöÄ Voice agent starting in room: test-room
    16:08:22.371 INFO   __mp_main__      üöÄ Voice agent     {"pid": 3847,       
                                         starting in room:  "job_id":           
                                         test-room          "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
WARNING:livekit.agents:RoomInputOptions and RoomOutputOptions are deprecated, use RoomOptions instead
DEBUG:livekit.agents:http_session(): creating a new httpclient ctx
    16:08:22.372 WARNI‚Ä¶ livekit.agents   RoomInputOptions    {"pid": 3847,      
                                         and                 "job_id":          
                                         RoomOutputOptions   "AJ_jMSkF2bGXoss", 
                                         are deprecated, use "room_id":         
                                         RoomOptions instead "RM_fb2LtQVHREBB"} 
DEBUG:livekit.agents:input stream attached
    16:08:22.376 DEBUG  livekit.agents   input stream        {"participant":    
                                         attached            null, "source":    
                                                             "SOURCE_UNKNOWN",  
                                                             "accepted_sources":
                                                             ["SOURCE_MICROPHON‚Ä¶
                                                             "pid": 3847,       
                                                             "job_id":          
                                                             "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
DEBUG:livekit.agents:http_session(): creating a new httpclient ctx
DEBUG:openai._base_client:Request options: {'method': 'get', 'url': '/'}
DEBUG:openai._base_client:Sending HTTP Request: GET https://api.openai.com/v1/
    16:08:22.384 DEBUG  livekit.agents   http_session():     {"pid": 3847,      
                                         creating a new      "job_id":          
                                         httpclient ctx      "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
DEBUG:httpcore.connection:connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=15.0 socket_options=None
INFO:livekit:livekit_api::signal_client::signal_stream:92:livekit_api::signal_client::signal_stream - connecting to ws://localhost:7880/rtc?sdk=python&protocol=16&auto_subscribe=1&adaptive_stream=0&version=1.0.19
DEBUG:livekit:tungstenite::handshake::client:95:tungstenite::handshake::client - Client handshake done.
DEBUG:httpcore.connection:connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x79608adfbe00>
DEBUG:httpcore.connection:start_tls.started ssl_context=<ssl.SSLContext object at 0x79608908b6d0> server_hostname='api.openai.com' timeout=15.0
DEBUG:httpcore.connection:start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x79608adfbd10>
DEBUG:httpcore.http11:send_request_headers.started request=<Request [b'GET']>
DEBUG:httpcore.http11:send_request_headers.complete
DEBUG:httpcore.http11:send_request_body.started request=<Request [b'GET']>
DEBUG:httpcore.http11:send_request_body.complete
DEBUG:httpcore.http11:receive_response_headers.started request=<Request [b'GET']>
DEBUG:livekit.plugins.deepgram:Established new Deepgram STT WebSocket connection:
DEBUG:livekit.plugins.deepgram:Established new Deepgram STT WebSocket connection:
    16:08:22.757 DEBUG  livekit.plugins‚Ä¶ Established new    {"headers":         
                                         Deepgram STT       {"dg-project-id":   
                                         WebSocket          "93515b93-54e3-4101‚Ä¶
                                         connection:        "dg-request-id":    
                                                            "c30cc4de-ac92-4156‚Ä¶
                                                            "Date": "Sun, 28 Dec
                                                            2025 21:08:22 GMT"},
                                                            "pid": 3847,        
                                                            "job_id":           
                                                            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
DEBUG:httpcore.http11:receive_response_headers.complete return_value=(b'HTTP/1.1', 404, b'Not Found', [(b'Date', b'Sun, 28 Dec 2025 21:08:22 GMT'), (b'Content-Type', b'text/html'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=RWvdtz7xT51RDZVo45Y7oVeH10iyN6RIAX_YTipnfoI-1766956102-1.0.1.1-xJGJOG88I9wouRG2fdXAf05f44KgdsAg1eD99Q4MwQ_g2tMi_nUmhlceYa58dxhmLbemmX_SyRsAvsuL7gJytzwdEIXZvxinztozpiEFy44; path=/; expires=Sun, 28-Dec-25 21:38:22 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=xMoGMWsOYHij1tglJ6_vJ4JBRnLvl31OunyKred0kao-1766956102405-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9b54085628d07308-DTW'), (b'Content-Encoding', b'br'), (b'alt-svc', b'h3=":443"; ma=86400')])
INFO:httpx:HTTP Request: GET https://api.openai.com/v1/ "HTTP/1.1 404 Not Found"
DEBUG:httpcore.http11:receive_response_body.started request=<Request [b'GET']>
DEBUG:httpcore.http11:receive_response_body.complete
DEBUG:httpcore.http11:response_closed.started
DEBUG:httpcore.http11:response_closed.complete
DEBUG:openai._base_client:HTTP Response: GET https://api.openai.com/v1/ "404 Not Found" Headers([('date', 'Sun, 28 Dec 2025 21:08:22 GMT'), ('content-type', 'text/html'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=RWvdtz7xT51RDZVo45Y7oVeH10iyN6RIAX_YTipnfoI-1766956102-1.0.1.1-xJGJOG88I9wouRG2fdXAf05f44KgdsAg1eD99Q4MwQ_g2tMi_nUmhlceYa58dxhmLbemmX_SyRsAvsuL7gJytzwdEIXZvxinztozpiEFy44; path=/; expires=Sun, 28-Dec-25 21:38:22 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=xMoGMWsOYHij1tglJ6_vJ4JBRnLvl31OunyKred0kao-1766956102405-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '9b54085628d07308-DTW'), ('content-encoding', 'br'), ('alt-svc', 'h3=":443"; ma=86400')])
DEBUG:openai._base_client:request_id: None
DEBUG:openai._base_client:Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/openai/_base_client.py", line 1574, in request
    response.raise_for_status()
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '404 Not Found' for url 'https://api.openai.com/v1/'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
DEBUG:openai._base_client:Re-raising status error
DEBUG:livekit.agents:using audio io: `RoomIO` -> `AgentSession` -> `TranscriptSynchronizer` -> `RoomIO`
DEBUG:livekit.agents:using transcript io: `AgentSession` -> `TranscriptSynchronizer` -> `RoomIO`
INFO:__mp_main__:‚è∞ Idle monitor started (timeout: 300s)
INFO:__mp_main__:‚úÖ Voice agent ready and listening (HYBRID MODE (with agent memory))
DEBUG:livekit.agents:using audio io: `RoomIO` -> `AgentSession` -> `TranscriptSynchronizer` -> `RoomIO`
    16:08:23.538 DEBUG  livekit.agents   using audio io:     {"pid": 3847,      
                                         `RoomIO` ->         "job_id":          
                                         `AgentSession` ->   "AJ_jMSkF2bGXoss", 
                                         `TranscriptSynchron "room_id":         
                                         izer` -> `RoomIO`   "RM_fb2LtQVHREBB"} 
DEBUG:livekit.agents:using transcript io: `AgentSession` -> `TranscriptSynchronizer` -> `RoomIO`
DEBUG:__mp_main__:Track subscribed: TR_AMneK5EtNa2Rw5
INFO:__mp_main__:Audio track subscribed for participant user1, starting STT.
    16:08:23.539 DEBUG  livekit.agents   using transcript    {"pid": 3847,      
                                         io: `AgentSession`  "job_id":          
                                         ->                  "AJ_jMSkF2bGXoss", 
                                         `TranscriptSynchron "room_id":         
                                         izer` -> `RoomIO`   "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚è∞ Idle monitor started (timeout: 300s)
DEBUG:livekit.agents:start reading stream
                 INFO   __mp_main__      ‚è∞ Idle monitor     {"pid": 3847,      
                                         started (timeout:   "job_id":          
                                         300s)               "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚úÖ Voice agent ready and listening (HYBRID MODE (with agent memory))
                 INFO   __mp_main__      ‚úÖ Voice agent     {"pid": 3847,       
                                         ready and          "job_id":           
                                         listening (HYBRID  "AJ_jMSkF2bGXoss",  
                                         MODE (with agent   "room_id":          
                                         memory))           "RM_fb2LtQVHREBB"}  
DEBUG:__mp_main__:Track subscribed: TR_AMneK5EtNa2Rw5
    16:08:23.545 DEBUG  __mp_main__      Track subscribed:   {"pid": 3847,      
                                         TR_AMneK5EtNa2Rw5   "job_id":          
                                                             "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:Audio track subscribed for participant user1, starting STT.
    16:08:23.546 INFO   __mp_main__      Audio track         {"pid": 3847,      
                                         subscribed for      "job_id":          
                                         participant user1,  "AJ_jMSkF2bGXoss", 
                                         starting STT.       "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
DEBUG:livekit.agents:start reading stream
    16:08:23.549 DEBUG  livekit.agents   start reading      {"participant":     
                                         stream             "user1", "source":  
                                                            "SOURCE_MICROPHONE",
                                                            "pid": 3847,        
                                                            "job_id":           
                                                            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
DEBUG:livekit.agents:received user transcript
DEBUG:livekit.agents:received user transcript
    16:08:28.082 DEBUG  livekit.agents   received user      {"user_transcript": 
                                         transcript         "What do you know   
                                                            about this          
                                                            project?",          
                                                            "language": "en",   
                                                            "transcript_delay": 
                                                            0.48731160163879395,
                                                            "pid": 3847,        
                                                            "job_id":           
                                                            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:üé§ ========================================
INFO:__mp_main__:üé§ NEW QUERY RECEIVED
INFO:__mp_main__:üé§ User message: What do you know about this project?
INFO:__mp_main__:üé§ ========================================
INFO:__mp_main__:üé§ Current Agent ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
INFO:__mp_main__:üé§ Current Agent Name: Agent_66
INFO:__mp_main__:üé§ Memory Loaded: True
INFO:__mp_main__:üé§ ========================================
    16:08:28.396 INFO   __mp_main__      üé§                  {"pid": 3847,      
                                         =================== "job_id":          
                                         =================== "AJ_jMSkF2bGXoss", 
                                         ==                  "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üé§ NEW QUERY RECEIVED
                 INFO   __mp_main__      üé§ NEW QUERY        {"pid": 3847,      
                                         RECEIVED            "job_id":          
                                                             "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üé§ User message: What do you know about this project?
    16:08:28.397 INFO   __mp_main__      üé§ User message:    {"pid": 3847,      
                                         What do you know    "job_id":          
                                         about this project? "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üé§ Current Agent ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
INFO:__mp_main__:‚ö° Using HYBRID mode (fast OpenAI with agent memory + background Letta)
                 INFO   __mp_main__      üé§ Current Agent    {"pid": 3847,      
                                         ID:                 "job_id":          
                                         agent-4dfca708-49a8 "AJ_jMSkF2bGXoss", 
                                         -4982-8e36-0f1146f9 "room_id":         
                                         a66e                "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üé§ Current Agent Name: Agent_66
                 INFO   __mp_main__      üé§ Current Agent    {"pid": 3847,      
                                         Name: Agent_66      "job_id":          
                                                             "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üé§ Memory Loaded: True
INFO:__mp_main__:‚ö° OPENAI FAST PATH - Agent ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
INFO:__mp_main__:‚úÖ Memory already loaded for agent agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
INFO:__mp_main__:‚ö° Using direct OpenAI streaming with agent memory (fast path)
INFO:__mp_main__:‚ö° Agent persona loaded: 0 chars
INFO:__mp_main__:‚ö° Memory blocks count: 0
DEBUG:__mp_main__:üìã System instructions: You are a helpful voice AI orchestrator with long-term memory.

            You coordinate multiple specialist agents to help users build software.
            You have access to:
            - Memory...
DEBUG:__mp_main__:üìã Conversation history: 0 messages (using last 10)
    16:08:28.398 INFO   __mp_main__      üé§ Memory Loaded:  {"pid": 3847,       
                                         True               "job_id":           
                                                            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:üé§ ========================================
                 INFO   __mp_main__      üé§                  {"pid": 3847,      
                                         =================== "job_id":          
                                         =================== "AJ_jMSkF2bGXoss", 
                                         ==                  "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚ö° Using HYBRID mode (fast OpenAI with agent memory + background Letta)
    16:08:28.410 INFO   __mp_main__      ‚ö° Using HYBRID     {"pid": 3847,      
                                         mode (fast OpenAI   "job_id":          
                                         with agent memory + "AJ_jMSkF2bGXoss", 
                                         background Letta)   "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚ö° OPENAI FAST PATH - Agent ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
    16:08:28.416 INFO   __mp_main__      ‚ö° OPENAI FAST PATH {"pid": 3847,      
                                         - Agent ID:         "job_id":          
                                         agent-4dfca708-49a8 "AJ_jMSkF2bGXoss", 
                                         -4982-8e36-0f1146f9 "room_id":         
                                         a66e                "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚úÖ Memory already loaded for agent agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
    16:08:28.417 INFO   __mp_main__      ‚úÖ Memory already   {"pid": 3847,      
                                         loaded for agent    "job_id":          
                                         agent-4dfca708-49a8 "AJ_jMSkF2bGXoss", 
                                         -4982-8e36-0f1146f9 "room_id":         
                                         a66e                "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚ö° Using direct OpenAI streaming with agent memory (fast path)
                 INFO   __mp_main__      ‚ö° Using direct    {"pid": 3847,       
                                         OpenAI streaming   "job_id":           
                                         with agent memory  "AJ_jMSkF2bGXoss",  
                                         (fast path)        "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:‚ö° Agent persona loaded: 0 chars
                 INFO   __mp_main__      ‚ö° Agent persona   {"pid": 3847,       
                                         loaded: 0 chars    "job_id":           
                                                            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:‚ö° Memory blocks count: 0
    16:08:28.418 INFO   __mp_main__      ‚ö° Memory blocks    {"pid": 3847,      
                                         count: 0            "job_id":          
                                                             "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
DEBUG:__mp_main__:üìã System instructions: You are a helpful voice AI orchestrator with long-term memory.

            You coordinate multiple specialist agents to help users build software.
            You have access to:
            - Memory...
                 DEBUG  __mp_main__      üìã System           {"pid": 3847,      
                                         instructions: You   "job_id":          
                                         are a helpful voice "AJ_jMSkF2bGXoss", 
                                         AI orchestrator     "room_id":         
                                         with long-term      "RM_fb2LtQVHREBB"} 
                                         memory.                                
                                                                                
                                                     You                        
                                         coordinate multiple                    
                                         specialist agents                      
                                         to help users build                    
                                         software.                              
                                                     You                        
                                         have access to:                        
                                                     -                          
                                         Memory...                              
DEBUG:__mp_main__:üìã Conversation history: 0 messages (using last 10)
                 DEBUG  __mp_main__      üìã Conversation     {"pid": 3847,      
                                         history: 0 messages "job_id":          
                                         (using last 10)     "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
DEBUG:httpcore.connection:connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=30.0 socket_options=None
DEBUG:httpcore.connection:connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x796078241190>
DEBUG:httpcore.connection:start_tls.started ssl_context=<ssl.SSLContext object at 0x79607820b250> server_hostname='api.openai.com' timeout=30.0
DEBUG:httpcore.connection:start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7960782410a0>
DEBUG:httpcore.http11:send_request_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_headers.complete
DEBUG:httpcore.http11:send_request_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_body.complete
DEBUG:httpcore.http11:receive_response_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 28 Dec 2025 21:08:28 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-th7n7uhxazewwtohwceq5lya'), (b'openai-processing-ms', b'286'), (b'openai-project', b'proj_PzQ2TBpwtHVDCFtLt40ViURv'), (b'openai-version', b'2020-10-01'), (b'x-envoy-upstream-service-time', b'410'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'4000000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'3999802'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'2ms'), (b'x-request-id', b'req_460a8abc795d411b9ee786a7bf6c8d82'), (b'x-openai-proxy-wasm', b'v0.1'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=2HA00awon2mO6J9a7UpKGL01HZO.2w.Ki0RKO70SIew-1766956108-1.0.1.1-5n3MBtrBNuGGkXEqiv5PsP9MstceZnVtD39fUV3xVFU3IiVOFGlkbnWAQiUfvMcaxDYyMRnoPUurVIRg9K3Qxu001tlHTqitV1RahU1vJBE; path=/; expires=Sun, 28-Dec-25 21:38:28 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=RHZVDwXDtQ4.5wcq9VZgJjj5UaRv0D2zuH.baumVOv0-1766956108632-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9b54087bfae4e680-DTW'), (b'alt-svc', b'h3=":443"; ma=86400')])
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
DEBUG:httpcore.http11:receive_response_body.started request=<Request [b'POST']>
INFO:__mp_main__:‚ö° TTFT: 680ms (with agent memory)
INFO:__mp_main__:‚ö° TTFT: 680ms (with agent memory)
    16:08:29.098 INFO   __mp_main__      ‚ö° TTFT: 680ms     {"pid": 3847,       
                                         (with agent        "job_id":           
                                         memory)            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
DEBUG:httpcore.http11:response_closed.started
DEBUG:httpcore.http11:response_closed.complete
INFO:__mp_main__:‚ö° Direct OpenAI streaming complete: 0.99s (with agent knowledge)
INFO:__mp_main__:‚ö° Fast path response duration: 1.00s
INFO:__mp_main__:‚ö° Direct OpenAI streaming complete: 0.99s (with agent knowledge)
DEBUG:httpcore.http11:receive_response_body.failed exception=GeneratorExit()
INFO:__mp_main__:üîÑ Syncing to Letta memory (background)...
    16:08:29.407 INFO   __mp_main__      ‚ö° Direct OpenAI    {"pid": 3847,      
                                         streaming complete: "job_id":          
                                         0.99s (with agent   "AJ_jMSkF2bGXoss", 
                                         knowledge)          "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚ö° Fast path response duration: 1.00s
DEBUG:letta_client._base_client:Request options: {'method': 'post', 'url': '/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-ae5cc490-0651-413d-a6c2-b716e5744b52', 'json_data': {'messages': [{'role': 'user', 'content': 'What do you know about this project?'}, {'role': 'assistant', 'content': "I don't have any details about your specific project yet. Could you share what it‚Äôs about or what you need help with?"}]}}
DEBUG:letta_client._base_client:Sending HTTP Request: POST http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages
    16:08:29.408 INFO   __mp_main__      ‚ö° Fast path        {"pid": 3847,      
                                         response duration:  "job_id":          
                                         1.00s               "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üîÑ Syncing to Letta memory (background)...
DEBUG:httpcore.connection:close.started
DEBUG:httpcore.connection:close.complete
INFO:__mp_main__:üîä Response: [DEBUG: Using Agent ID 46f9a66e] I don't have any details about your specific project yet. Could you...
INFO:__mp_main__:‚úÖ Total llm_node latency: 1.03s
INFO:__mp_main__:‚úÖ RESPONSE GENERATED BY AGENT: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
DEBUG:httpcore.connection:connect_tcp.started host='localhost' port=8283 local_address=None timeout=5.0 socket_options=None
    16:08:29.413 INFO   __mp_main__      üîÑ Syncing to      {"pid": 3847,       
                                         Letta memory       "job_id":           
                                         (background)...    "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
DEBUG:letta_client._base_client:Request options: {'method': 'post', 'url': '/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-ae5cc490-0651-413d-a6c2-b716e5744b52', 'json_data': {'messages': [{'role': 'user', 'content': 'What do you know about this project?'}, {'role': 'assistant', 'content': "I don't have any details about your specific project yet. Could you share what it‚Äôs about or what you need help with?"}]}}
    16:08:29.417 DEBUG  letta_client._b‚Ä¶ Request options:    {"pid": 3847,      
                                         {'method': 'post',  "job_id":          
                                         'url':              "AJ_jMSkF2bGXoss", 
                                         '/v1/agents/agent-4 "room_id":         
                                         dfca708-49a8-4982-8 "RM_fb2LtQVHREBB"} 
                                         e36-0f1146f9a66e/me                    
                                         ssages', 'files':                      
                                         None,                                  
                                         'idempotency_key':                     
                                         'stainless-python-r                    
                                         etry-ae5cc490-0651-                    
                                         413d-a6c2-b716e5744                    
                                         b52', 'json_data':                     
                                         {'messages':                           
                                         [{'role': 'user',                      
                                         'content': 'What do                    
                                         you know about this                    
                                         project?'},                            
                                         {'role':                               
                                         'assistant',                           
                                         'content': "I don't                    
                                         have any details                       
                                         about your specific                    
                                         project yet. Could                     
                                         you share what it‚Äôs                    
                                         about or what you                      
                                         need help                              
                                         with?"}]}}                             
DEBUG:letta_client._base_client:Sending HTTP Request: POST http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages
    16:08:29.419 DEBUG  letta_client._b‚Ä¶ Sending HTTP        {"pid": 3847,      
                                         Request: POST       "job_id":          
                                         http://localhost:82 "AJ_jMSkF2bGXoss", 
                                         83/v1/agents/agent- "room_id":         
                                         4dfca708-49a8-4982- "RM_fb2LtQVHREBB"} 
                                         8e36-0f1146f9a66e/m                    
                                         essages                                
INFO:__mp_main__:üîä Response: [DEBUG: Using Agent ID 46f9a66e] I don't have any details about your specific project yet. Could you...
    16:08:29.422 INFO   __mp_main__      üîä Response:        {"pid": 3847,      
                                         [DEBUG: Using Agent "job_id":          
                                         ID 46f9a66e] I      "AJ_jMSkF2bGXoss", 
                                         don't have any      "room_id":         
                                         details about your  "RM_fb2LtQVHREBB"} 
                                         specific project                       
                                         yet. Could you...                      
INFO:__mp_main__:‚úÖ Total llm_node latency: 1.03s
    16:08:29.423 INFO   __mp_main__      ‚úÖ Total llm_node  {"pid": 3847,       
                                         latency: 1.03s     "job_id":           
                                                            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:‚úÖ RESPONSE GENERATED BY AGENT: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
                 INFO   __mp_main__      ‚úÖ RESPONSE         {"pid": 3847,      
                                         GENERATED BY AGENT: "job_id":          
                                         agent-4dfca708-49a8 "AJ_jMSkF2bGXoss", 
                                         -4982-8e36-0f1146f9 "room_id":         
                                         a66e                "RM_fb2LtQVHREBB"} 
DEBUG:openai._base_client:Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'idempotency_key': 'stainless-python-retry-ca9cd2c6-ee0d-4540-b078-4f092dd9f66f', 'json_data': {'input': "[DEBUG: Using Agent ID 46f9a66e] I don't have any details about your specific project yet.", 'model': 'gpt-4o-mini-tts', 'voice': 'nova', 'response_format': 'mp3', 'speed': 1.0}}
DEBUG:openai._base_client:Sending HTTP Request: POST https://api.openai.com/v1/audio/speech
DEBUG:httpcore.http11:send_request_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_headers.complete
DEBUG:httpcore.http11:send_request_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_body.complete
DEBUG:httpcore.http11:receive_response_headers.started request=<Request [b'POST']>
DEBUG:httpcore.connection:connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x79608b06e360>
DEBUG:httpcore.http11:send_request_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_headers.complete
DEBUG:httpcore.http11:send_request_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_body.complete
DEBUG:httpcore.http11:receive_response_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 28 Dec 2025 21:08:30 GMT'), (b'Content-Type', b'audio/mpeg'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-th7n7uhxazewwtohwceq5lya'), (b'openai-processing-ms', b'986'), (b'openai-project', b'proj_PzQ2TBpwtHVDCFtLt40ViURv'), (b'openai-version', b'2020-10-01'), (b'x-envoy-upstream-service-time', b'1125'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'4000000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'3999977'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'0s'), (b'x-request-id', b'req_1c14f36cd9cc4a638cdd6c16982e46da'), (b'x-openai-proxy-wasm', b'v0.1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9b5408837c4d7308-DTW'), (b'alt-svc', b'h3=":443"; ma=86400')])
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
DEBUG:openai._base_client:HTTP Response: POST https://api.openai.com/v1/audio/speech "200 OK" Headers({'date': 'Sun, 28 Dec 2025 21:08:30 GMT', 'content-type': 'audio/mpeg', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-th7n7uhxazewwtohwceq5lya', 'openai-processing-ms': '986', 'openai-project': 'proj_PzQ2TBpwtHVDCFtLt40ViURv', 'openai-version': '2020-10-01', 'x-envoy-upstream-service-time': '1125', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '4000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '3999977', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_1c14f36cd9cc4a638cdd6c16982e46da', 'x-openai-proxy-wasm': 'v0.1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '9b5408837c4d7308-DTW', 'alt-svc': 'h3=":443"; ma=86400'})
DEBUG:openai._base_client:request_id: req_1c14f36cd9cc4a638cdd6c16982e46da
DEBUG:httpcore.http11:receive_response_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_body.complete
DEBUG:httpcore.http11:response_closed.started
DEBUG:httpcore.http11:response_closed.complete
DEBUG:openai._base_client:Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'idempotency_key': 'stainless-python-retry-e5362fcf-15ce-4bf2-a479-858a078d3261', 'json_data': {'input': 'Could you share what it‚Äôs about or what you need help with?', 'model': 'gpt-4o-mini-tts', 'voice': 'nova', 'response_format': 'mp3', 'speed': 1.0}}
DEBUG:openai._base_client:Sending HTTP Request: POST https://api.openai.com/v1/audio/speech
DEBUG:httpcore.http11:send_request_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_headers.complete
DEBUG:httpcore.http11:send_request_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_body.complete
DEBUG:httpcore.http11:receive_response_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 28 Dec 2025 21:08:32 GMT'), (b'Content-Type', b'audio/mpeg'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-th7n7uhxazewwtohwceq5lya'), (b'openai-processing-ms', b'943'), (b'openai-project', b'proj_PzQ2TBpwtHVDCFtLt40ViURv'), (b'openai-version', b'2020-10-01'), (b'x-envoy-upstream-service-time', b'958'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'4000000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'3999985'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'0s'), (b'x-request-id', b'req_fde774e3893c41fdb43594da9d6601f6'), (b'x-openai-proxy-wasm', b'v0.1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9b54088fc8a77308-DTW'), (b'alt-svc', b'h3=":443"; ma=86400')])
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
DEBUG:openai._base_client:HTTP Response: POST https://api.openai.com/v1/audio/speech "200 OK" Headers({'date': 'Sun, 28 Dec 2025 21:08:32 GMT', 'content-type': 'audio/mpeg', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-th7n7uhxazewwtohwceq5lya', 'openai-processing-ms': '943', 'openai-project': 'proj_PzQ2TBpwtHVDCFtLt40ViURv', 'openai-version': '2020-10-01', 'x-envoy-upstream-service-time': '958', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '4000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '3999985', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_fde774e3893c41fdb43594da9d6601f6', 'x-openai-proxy-wasm': 'v0.1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '9b54088fc8a77308-DTW', 'alt-svc': 'h3=":443"; ma=86400'})
DEBUG:openai._base_client:request_id: req_fde774e3893c41fdb43594da9d6601f6
DEBUG:httpcore.http11:receive_response_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_body.complete
DEBUG:httpcore.http11:response_closed.started
DEBUG:httpcore.http11:response_closed.complete
DEBUG:httpcore.http11:receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Sun, 28 Dec 2025 21:08:29 GMT'), (b'server', b'uvicorn'), (b'content-length', b'3621'), (b'content-type', b'application/json')])
INFO:httpx:HTTP Request: POST http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages "HTTP/1.1 200 OK"
DEBUG:httpcore.http11:receive_response_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_body.complete
DEBUG:httpcore.http11:response_closed.started
DEBUG:httpcore.http11:response_closed.complete
DEBUG:letta_client._base_client:HTTP Response: POST http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages "200 OK" Headers({'date': 'Sun, 28 Dec 2025 21:08:29 GMT', 'server': 'uvicorn', 'content-length': '3621', 'content-type': 'application/json'})
DEBUG:letta_client._base_client:HTTP Response: POST http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages "200 OK" Headers({'date': 'Sun, 28 Dec 2025 21:08:29 GMT', 'server': 'uvicorn', 'content-length': '3621', 'content-type': 'application/json'})
    16:08:47.241 DEBUG  letta_client._b‚Ä¶ HTTP Response: POST {"pid": 3847,      
                                         http://localhost:82 "job_id":          
                                         83/v1/agents/agent- "AJ_jMSkF2bGXoss", 
                                         4dfca708-49a8-4982- "room_id":         
                                         8e36-0f1146f9a66e/m "RM_fb2LtQVHREBB"} 
                                         essages "200 OK"                       
                                         Headers({'date':                       
                                         'Sun, 28 Dec 2025                      
                                         21:08:29 GMT',                         
                                         'server':                              
                                         'uvicorn',                             
                                         'content-length':                      
                                         '3621',                                
                                         'content-type':                        
                                         'application/json'}                    
                                         )                                      
INFO:__mp_main__:‚úÖ Letta memory synced in 17.85s (background)
INFO:__mp_main__:‚úÖ Letta memory synced in 17.85s (background)
    16:08:47.268 INFO   __mp_main__      ‚úÖ Letta memory     {"pid": 3847,      
                                         synced in 17.85s    "job_id":          
                                         (background)        "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
DEBUG:livekit.agents:received user transcript
DEBUG:livekit.agents:received user transcript
    16:08:50.077 DEBUG  livekit.agents   received user      {"user_transcript": 
                                         transcript         "What time is it?", 
                                                            "language": "en",   
                                                            "transcript_delay": 
                                                            0.2805452346801758, 
                                                            "pid": 3847,        
                                                            "job_id":           
                                                            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:üé§ ========================================
INFO:__mp_main__:üé§ NEW QUERY RECEIVED
INFO:__mp_main__:üé§ ========================================
INFO:__mp_main__:üé§ User message: What time is it?
INFO:__mp_main__:üé§ Current Agent ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
INFO:__mp_main__:üé§ Current Agent Name: Agent_66
INFO:__mp_main__:üé§ Memory Loaded: True
INFO:__mp_main__:üé§ ========================================
    16:08:50.596 INFO   __mp_main__      üé§                  {"pid": 3847,      
                                         =================== "job_id":          
                                         =================== "AJ_jMSkF2bGXoss", 
                                         ==                  "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üé§ NEW QUERY RECEIVED
    16:08:50.597 INFO   __mp_main__      üé§ NEW QUERY        {"pid": 3847,      
                                         RECEIVED            "job_id":          
                                                             "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üé§ User message: What time is it?
                 INFO   __mp_main__      üé§ User message:    {"pid": 3847,      
                                         What time is it?    "job_id":          
                                                             "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üé§ Current Agent ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
INFO:__mp_main__:‚ö° Using HYBRID mode (fast OpenAI with agent memory + background Letta)
                 INFO   __mp_main__      üé§ Current Agent    {"pid": 3847,      
                                         ID:                 "job_id":          
                                         agent-4dfca708-49a8 "AJ_jMSkF2bGXoss", 
                                         -4982-8e36-0f1146f9 "room_id":         
                                         a66e                "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üé§ Current Agent Name: Agent_66
INFO:__mp_main__:‚ö° OPENAI FAST PATH - Agent ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
INFO:__mp_main__:‚úÖ Memory already loaded for agent agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
INFO:__mp_main__:‚ö° Using direct OpenAI streaming with agent memory (fast path)
    16:08:50.598 INFO   __mp_main__      üé§ Current Agent    {"pid": 3847,      
                                         Name: Agent_66      "job_id":          
                                                             "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚ö° Agent persona loaded: 0 chars
INFO:__mp_main__:‚ö° Memory blocks count: 0
INFO:__mp_main__:üé§ Memory Loaded: True
DEBUG:__mp_main__:üìã System instructions: You are a helpful voice AI orchestrator with long-term memory.

            You coordinate multiple specialist agents to help users build software.
            You have access to:
            - Memory...
DEBUG:__mp_main__:üìã Conversation history: 2 messages (using last 10)
                 INFO   __mp_main__      üé§ Memory Loaded:  {"pid": 3847,       
                                         True               "job_id":           
                                                            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:üé§ ========================================
                 INFO   __mp_main__      üé§                  {"pid": 3847,      
                                         =================== "job_id":          
                                         =================== "AJ_jMSkF2bGXoss", 
                                         ==                  "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚ö° Using HYBRID mode (fast OpenAI with agent memory + background Letta)
    16:08:50.611 INFO   __mp_main__      ‚ö° Using HYBRID     {"pid": 3847,      
                                         mode (fast OpenAI   "job_id":          
                                         with agent memory + "AJ_jMSkF2bGXoss", 
                                         background Letta)   "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚ö° OPENAI FAST PATH - Agent ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
    16:08:50.615 INFO   __mp_main__      ‚ö° OPENAI FAST PATH {"pid": 3847,      
                                         - Agent ID:         "job_id":          
                                         agent-4dfca708-49a8 "AJ_jMSkF2bGXoss", 
                                         -4982-8e36-0f1146f9 "room_id":         
                                         a66e                "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚úÖ Memory already loaded for agent agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
                 INFO   __mp_main__      ‚úÖ Memory already   {"pid": 3847,      
                                         loaded for agent    "job_id":          
                                         agent-4dfca708-49a8 "AJ_jMSkF2bGXoss", 
                                         -4982-8e36-0f1146f9 "room_id":         
                                         a66e                "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚ö° Using direct OpenAI streaming with agent memory (fast path)
    16:08:50.616 INFO   __mp_main__      ‚ö° Using direct    {"pid": 3847,       
                                         OpenAI streaming   "job_id":           
                                         with agent memory  "AJ_jMSkF2bGXoss",  
                                         (fast path)        "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:‚ö° Agent persona loaded: 0 chars
                 INFO   __mp_main__      ‚ö° Agent persona   {"pid": 3847,       
                                         loaded: 0 chars    "job_id":           
                                                            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:‚ö° Memory blocks count: 0
                 INFO   __mp_main__      ‚ö° Memory blocks    {"pid": 3847,      
                                         count: 0            "job_id":          
                                                             "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
DEBUG:__mp_main__:üìã System instructions: You are a helpful voice AI orchestrator with long-term memory.

            You coordinate multiple specialist agents to help users build software.
            You have access to:
            - Memory...
    16:08:50.617 DEBUG  __mp_main__      üìã System           {"pid": 3847,      
                                         instructions: You   "job_id":          
                                         are a helpful voice "AJ_jMSkF2bGXoss", 
                                         AI orchestrator     "room_id":         
                                         with long-term      "RM_fb2LtQVHREBB"} 
                                         memory.                                
                                                                                
                                                     You                        
                                         coordinate multiple                    
                                         specialist agents                      
                                         to help users build                    
                                         software.                              
                                                     You                        
                                         have access to:                        
                                                     -                          
                                         Memory...                              
DEBUG:__mp_main__:üìã Conversation history: 2 messages (using last 10)
                 DEBUG  __mp_main__      üìã Conversation     {"pid": 3847,      
                                         history: 2 messages "job_id":          
                                         (using last 10)     "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
DEBUG:httpcore.connection:connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=30.0 socket_options=None
DEBUG:httpcore.connection:connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7960890ae540>
DEBUG:httpcore.connection:start_tls.started ssl_context=<ssl.SSLContext object at 0x795fe06b7ed0> server_hostname='api.openai.com' timeout=30.0
DEBUG:httpcore.connection:start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x79608ad8bef0>
DEBUG:httpcore.http11:send_request_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_headers.complete
DEBUG:httpcore.http11:send_request_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_body.complete
DEBUG:httpcore.http11:receive_response_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 28 Dec 2025 21:08:50 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-th7n7uhxazewwtohwceq5lya'), (b'openai-processing-ms', b'138'), (b'openai-project', b'proj_PzQ2TBpwtHVDCFtLt40ViURv'), (b'openai-version', b'2020-10-01'), (b'x-envoy-upstream-service-time', b'150'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'4000000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'3999766'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'3ms'), (b'x-request-id', b'req_89304cc3e0da4590a9041ab155b57185'), (b'x-openai-proxy-wasm', b'v0.1'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=yzTmnJ8YbQ7w7cYg_UtUl67dC8LOHVHOeKnUcFgMlts-1766956130-1.0.1.1-UtqK3mkWKgm8_Pm99_tzC4Y_pMhoPnGs.m6KK2KXCBj0DMDud32XRcWRczYaRMtwYhdam3BdNxXCEiaDDODlVGqn6CY757H1H6M7zID7o6k; path=/; expires=Sun, 28-Dec-25 21:38:50 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=m9PSHpzHgo6.7Ep2dsl3bdpYWqLC2KrjfPT2oO.OLW8-1766956130592-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9b540906bd594fa3-DTW'), (b'alt-svc', b'h3=":443"; ma=86400')])
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
DEBUG:httpcore.http11:receive_response_body.started request=<Request [b'POST']>
INFO:__mp_main__:‚ö° TTFT: 448ms (with agent memory)
INFO:__mp_main__:‚ö° TTFT: 448ms (with agent memory)
    16:08:51.066 INFO   __mp_main__      ‚ö° TTFT: 448ms     {"pid": 3847,       
                                         (with agent        "job_id":           
                                         memory)            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
DEBUG:httpcore.http11:response_closed.started
DEBUG:httpcore.http11:response_closed.complete
INFO:__mp_main__:‚ö° Direct OpenAI streaming complete: 0.85s (with agent knowledge)
INFO:__mp_main__:‚ö° Fast path response duration: 0.86s
INFO:__mp_main__:‚ö° Direct OpenAI streaming complete: 0.85s (with agent knowledge)
DEBUG:httpcore.http11:receive_response_body.failed exception=GeneratorExit()
    16:08:51.469 INFO   __mp_main__      ‚ö° Direct OpenAI    {"pid": 3847,      
                                         streaming complete: "job_id":          
                                         0.85s (with agent   "AJ_jMSkF2bGXoss", 
                                         knowledge)          "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üîÑ Syncing to Letta memory (background)...
INFO:__mp_main__:‚ö° Fast path response duration: 0.86s
DEBUG:letta_client._base_client:Request options: {'method': 'post', 'url': '/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-01726a9b-beeb-4dfc-97c6-c142d550f503', 'json_data': {'messages': [{'role': 'user', 'content': 'What time is it?'}, {'role': 'assistant', 'content': "I can't check the current time, but you can easily find it on your device. If there's anything else you need help with, let me know!"}]}}
DEBUG:letta_client._base_client:Sending HTTP Request: POST http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages
DEBUG:httpcore.http11:send_request_headers.started request=<Request [b'POST']>
                 INFO   __mp_main__      ‚ö° Fast path        {"pid": 3847,      
                                         response duration:  "job_id":          
                                         0.86s               "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üîÑ Syncing to Letta memory (background)...
DEBUG:httpcore.http11:send_request_headers.complete
DEBUG:httpcore.http11:send_request_body.started request=<Request [b'POST']>
INFO:__mp_main__:üîä Response: [DEBUG: Using Agent ID 46f9a66e] I can't check the current time, but you can easily find it on your ...
INFO:__mp_main__:‚úÖ Total llm_node latency: 0.88s
INFO:__mp_main__:‚úÖ RESPONSE GENERATED BY AGENT: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
DEBUG:httpcore.http11:send_request_body.complete
DEBUG:httpcore.http11:receive_response_headers.started request=<Request [b'POST']>
    16:08:51.474 INFO   __mp_main__      üîÑ Syncing to      {"pid": 3847,       
                                         Letta memory       "job_id":           
                                         (background)...    "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
DEBUG:letta_client._base_client:Request options: {'method': 'post', 'url': '/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-01726a9b-beeb-4dfc-97c6-c142d550f503', 'json_data': {'messages': [{'role': 'user', 'content': 'What time is it?'}, {'role': 'assistant', 'content': "I can't check the current time, but you can easily find it on your device. If there's anything else you need help with, let me know!"}]}}
DEBUG:openai._base_client:Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'idempotency_key': 'stainless-python-retry-8320a7a0-dff6-4c87-ba34-514588a74248', 'json_data': {'input': "[DEBUG: Using Agent ID 46f9a66e] I can't check the current time, but you can easily find it on your device.", 'model': 'gpt-4o-mini-tts', 'voice': 'nova', 'response_format': 'mp3', 'speed': 1.0}}
    16:08:51.475 DEBUG  letta_client._b‚Ä¶ Request options:    {"pid": 3847,      
                                         {'method': 'post',  "job_id":          
                                         'url':              "AJ_jMSkF2bGXoss", 
                                         '/v1/agents/agent-4 "room_id":         
                                         dfca708-49a8-4982-8 "RM_fb2LtQVHREBB"} 
                                         e36-0f1146f9a66e/me                    
                                         ssages', 'files':                      
                                         None,                                  
                                         'idempotency_key':                     
                                         'stainless-python-r                    
                                         etry-01726a9b-beeb-                    
                                         4dfc-97c6-c142d550f                    
                                         503', 'json_data':                     
                                         {'messages':                           
                                         [{'role': 'user',                      
                                         'content': 'What                       
                                         time is it?'},                         
                                         {'role':                               
                                         'assistant',                           
                                         'content': "I can't                    
                                         check the current                      
                                         time, but you can                      
                                         easily find it on                      
                                         your device. If                        
                                         there's anything                       
                                         else you need help                     
                                         with, let me                           
                                         know!"}]}}                             
DEBUG:letta_client._base_client:Sending HTTP Request: POST http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages
DEBUG:openai._base_client:Sending HTTP Request: POST https://api.openai.com/v1/audio/speech
DEBUG:httpcore.http11:send_request_headers.started request=<Request [b'POST']>
    16:08:51.477 DEBUG  letta_client._b‚Ä¶ Sending HTTP        {"pid": 3847,      
                                         Request: POST       "job_id":          
                                         http://localhost:82 "AJ_jMSkF2bGXoss", 
                                         83/v1/agents/agent- "room_id":         
                                         4dfca708-49a8-4982- "RM_fb2LtQVHREBB"} 
                                         8e36-0f1146f9a66e/m                    
                                         essages                                
DEBUG:httpcore.http11:send_request_headers.complete
INFO:__mp_main__:üîä Response: [DEBUG: Using Agent ID 46f9a66e] I can't check the current time, but you can easily find it on your ...
DEBUG:httpcore.http11:send_request_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_body.complete
DEBUG:httpcore.http11:receive_response_headers.started request=<Request [b'POST']>
    16:08:51.479 INFO   __mp_main__      üîä Response:        {"pid": 3847,      
                                         [DEBUG: Using Agent "job_id":          
                                         ID 46f9a66e] I      "AJ_jMSkF2bGXoss", 
                                         can't check the     "room_id":         
                                         current time, but   "RM_fb2LtQVHREBB"} 
                                         you can easily find                    
                                         it on your ...                         
INFO:__mp_main__:‚úÖ Total llm_node latency: 0.88s
    16:08:51.480 INFO   __mp_main__      ‚úÖ Total llm_node  {"pid": 3847,       
                                         latency: 0.88s     "job_id":           
                                                            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:‚úÖ RESPONSE GENERATED BY AGENT: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
                 INFO   __mp_main__      ‚úÖ RESPONSE         {"pid": 3847,      
                                         GENERATED BY AGENT: "job_id":          
                                         agent-4dfca708-49a8 "AJ_jMSkF2bGXoss", 
                                         -4982-8e36-0f1146f9 "room_id":         
                                         a66e                "RM_fb2LtQVHREBB"} 
DEBUG:httpcore.http11:receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 28 Dec 2025 21:08:52 GMT'), (b'Content-Type', b'audio/mpeg'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-th7n7uhxazewwtohwceq5lya'), (b'openai-processing-ms', b'731'), (b'openai-project', b'proj_PzQ2TBpwtHVDCFtLt40ViURv'), (b'openai-version', b'2020-10-01'), (b'x-envoy-upstream-service-time', b'989'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'4000000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'3999974'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'0s'), (b'x-request-id', b'req_534b1d81ff4c47e2a8adb5984cd21873'), (b'x-openai-proxy-wasm', b'v0.1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9b54090b3c367308-DTW'), (b'alt-svc', b'h3=":443"; ma=86400')])
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
DEBUG:openai._base_client:HTTP Response: POST https://api.openai.com/v1/audio/speech "200 OK" Headers({'date': 'Sun, 28 Dec 2025 21:08:52 GMT', 'content-type': 'audio/mpeg', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-th7n7uhxazewwtohwceq5lya', 'openai-processing-ms': '731', 'openai-project': 'proj_PzQ2TBpwtHVDCFtLt40ViURv', 'openai-version': '2020-10-01', 'x-envoy-upstream-service-time': '989', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '4000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '3999974', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_534b1d81ff4c47e2a8adb5984cd21873', 'x-openai-proxy-wasm': 'v0.1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '9b54090b3c367308-DTW', 'alt-svc': 'h3=":443"; ma=86400'})
DEBUG:openai._base_client:request_id: req_534b1d81ff4c47e2a8adb5984cd21873
DEBUG:httpcore.http11:receive_response_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_body.complete
DEBUG:httpcore.http11:response_closed.started
DEBUG:httpcore.http11:response_closed.complete
DEBUG:openai._base_client:Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'idempotency_key': 'stainless-python-retry-bc4a15b8-7f4c-4864-a548-ccfaa7dd1a4b', 'json_data': {'input': "If there's anything else you need help with, let me know!", 'model': 'gpt-4o-mini-tts', 'voice': 'nova', 'response_format': 'mp3', 'speed': 1.0}}
DEBUG:openai._base_client:Sending HTTP Request: POST https://api.openai.com/v1/audio/speech
DEBUG:httpcore.http11:send_request_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_headers.complete
DEBUG:httpcore.http11:send_request_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_body.complete
DEBUG:httpcore.http11:receive_response_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 28 Dec 2025 21:08:54 GMT'), (b'Content-Type', b'audio/mpeg'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-th7n7uhxazewwtohwceq5lya'), (b'openai-processing-ms', b'609'), (b'openai-project', b'proj_PzQ2TBpwtHVDCFtLt40ViURv'), (b'openai-version', b'2020-10-01'), (b'x-envoy-upstream-service-time', b'623'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'4000000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'3999986'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'0s'), (b'x-request-id', b'req_06e4be48ef5e4359954a702914573976'), (b'x-openai-proxy-wasm', b'v0.1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9b54091a5f6f7308-DTW'), (b'alt-svc', b'h3=":443"; ma=86400')])
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
DEBUG:openai._base_client:HTTP Response: POST https://api.openai.com/v1/audio/speech "200 OK" Headers({'date': 'Sun, 28 Dec 2025 21:08:54 GMT', 'content-type': 'audio/mpeg', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-th7n7uhxazewwtohwceq5lya', 'openai-processing-ms': '609', 'openai-project': 'proj_PzQ2TBpwtHVDCFtLt40ViURv', 'openai-version': '2020-10-01', 'x-envoy-upstream-service-time': '623', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '4000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '3999986', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_06e4be48ef5e4359954a702914573976', 'x-openai-proxy-wasm': 'v0.1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '9b54091a5f6f7308-DTW', 'alt-svc': 'h3=":443"; ma=86400'})
DEBUG:openai._base_client:request_id: req_06e4be48ef5e4359954a702914573976
DEBUG:httpcore.http11:receive_response_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_body.complete
DEBUG:httpcore.http11:response_closed.started
DEBUG:httpcore.http11:response_closed.complete
DEBUG:httpcore.http11:receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Sun, 28 Dec 2025 21:08:50 GMT'), (b'server', b'uvicorn'), (b'content-length', b'735'), (b'content-type', b'application/json')])
INFO:httpx:HTTP Request: POST http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages "HTTP/1.1 200 OK"
DEBUG:httpcore.http11:receive_response_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_body.complete
DEBUG:httpcore.http11:response_closed.started
DEBUG:httpcore.http11:response_closed.complete
DEBUG:letta_client._base_client:HTTP Response: POST http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages "200 OK" Headers({'date': 'Sun, 28 Dec 2025 21:08:50 GMT', 'server': 'uvicorn', 'content-length': '735', 'content-type': 'application/json'})
INFO:__mp_main__:‚úÖ Letta memory synced in 4.85s (background)
DEBUG:letta_client._base_client:HTTP Response: POST http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages "200 OK" Headers({'date': 'Sun, 28 Dec 2025 21:08:50 GMT', 'server': 'uvicorn', 'content-length': '735', 'content-type': 'application/json'})
    16:08:56.323 DEBUG  letta_client._b‚Ä¶ HTTP Response: POST {"pid": 3847,      
                                         http://localhost:82 "job_id":          
                                         83/v1/agents/agent- "AJ_jMSkF2bGXoss", 
                                         4dfca708-49a8-4982- "room_id":         
                                         8e36-0f1146f9a66e/m "RM_fb2LtQVHREBB"} 
                                         essages "200 OK"                       
                                         Headers({'date':                       
                                         'Sun, 28 Dec 2025                      
                                         21:08:50 GMT',                         
                                         'server':                              
                                         'uvicorn',                             
                                         'content-length':                      
                                         '735',                                 
                                         'content-type':                        
                                         'application/json'}                    
                                         )                                      
INFO:__mp_main__:‚úÖ Letta memory synced in 4.85s (background)
    16:08:56.324 INFO   __mp_main__      ‚úÖ Letta memory    {"pid": 3847,       
                                         synced in 4.85s    "job_id":           
                                         (background)       "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
DEBUG:livekit.agents:received user transcript
DEBUG:livekit.agents:received user transcript
    16:09:15.385 DEBUG  livekit.agents   received user      {"user_transcript": 
                                         transcript         "What's your name?",
                                                            "language": "en",   
                                                            "transcript_delay": 
                                                            0.3411405086517334, 
                                                            "pid": 3847,        
                                                            "job_id":           
                                                            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:üé§ ========================================
INFO:__mp_main__:üé§ NEW QUERY RECEIVED
INFO:__mp_main__:üé§ User message: What's your name?
INFO:__mp_main__:üé§ ========================================
INFO:__mp_main__:üé§ Current Agent ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
INFO:__mp_main__:üé§ Current Agent Name: Agent_66
INFO:__mp_main__:üé§ Memory Loaded: True
INFO:__mp_main__:üé§ ========================================
    16:09:15.795 INFO   __mp_main__      üé§                  {"pid": 3847,      
                                         =================== "job_id":          
                                         =================== "AJ_jMSkF2bGXoss", 
                                         ==                  "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üé§ NEW QUERY RECEIVED
                 INFO   __mp_main__      üé§ NEW QUERY        {"pid": 3847,      
                                         RECEIVED            "job_id":          
                                                             "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üé§ User message: What's your name?
    16:09:15.796 INFO   __mp_main__      üé§ User message:   {"pid": 3847,       
                                         What's your name?  "job_id":           
                                                            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:üé§ Current Agent ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
INFO:__mp_main__:‚ö° Using HYBRID mode (fast OpenAI with agent memory + background Letta)
                 INFO   __mp_main__      üé§ Current Agent    {"pid": 3847,      
                                         ID:                 "job_id":          
                                         agent-4dfca708-49a8 "AJ_jMSkF2bGXoss", 
                                         -4982-8e36-0f1146f9 "room_id":         
                                         a66e                "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üé§ Current Agent Name: Agent_66
INFO:__mp_main__:‚ö° OPENAI FAST PATH - Agent ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
INFO:__mp_main__:‚úÖ Memory already loaded for agent agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
INFO:__mp_main__:‚ö° Using direct OpenAI streaming with agent memory (fast path)
                 INFO   __mp_main__      üé§ Current Agent    {"pid": 3847,      
                                         Name: Agent_66      "job_id":          
                                                             "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üé§ Memory Loaded: True
INFO:__mp_main__:‚ö° Agent persona loaded: 0 chars
INFO:__mp_main__:‚ö° Memory blocks count: 0
                 INFO   __mp_main__      üé§ Memory Loaded:  {"pid": 3847,       
                                         True               "job_id":           
                                                            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
DEBUG:__mp_main__:üìã System instructions: You are a helpful voice AI orchestrator with long-term memory.

            You coordinate multiple specialist agents to help users build software.
            You have access to:
            - Memory...
INFO:__mp_main__:üé§ ========================================
DEBUG:__mp_main__:üìã Conversation history: 4 messages (using last 10)
    16:09:15.797 INFO   __mp_main__      üé§                  {"pid": 3847,      
                                         =================== "job_id":          
                                         =================== "AJ_jMSkF2bGXoss", 
                                         ==                  "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚ö° Using HYBRID mode (fast OpenAI with agent memory + background Letta)
    16:09:15.807 INFO   __mp_main__      ‚ö° Using HYBRID     {"pid": 3847,      
                                         mode (fast OpenAI   "job_id":          
                                         with agent memory + "AJ_jMSkF2bGXoss", 
                                         background Letta)   "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚ö° OPENAI FAST PATH - Agent ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
    16:09:15.811 INFO   __mp_main__      ‚ö° OPENAI FAST PATH {"pid": 3847,      
                                         - Agent ID:         "job_id":          
                                         agent-4dfca708-49a8 "AJ_jMSkF2bGXoss", 
                                         -4982-8e36-0f1146f9 "room_id":         
                                         a66e                "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚úÖ Memory already loaded for agent agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
                 INFO   __mp_main__      ‚úÖ Memory already   {"pid": 3847,      
                                         loaded for agent    "job_id":          
                                         agent-4dfca708-49a8 "AJ_jMSkF2bGXoss", 
                                         -4982-8e36-0f1146f9 "room_id":         
                                         a66e                "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚ö° Using direct OpenAI streaming with agent memory (fast path)
    16:09:15.812 INFO   __mp_main__      ‚ö° Using direct    {"pid": 3847,       
                                         OpenAI streaming   "job_id":           
                                         with agent memory  "AJ_jMSkF2bGXoss",  
                                         (fast path)        "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:‚ö° Agent persona loaded: 0 chars
    16:09:15.814 INFO   __mp_main__      ‚ö° Agent persona   {"pid": 3847,       
                                         loaded: 0 chars    "job_id":           
                                                            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:‚ö° Memory blocks count: 0
                 INFO   __mp_main__      ‚ö° Memory blocks    {"pid": 3847,      
                                         count: 0            "job_id":          
                                                             "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
DEBUG:__mp_main__:üìã System instructions: You are a helpful voice AI orchestrator with long-term memory.

            You coordinate multiple specialist agents to help users build software.
            You have access to:
            - Memory...
    16:09:15.815 DEBUG  __mp_main__      üìã System           {"pid": 3847,      
                                         instructions: You   "job_id":          
                                         are a helpful voice "AJ_jMSkF2bGXoss", 
                                         AI orchestrator     "room_id":         
                                         with long-term      "RM_fb2LtQVHREBB"} 
                                         memory.                                
                                                                                
                                                     You                        
                                         coordinate multiple                    
                                         specialist agents                      
                                         to help users build                    
                                         software.                              
                                                     You                        
                                         have access to:                        
                                                     -                          
                                         Memory...                              
DEBUG:__mp_main__:üìã Conversation history: 4 messages (using last 10)
                 DEBUG  __mp_main__      üìã Conversation     {"pid": 3847,      
                                         history: 4 messages "job_id":          
                                         (using last 10)     "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
DEBUG:httpcore.connection:connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=30.0 socket_options=None
DEBUG:httpcore.connection:connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x79601803a750>
DEBUG:httpcore.connection:start_tls.started ssl_context=<ssl.SSLContext object at 0x79607820ab50> server_hostname='api.openai.com' timeout=30.0
DEBUG:httpcore.connection:start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x79601b1e51f0>
DEBUG:httpcore.http11:send_request_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_headers.complete
DEBUG:httpcore.http11:send_request_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_body.complete
DEBUG:httpcore.http11:receive_response_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 28 Dec 2025 21:09:16 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-th7n7uhxazewwtohwceq5lya'), (b'openai-processing-ms', b'129'), (b'openai-project', b'proj_PzQ2TBpwtHVDCFtLt40ViURv'), (b'openai-version', b'2020-10-01'), (b'x-envoy-upstream-service-time', b'368'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'4000000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'3999727'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'4ms'), (b'x-request-id', b'req_c925127014d0417bb15d64837419eaef'), (b'x-openai-proxy-wasm', b'v0.1'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=xxJ1eOR1JFBYhbXaZgbLoTfKOIHsF1WNA8tIi7PEaDk-1766956156-1.0.1.1-KknjSNFxDxTgyJVpA1wumAp7vk0uRRd7ATkvitPr86HhKVn6p5p_J.VZcUdYmzTV2fqP.YBXGU0xr9U0YFXbjDZfDznpM8wqOPlPIerp7As; path=/; expires=Sun, 28-Dec-25 21:39:16 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=RdQAWWzfHmj025cFj5p606jVnLR8ybKgkf6q5C7QysQ-1766956156346-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9b5409a42dbe7308-DTW'), (b'alt-svc', b'h3=":443"; ma=86400')])
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
DEBUG:httpcore.http11:receive_response_body.started request=<Request [b'POST']>
INFO:__mp_main__:‚ö° TTFT: 1001ms (with agent memory)
INFO:__mp_main__:‚ö° TTFT: 1001ms (with agent memory)
    16:09:16.816 INFO   __mp_main__      ‚ö° TTFT: 1001ms     {"pid": 3847,      
                                         (with agent memory) "job_id":          
                                                             "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
DEBUG:httpcore.http11:response_closed.started
DEBUG:httpcore.http11:response_closed.complete
INFO:__mp_main__:‚ö° Direct OpenAI streaming complete: 1.39s (with agent knowledge)
INFO:__mp_main__:‚ö° Fast path response duration: 1.40s
INFO:__mp_main__:‚ö° Direct OpenAI streaming complete: 1.39s (with agent knowledge)
DEBUG:httpcore.http11:receive_response_body.failed exception=GeneratorExit()
INFO:__mp_main__:üîÑ Syncing to Letta memory (background)...
DEBUG:letta_client._base_client:Request options: {'method': 'post', 'url': '/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-18f75810-b7df-49ef-8f2b-f66d10b03f48', 'json_data': {'messages': [{'role': 'user', 'content': "What's your name?"}, {'role': 'assistant', 'content': 'I don‚Äôt have a specific name, but you can call me your software assistant. How can I help you today?'}]}}
    16:09:17.202 INFO   __mp_main__      ‚ö° Direct OpenAI    {"pid": 3847,      
                                         streaming complete: "job_id":          
                                         1.39s (with agent   "AJ_jMSkF2bGXoss", 
                                         knowledge)          "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚ö° Fast path response duration: 1.40s
DEBUG:letta_client._base_client:Sending HTTP Request: POST http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages
DEBUG:httpcore.connection:close.started
DEBUG:httpcore.connection:close.complete
INFO:__mp_main__:üîä Response: [DEBUG: Using Agent ID 46f9a66e] I don‚Äôt have a specific name, but you can call me your software ass...
    16:09:17.203 INFO   __mp_main__      ‚ö° Fast path        {"pid": 3847,      
                                         response duration:  "job_id":          
                                         1.40s               "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üîÑ Syncing to Letta memory (background)...
INFO:__mp_main__:‚úÖ Total llm_node latency: 1.42s
INFO:__mp_main__:‚úÖ RESPONSE GENERATED BY AGENT: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
DEBUG:httpcore.connection:connect_tcp.started host='localhost' port=8283 local_address=None timeout=5.0 socket_options=None
    16:09:17.208 INFO   __mp_main__      üîÑ Syncing to      {"pid": 3847,       
                                         Letta memory       "job_id":           
                                         (background)...    "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
DEBUG:letta_client._base_client:Request options: {'method': 'post', 'url': '/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-18f75810-b7df-49ef-8f2b-f66d10b03f48', 'json_data': {'messages': [{'role': 'user', 'content': "What's your name?"}, {'role': 'assistant', 'content': 'I don‚Äôt have a specific name, but you can call me your software assistant. How can I help you today?'}]}}
DEBUG:openai._base_client:Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'idempotency_key': 'stainless-python-retry-84f7f009-9259-4a29-9744-122f09f4cde3', 'json_data': {'input': '[DEBUG: Using Agent ID 46f9a66e] I don‚Äôt have a specific name, but you can call me your software assistant.', 'model': 'gpt-4o-mini-tts', 'voice': 'nova', 'response_format': 'mp3', 'speed': 1.0}}
DEBUG:openai._base_client:Sending HTTP Request: POST https://api.openai.com/v1/audio/speech
    16:09:17.209 DEBUG  letta_client._b‚Ä¶ Request options:    {"pid": 3847,      
                                         {'method': 'post',  "job_id":          
                                         'url':              "AJ_jMSkF2bGXoss", 
                                         '/v1/agents/agent-4 "room_id":         
                                         dfca708-49a8-4982-8 "RM_fb2LtQVHREBB"} 
                                         e36-0f1146f9a66e/me                    
                                         ssages', 'files':                      
                                         None,                                  
                                         'idempotency_key':                     
                                         'stainless-python-r                    
                                         etry-18f75810-b7df-                    
                                         49ef-8f2b-f66d10b03                    
                                         f48', 'json_data':                     
                                         {'messages':                           
                                         [{'role': 'user',                      
                                         'content': "What's                     
                                         your name?"},                          
                                         {'role':                               
                                         'assistant',                           
                                         'content': 'I don‚Äôt                    
                                         have a specific                        
                                         name, but you can                      
                                         call me your                           
                                         software assistant.                    
                                         How can I help you                     
                                         today?'}]}}                            
DEBUG:letta_client._base_client:Sending HTTP Request: POST http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages
DEBUG:httpcore.http11:send_request_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_headers.complete
DEBUG:httpcore.http11:send_request_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_body.complete
DEBUG:httpcore.http11:receive_response_headers.started request=<Request [b'POST']>
    16:09:17.211 DEBUG  letta_client._b‚Ä¶ Sending HTTP        {"pid": 3847,      
                                         Request: POST       "job_id":          
                                         http://localhost:82 "AJ_jMSkF2bGXoss", 
                                         83/v1/agents/agent- "room_id":         
                                         4dfca708-49a8-4982- "RM_fb2LtQVHREBB"} 
                                         8e36-0f1146f9a66e/m                    
                                         essages                                
INFO:__mp_main__:üîä Response: [DEBUG: Using Agent ID 46f9a66e] I don‚Äôt have a specific name, but you can call me your software ass...
DEBUG:httpcore.connection:connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x79608ad8b980>
DEBUG:httpcore.http11:send_request_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_headers.complete
DEBUG:httpcore.http11:send_request_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_body.complete
DEBUG:httpcore.http11:receive_response_headers.started request=<Request [b'POST']>
    16:09:17.215 INFO   __mp_main__      üîä Response:        {"pid": 3847,      
                                         [DEBUG: Using Agent "job_id":          
                                         ID 46f9a66e] I      "AJ_jMSkF2bGXoss", 
                                         don‚Äôt have a        "room_id":         
                                         specific name, but  "RM_fb2LtQVHREBB"} 
                                         you can call me                        
                                         your software                          
                                         ass...                                 
INFO:__mp_main__:‚úÖ Total llm_node latency: 1.42s
                 INFO   __mp_main__      ‚úÖ Total llm_node  {"pid": 3847,       
                                         latency: 1.42s     "job_id":           
                                                            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:‚úÖ RESPONSE GENERATED BY AGENT: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
    16:09:17.216 INFO   __mp_main__      ‚úÖ RESPONSE         {"pid": 3847,      
                                         GENERATED BY AGENT: "job_id":          
                                         agent-4dfca708-49a8 "AJ_jMSkF2bGXoss", 
                                         -4982-8e36-0f1146f9 "room_id":         
                                         a66e                "RM_fb2LtQVHREBB"} 
DEBUG:httpcore.http11:receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 28 Dec 2025 21:09:17 GMT'), (b'Content-Type', b'audio/mpeg'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-th7n7uhxazewwtohwceq5lya'), (b'openai-processing-ms', b'610'), (b'openai-project', b'proj_PzQ2TBpwtHVDCFtLt40ViURv'), (b'openai-version', b'2020-10-01'), (b'x-envoy-upstream-service-time', b'624'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'4000000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'3999973'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'0s'), (b'x-request-id', b'req_eea301d206f14607a59277b5f1915a2b'), (b'x-openai-proxy-wasm', b'v0.1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9b5409ac199e7308-DTW'), (b'alt-svc', b'h3=":443"; ma=86400')])
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
DEBUG:openai._base_client:HTTP Response: POST https://api.openai.com/v1/audio/speech "200 OK" Headers({'date': 'Sun, 28 Dec 2025 21:09:17 GMT', 'content-type': 'audio/mpeg', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-th7n7uhxazewwtohwceq5lya', 'openai-processing-ms': '610', 'openai-project': 'proj_PzQ2TBpwtHVDCFtLt40ViURv', 'openai-version': '2020-10-01', 'x-envoy-upstream-service-time': '624', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '4000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '3999973', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_eea301d206f14607a59277b5f1915a2b', 'x-openai-proxy-wasm': 'v0.1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '9b5409ac199e7308-DTW', 'alt-svc': 'h3=":443"; ma=86400'})
DEBUG:openai._base_client:request_id: req_eea301d206f14607a59277b5f1915a2b
DEBUG:httpcore.http11:receive_response_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_body.complete
DEBUG:httpcore.http11:response_closed.started
DEBUG:httpcore.http11:response_closed.complete
DEBUG:openai._base_client:Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'idempotency_key': 'stainless-python-retry-1a92b5d4-f123-4477-8e79-fd0a4005f04c', 'json_data': {'input': 'How can I help you today?', 'model': 'gpt-4o-mini-tts', 'voice': 'nova', 'response_format': 'mp3', 'speed': 1.0}}
DEBUG:openai._base_client:Sending HTTP Request: POST https://api.openai.com/v1/audio/speech
DEBUG:httpcore.http11:send_request_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_headers.complete
DEBUG:httpcore.http11:send_request_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_body.complete
DEBUG:httpcore.http11:receive_response_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 28 Dec 2025 21:09:19 GMT'), (b'Content-Type', b'audio/mpeg'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-th7n7uhxazewwtohwceq5lya'), (b'openai-processing-ms', b'406'), (b'openai-project', b'proj_PzQ2TBpwtHVDCFtLt40ViURv'), (b'openai-version', b'2020-10-01'), (b'x-envoy-upstream-service-time', b'423'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'4000000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'3999994'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'0s'), (b'x-request-id', b'req_708a5c50ea994fb7a319d5651a9cb3f4'), (b'x-openai-proxy-wasm', b'v0.1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9b5409b7c9287308-DTW'), (b'alt-svc', b'h3=":443"; ma=86400')])
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
DEBUG:openai._base_client:HTTP Response: POST https://api.openai.com/v1/audio/speech "200 OK" Headers({'date': 'Sun, 28 Dec 2025 21:09:19 GMT', 'content-type': 'audio/mpeg', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-th7n7uhxazewwtohwceq5lya', 'openai-processing-ms': '406', 'openai-project': 'proj_PzQ2TBpwtHVDCFtLt40ViURv', 'openai-version': '2020-10-01', 'x-envoy-upstream-service-time': '423', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '4000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '3999994', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_708a5c50ea994fb7a319d5651a9cb3f4', 'x-openai-proxy-wasm': 'v0.1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '9b5409b7c9287308-DTW', 'alt-svc': 'h3=":443"; ma=86400'})
DEBUG:openai._base_client:request_id: req_708a5c50ea994fb7a319d5651a9cb3f4
DEBUG:httpcore.http11:receive_response_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_body.complete
DEBUG:httpcore.http11:response_closed.started
DEBUG:httpcore.http11:response_closed.complete
DEBUG:httpcore.http11:receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Sun, 28 Dec 2025 21:09:17 GMT'), (b'server', b'uvicorn'), (b'content-length', b'606'), (b'content-type', b'application/json')])
INFO:httpx:HTTP Request: POST http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages "HTTP/1.1 200 OK"
DEBUG:httpcore.http11:receive_response_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_body.complete
DEBUG:httpcore.http11:response_closed.started
DEBUG:httpcore.http11:response_closed.complete
DEBUG:letta_client._base_client:HTTP Response: POST http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages "200 OK" Headers({'date': 'Sun, 28 Dec 2025 21:09:17 GMT', 'server': 'uvicorn', 'content-length': '606', 'content-type': 'application/json'})
INFO:__mp_main__:‚úÖ Letta memory synced in 4.20s (background)
DEBUG:letta_client._base_client:HTTP Response: POST http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages "200 OK" Headers({'date': 'Sun, 28 Dec 2025 21:09:17 GMT', 'server': 'uvicorn', 'content-length': '606', 'content-type': 'application/json'})
    16:09:21.407 DEBUG  letta_client._b‚Ä¶ HTTP Response: POST {"pid": 3847,      
                                         http://localhost:82 "job_id":          
                                         83/v1/agents/agent- "AJ_jMSkF2bGXoss", 
                                         4dfca708-49a8-4982- "room_id":         
                                         8e36-0f1146f9a66e/m "RM_fb2LtQVHREBB"} 
                                         essages "200 OK"                       
                                         Headers({'date':                       
                                         'Sun, 28 Dec 2025                      
                                         21:09:17 GMT',                         
                                         'server':                              
                                         'uvicorn',                             
                                         'content-length':                      
                                         '606',                                 
                                         'content-type':                        
                                         'application/json'}                    
                                         )                                      
INFO:__mp_main__:‚úÖ Letta memory synced in 4.20s (background)
    16:09:21.408 INFO   __mp_main__      ‚úÖ Letta memory    {"pid": 3847,       
                                         synced in 4.20s    "job_id":           
                                         (background)       "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
DEBUG:livekit.agents:received user transcript
DEBUG:livekit.agents:received user transcript
    16:09:31.229 DEBUG  livekit.agents   received user      {"user_transcript": 
                                         transcript         "What's your name   
                                                            again?", "language":
                                                            "en",               
                                                            "transcript_delay": 
                                                            0.28371620178222656,
                                                            "pid": 3847,        
                                                            "job_id":           
                                                            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:üé§ ========================================
INFO:__mp_main__:üé§ NEW QUERY RECEIVED
INFO:__mp_main__:üé§ User message: What's your name again?
INFO:__mp_main__:üé§ ========================================
INFO:__mp_main__:üé§ Current Agent ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
INFO:__mp_main__:üé§ Current Agent Name: Agent_66
INFO:__mp_main__:üé§ Memory Loaded: True
INFO:__mp_main__:üé§ ========================================
    16:09:31.695 INFO   __mp_main__      üé§                  {"pid": 3847,      
                                         =================== "job_id":          
                                         =================== "AJ_jMSkF2bGXoss", 
                                         ==                  "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üé§ NEW QUERY RECEIVED
    16:09:31.696 INFO   __mp_main__      üé§ NEW QUERY        {"pid": 3847,      
                                         RECEIVED            "job_id":          
                                                             "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üé§ User message: What's your name again?
                 INFO   __mp_main__      üé§ User message:   {"pid": 3847,       
                                         What's your name   "job_id":           
                                         again?             "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:üé§ Current Agent ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
INFO:__mp_main__:‚ö° Using HYBRID mode (fast OpenAI with agent memory + background Letta)
                 INFO   __mp_main__      üé§ Current Agent    {"pid": 3847,      
                                         ID:                 "job_id":          
                                         agent-4dfca708-49a8 "AJ_jMSkF2bGXoss", 
                                         -4982-8e36-0f1146f9 "room_id":         
                                         a66e                "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üé§ Current Agent Name: Agent_66
INFO:__mp_main__:‚ö° OPENAI FAST PATH - Agent ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
INFO:__mp_main__:‚úÖ Memory already loaded for agent agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
    16:09:31.697 INFO   __mp_main__      üé§ Current Agent    {"pid": 3847,      
                                         Name: Agent_66      "job_id":          
                                                             "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚ö° Using direct OpenAI streaming with agent memory (fast path)
INFO:__mp_main__:‚ö° Agent persona loaded: 0 chars
INFO:__mp_main__:üé§ Memory Loaded: True
INFO:__mp_main__:‚ö° Memory blocks count: 0
DEBUG:__mp_main__:üìã System instructions: You are a helpful voice AI orchestrator with long-term memory.

            You coordinate multiple specialist agents to help users build software.
            You have access to:
            - Memory...
DEBUG:__mp_main__:üìã Conversation history: 6 messages (using last 10)
                 INFO   __mp_main__      üé§ Memory Loaded:  {"pid": 3847,       
                                         True               "job_id":           
                                                            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:üé§ ========================================
                 INFO   __mp_main__      üé§                  {"pid": 3847,      
                                         =================== "job_id":          
                                         =================== "AJ_jMSkF2bGXoss", 
                                         ==                  "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚ö° Using HYBRID mode (fast OpenAI with agent memory + background Letta)
    16:09:31.711 INFO   __mp_main__      ‚ö° Using HYBRID     {"pid": 3847,      
                                         mode (fast OpenAI   "job_id":          
                                         with agent memory + "AJ_jMSkF2bGXoss", 
                                         background Letta)   "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚ö° OPENAI FAST PATH - Agent ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
    16:09:31.713 INFO   __mp_main__      ‚ö° OPENAI FAST PATH {"pid": 3847,      
                                         - Agent ID:         "job_id":          
                                         agent-4dfca708-49a8 "AJ_jMSkF2bGXoss", 
                                         -4982-8e36-0f1146f9 "room_id":         
                                         a66e                "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚úÖ Memory already loaded for agent agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
    16:09:31.714 INFO   __mp_main__      ‚úÖ Memory already   {"pid": 3847,      
                                         loaded for agent    "job_id":          
                                         agent-4dfca708-49a8 "AJ_jMSkF2bGXoss", 
                                         -4982-8e36-0f1146f9 "room_id":         
                                         a66e                "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚ö° Using direct OpenAI streaming with agent memory (fast path)
                 INFO   __mp_main__      ‚ö° Using direct    {"pid": 3847,       
                                         OpenAI streaming   "job_id":           
                                         with agent memory  "AJ_jMSkF2bGXoss",  
                                         (fast path)        "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:‚ö° Agent persona loaded: 0 chars
    16:09:31.715 INFO   __mp_main__      ‚ö° Agent persona   {"pid": 3847,       
                                         loaded: 0 chars    "job_id":           
                                                            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:‚ö° Memory blocks count: 0
                 INFO   __mp_main__      ‚ö° Memory blocks    {"pid": 3847,      
                                         count: 0            "job_id":          
                                                             "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
DEBUG:__mp_main__:üìã System instructions: You are a helpful voice AI orchestrator with long-term memory.

            You coordinate multiple specialist agents to help users build software.
            You have access to:
            - Memory...
                 DEBUG  __mp_main__      üìã System           {"pid": 3847,      
                                         instructions: You   "job_id":          
                                         are a helpful voice "AJ_jMSkF2bGXoss", 
                                         AI orchestrator     "room_id":         
                                         with long-term      "RM_fb2LtQVHREBB"} 
                                         memory.                                
                                                                                
                                                     You                        
                                         coordinate multiple                    
                                         specialist agents                      
                                         to help users build                    
                                         software.                              
                                                     You                        
                                         have access to:                        
                                                     -                          
                                         Memory...                              
DEBUG:__mp_main__:üìã Conversation history: 6 messages (using last 10)
                 DEBUG  __mp_main__      üìã Conversation     {"pid": 3847,      
                                         history: 6 messages "job_id":          
                                         (using last 10)     "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
DEBUG:httpcore.connection:connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=30.0 socket_options=None
DEBUG:httpcore.connection:connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x79601b2e4200>
DEBUG:httpcore.connection:start_tls.started ssl_context=<ssl.SSLContext object at 0x795fe06e16d0> server_hostname='api.openai.com' timeout=30.0
DEBUG:httpcore.connection:start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7960890acf80>
DEBUG:httpcore.http11:send_request_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_headers.complete
DEBUG:httpcore.http11:send_request_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_body.complete
DEBUG:httpcore.http11:receive_response_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 28 Dec 2025 21:09:31 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-th7n7uhxazewwtohwceq5lya'), (b'openai-processing-ms', b'175'), (b'openai-project', b'proj_PzQ2TBpwtHVDCFtLt40ViURv'), (b'openai-version', b'2020-10-01'), (b'x-envoy-upstream-service-time', b'189'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'4000000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'3999694'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'4ms'), (b'x-request-id', b'req_ba9a0bd402de475d923290772bbff5df'), (b'x-openai-proxy-wasm', b'v0.1'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=T1oHvR29ibIUGp.2pDfS2JZ1y0v_vcQAtnFcv8fcV5U-1766956171-1.0.1.1-eYCMLj4RB2YQJ05ccJLRU0mqTagCqo1JElFoEMg2r0KTSqnXVqjc..92pOIuyNVwuCVmiJxpNtBgGCRlBWHTpmg0uucWzOCE6o3Cx.P1pEc; path=/; expires=Sun, 28-Dec-25 21:39:31 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=jOM5qCiJYBIFE5t_lUOrSHwFJfVZYiq8Q2bpSur34u0-1766956171713-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9b540a07bda7a93f-DTW'), (b'alt-svc', b'h3=":443"; ma=86400')])
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
DEBUG:httpcore.http11:receive_response_body.started request=<Request [b'POST']>
INFO:__mp_main__:‚ö° TTFT: 482ms (with agent memory)
INFO:__mp_main__:‚ö° TTFT: 482ms (with agent memory)
    16:09:32.198 INFO   __mp_main__      ‚ö° TTFT: 482ms     {"pid": 3847,       
                                         (with agent        "job_id":           
                                         memory)            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
DEBUG:httpcore.http11:response_closed.started
DEBUG:httpcore.http11:response_closed.complete
INFO:__mp_main__:‚ö° Direct OpenAI streaming complete: 0.95s (with agent knowledge)
INFO:__mp_main__:‚ö° Fast path response duration: 0.95s
INFO:__mp_main__:‚ö° Direct OpenAI streaming complete: 0.95s (with agent knowledge)
DEBUG:httpcore.http11:receive_response_body.failed exception=GeneratorExit()
INFO:__mp_main__:üîÑ Syncing to Letta memory (background)...
DEBUG:letta_client._base_client:Request options: {'method': 'post', 'url': '/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-b401ca5c-6083-4074-ad96-5b7de06fd514', 'json_data': {'messages': [{'role': 'user', 'content': "What's your name again?"}, {'role': 'assistant', 'content': "You can just call me your software assistant! I'm here to help you with your projects. What do you need assistance with?"}]}}
    16:09:32.666 INFO   __mp_main__      ‚ö° Direct OpenAI    {"pid": 3847,      
                                         streaming complete: "job_id":          
                                         0.95s (with agent   "AJ_jMSkF2bGXoss", 
                                         knowledge)          "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚ö° Fast path response duration: 0.95s
DEBUG:letta_client._base_client:Sending HTTP Request: POST http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages
DEBUG:httpcore.connection:close.started
DEBUG:httpcore.connection:close.complete
INFO:__mp_main__:üîä Response: [DEBUG: Using Agent ID 46f9a66e] You can just call me your software assistant! I'm here to help you ...
INFO:__mp_main__:‚úÖ Total llm_node latency: 0.98s
INFO:__mp_main__:‚úÖ RESPONSE GENERATED BY AGENT: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
DEBUG:httpcore.connection:connect_tcp.started host='localhost' port=8283 local_address=None timeout=5.0 socket_options=None
                 INFO   __mp_main__      ‚ö° Fast path        {"pid": 3847,      
                                         response duration:  "job_id":          
                                         0.95s               "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üîÑ Syncing to Letta memory (background)...
DEBUG:openai._base_client:Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'idempotency_key': 'stainless-python-retry-d868e617-18a0-4409-8cd9-24cd8d2b1a14', 'json_data': {'input': '[DEBUG: Using Agent ID 46f9a66e] You can just call me your software assistant!', 'model': 'gpt-4o-mini-tts', 'voice': 'nova', 'response_format': 'mp3', 'speed': 1.0}}
DEBUG:openai._base_client:Sending HTTP Request: POST https://api.openai.com/v1/audio/speech
    16:09:32.671 INFO   __mp_main__      üîÑ Syncing to      {"pid": 3847,       
                                         Letta memory       "job_id":           
                                         (background)...    "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
DEBUG:letta_client._base_client:Request options: {'method': 'post', 'url': '/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-b401ca5c-6083-4074-ad96-5b7de06fd514', 'json_data': {'messages': [{'role': 'user', 'content': "What's your name again?"}, {'role': 'assistant', 'content': "You can just call me your software assistant! I'm here to help you with your projects. What do you need assistance with?"}]}}
DEBUG:httpcore.http11:send_request_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_headers.complete
DEBUG:httpcore.http11:send_request_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_body.complete
DEBUG:httpcore.http11:receive_response_headers.started request=<Request [b'POST']>
DEBUG:httpcore.connection:connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x79601b1418b0>
DEBUG:httpcore.http11:send_request_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_headers.complete
DEBUG:httpcore.http11:send_request_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_body.complete
DEBUG:httpcore.http11:receive_response_headers.started request=<Request [b'POST']>
    16:09:32.672 DEBUG  letta_client._b‚Ä¶ Request options:    {"pid": 3847,      
                                         {'method': 'post',  "job_id":          
                                         'url':              "AJ_jMSkF2bGXoss", 
                                         '/v1/agents/agent-4 "room_id":         
                                         dfca708-49a8-4982-8 "RM_fb2LtQVHREBB"} 
                                         e36-0f1146f9a66e/me                    
                                         ssages', 'files':                      
                                         None,                                  
                                         'idempotency_key':                     
                                         'stainless-python-r                    
                                         etry-b401ca5c-6083-                    
                                         4074-ad96-5b7de06fd                    
                                         514', 'json_data':                     
                                         {'messages':                           
                                         [{'role': 'user',                      
                                         'content': "What's                     
                                         your name again?"},                    
                                         {'role':                               
                                         'assistant',                           
                                         'content': "You can                    
                                         just call me your                      
                                         software assistant!                    
                                         I'm here to help                       
                                         you with your                          
                                         projects. What do                      
                                         you need assistance                    
                                         with?"}]}}                             
DEBUG:letta_client._base_client:Sending HTTP Request: POST http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages
    16:09:32.674 DEBUG  letta_client._b‚Ä¶ Sending HTTP        {"pid": 3847,      
                                         Request: POST       "job_id":          
                                         http://localhost:82 "AJ_jMSkF2bGXoss", 
                                         83/v1/agents/agent- "room_id":         
                                         4dfca708-49a8-4982- "RM_fb2LtQVHREBB"} 
                                         8e36-0f1146f9a66e/m                    
                                         essages                                
INFO:__mp_main__:üîä Response: [DEBUG: Using Agent ID 46f9a66e] You can just call me your software assistant! I'm here to help you ...
    16:09:32.676 INFO   __mp_main__      üîä Response:        {"pid": 3847,      
                                         [DEBUG: Using Agent "job_id":          
                                         ID 46f9a66e] You    "AJ_jMSkF2bGXoss", 
                                         can just call me    "room_id":         
                                         your software       "RM_fb2LtQVHREBB"} 
                                         assistant! I'm here                    
                                         to help you ...                        
INFO:__mp_main__:‚úÖ Total llm_node latency: 0.98s
                 INFO   __mp_main__      ‚úÖ Total llm_node  {"pid": 3847,       
                                         latency: 0.98s     "job_id":           
                                                            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:‚úÖ RESPONSE GENERATED BY AGENT: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
    16:09:32.677 INFO   __mp_main__      ‚úÖ RESPONSE         {"pid": 3847,      
                                         GENERATED BY AGENT: "job_id":          
                                         agent-4dfca708-49a8 "AJ_jMSkF2bGXoss", 
                                         -4982-8e36-0f1146f9 "room_id":         
                                         a66e                "RM_fb2LtQVHREBB"} 
DEBUG:httpcore.http11:receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 28 Dec 2025 21:09:33 GMT'), (b'Content-Type', b'audio/mpeg'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-th7n7uhxazewwtohwceq5lya'), (b'openai-processing-ms', b'864'), (b'openai-project', b'proj_PzQ2TBpwtHVDCFtLt40ViURv'), (b'openai-version', b'2020-10-01'), (b'x-envoy-upstream-service-time', b'876'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'4000000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'3999981'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'0s'), (b'x-request-id', b'req_5dd1b728727b423f839d97374425dc5b'), (b'x-openai-proxy-wasm', b'v0.1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9b540a0cbcdb7308-DTW'), (b'alt-svc', b'h3=":443"; ma=86400')])
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
DEBUG:openai._base_client:HTTP Response: POST https://api.openai.com/v1/audio/speech "200 OK" Headers({'date': 'Sun, 28 Dec 2025 21:09:33 GMT', 'content-type': 'audio/mpeg', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-th7n7uhxazewwtohwceq5lya', 'openai-processing-ms': '864', 'openai-project': 'proj_PzQ2TBpwtHVDCFtLt40ViURv', 'openai-version': '2020-10-01', 'x-envoy-upstream-service-time': '876', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '4000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '3999981', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_5dd1b728727b423f839d97374425dc5b', 'x-openai-proxy-wasm': 'v0.1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '9b540a0cbcdb7308-DTW', 'alt-svc': 'h3=":443"; ma=86400'})
DEBUG:openai._base_client:request_id: req_5dd1b728727b423f839d97374425dc5b
DEBUG:httpcore.http11:receive_response_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_body.complete
DEBUG:httpcore.http11:response_closed.started
DEBUG:httpcore.http11:response_closed.complete
DEBUG:openai._base_client:Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'idempotency_key': 'stainless-python-retry-77d08ae4-8aa2-4499-8706-870bbfb2ea32', 'json_data': {'input': "I'm here to help you with your projects.", 'model': 'gpt-4o-mini-tts', 'voice': 'nova', 'response_format': 'mp3', 'speed': 1.0}}
DEBUG:openai._base_client:Sending HTTP Request: POST https://api.openai.com/v1/audio/speech
DEBUG:httpcore.http11:send_request_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_headers.complete
DEBUG:httpcore.http11:send_request_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_body.complete
DEBUG:httpcore.http11:receive_response_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 28 Dec 2025 21:09:34 GMT'), (b'Content-Type', b'audio/mpeg'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-th7n7uhxazewwtohwceq5lya'), (b'openai-processing-ms', b'446'), (b'openai-project', b'proj_PzQ2TBpwtHVDCFtLt40ViURv'), (b'openai-version', b'2020-10-01'), (b'x-envoy-upstream-service-time', b'591'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'4000000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'3999989'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'0s'), (b'x-request-id', b'req_48d3fcf79b9246a199896cbf5e851cc0'), (b'x-openai-proxy-wasm', b'v0.1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9b540a163d827308-DTW'), (b'alt-svc', b'h3=":443"; ma=86400')])
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
DEBUG:openai._base_client:HTTP Response: POST https://api.openai.com/v1/audio/speech "200 OK" Headers({'date': 'Sun, 28 Dec 2025 21:09:34 GMT', 'content-type': 'audio/mpeg', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-th7n7uhxazewwtohwceq5lya', 'openai-processing-ms': '446', 'openai-project': 'proj_PzQ2TBpwtHVDCFtLt40ViURv', 'openai-version': '2020-10-01', 'x-envoy-upstream-service-time': '591', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '4000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '3999989', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_48d3fcf79b9246a199896cbf5e851cc0', 'x-openai-proxy-wasm': 'v0.1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '9b540a163d827308-DTW', 'alt-svc': 'h3=":443"; ma=86400'})
DEBUG:openai._base_client:request_id: req_48d3fcf79b9246a199896cbf5e851cc0
DEBUG:httpcore.http11:receive_response_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_body.complete
DEBUG:httpcore.http11:response_closed.started
DEBUG:httpcore.http11:response_closed.complete
DEBUG:openai._base_client:Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'idempotency_key': 'stainless-python-retry-6080b1a6-91ca-4396-bc25-3bbaf03664e2', 'json_data': {'input': 'What do you need assistance with?', 'model': 'gpt-4o-mini-tts', 'voice': 'nova', 'response_format': 'mp3', 'speed': 1.0}}
DEBUG:openai._base_client:Sending HTTP Request: POST https://api.openai.com/v1/audio/speech
DEBUG:httpcore.http11:send_request_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_headers.complete
DEBUG:httpcore.http11:send_request_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_body.complete
DEBUG:httpcore.http11:receive_response_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 28 Dec 2025 21:09:36 GMT'), (b'Content-Type', b'audio/mpeg'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-th7n7uhxazewwtohwceq5lya'), (b'openai-processing-ms', b'1014'), (b'openai-project', b'proj_PzQ2TBpwtHVDCFtLt40ViURv'), (b'openai-version', b'2020-10-01'), (b'x-envoy-upstream-service-time', b'1029'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'4000000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'3999992'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'0s'), (b'x-request-id', b'req_5d28eb31bcca4263badf88539dc7b9d4'), (b'x-openai-proxy-wasm', b'v0.1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9b540a1e583b7308-DTW'), (b'alt-svc', b'h3=":443"; ma=86400')])
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
DEBUG:openai._base_client:HTTP Response: POST https://api.openai.com/v1/audio/speech "200 OK" Headers({'date': 'Sun, 28 Dec 2025 21:09:36 GMT', 'content-type': 'audio/mpeg', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-th7n7uhxazewwtohwceq5lya', 'openai-processing-ms': '1014', 'openai-project': 'proj_PzQ2TBpwtHVDCFtLt40ViURv', 'openai-version': '2020-10-01', 'x-envoy-upstream-service-time': '1029', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '4000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '3999992', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_5d28eb31bcca4263badf88539dc7b9d4', 'x-openai-proxy-wasm': 'v0.1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '9b540a1e583b7308-DTW', 'alt-svc': 'h3=":443"; ma=86400'})
DEBUG:openai._base_client:request_id: req_5d28eb31bcca4263badf88539dc7b9d4
DEBUG:httpcore.http11:receive_response_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_body.complete
DEBUG:httpcore.http11:response_closed.started
DEBUG:httpcore.http11:response_closed.complete
DEBUG:httpcore.http11:receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Sun, 28 Dec 2025 21:09:32 GMT'), (b'server', b'uvicorn'), (b'content-length', b'590'), (b'content-type', b'application/json')])
INFO:httpx:HTTP Request: POST http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages "HTTP/1.1 200 OK"
DEBUG:httpcore.http11:receive_response_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_body.complete
DEBUG:httpcore.http11:response_closed.started
DEBUG:httpcore.http11:response_closed.complete
DEBUG:letta_client._base_client:HTTP Response: POST http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages "200 OK" Headers({'date': 'Sun, 28 Dec 2025 21:09:32 GMT', 'server': 'uvicorn', 'content-length': '590', 'content-type': 'application/json'})
INFO:__mp_main__:‚úÖ Letta memory synced in 4.48s (background)
DEBUG:letta_client._base_client:HTTP Response: POST http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages "200 OK" Headers({'date': 'Sun, 28 Dec 2025 21:09:32 GMT', 'server': 'uvicorn', 'content-length': '590', 'content-type': 'application/json'})
    16:09:37.155 DEBUG  letta_client._b‚Ä¶ HTTP Response: POST {"pid": 3847,      
                                         http://localhost:82 "job_id":          
                                         83/v1/agents/agent- "AJ_jMSkF2bGXoss", 
                                         4dfca708-49a8-4982- "room_id":         
                                         8e36-0f1146f9a66e/m "RM_fb2LtQVHREBB"} 
                                         essages "200 OK"                       
                                         Headers({'date':                       
                                         'Sun, 28 Dec 2025                      
                                         21:09:32 GMT',                         
                                         'server':                              
                                         'uvicorn',                             
                                         'content-length':                      
                                         '590',                                 
                                         'content-type':                        
                                         'application/json'}                    
                                         )                                      
INFO:__mp_main__:‚úÖ Letta memory synced in 4.48s (background)
    16:09:37.156 INFO   __mp_main__      ‚úÖ Letta memory    {"pid": 3847,       
                                         synced in 4.48s    "job_id":           
                                         (background)       "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
DEBUG:livekit.agents:received user transcript
DEBUG:livekit.agents:received user transcript
    16:09:48.532 DEBUG  livekit.agents   received user      {"user_transcript": 
                                         transcript         "What time is it?", 
                                                            "language": "en",   
                                                            "transcript_delay": 
                                                            0.3367424011230469, 
                                                            "pid": 3847,        
                                                            "job_id":           
                                                            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:üé§ ========================================
INFO:__mp_main__:üé§ NEW QUERY RECEIVED
INFO:__mp_main__:üé§ User message: What time is it?
INFO:__mp_main__:üé§ ========================================
INFO:__mp_main__:üé§ Current Agent ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
INFO:__mp_main__:üé§ Current Agent Name: Agent_66
INFO:__mp_main__:üé§ Memory Loaded: True
INFO:__mp_main__:üé§ ========================================
    16:09:48.996 INFO   __mp_main__      üé§                  {"pid": 3847,      
                                         =================== "job_id":          
                                         =================== "AJ_jMSkF2bGXoss", 
                                         ==                  "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üé§ NEW QUERY RECEIVED
                 INFO   __mp_main__      üé§ NEW QUERY        {"pid": 3847,      
                                         RECEIVED            "job_id":          
                                                             "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üé§ User message: What time is it?
                 INFO   __mp_main__      üé§ User message:    {"pid": 3847,      
                                         What time is it?    "job_id":          
                                                             "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üé§ Current Agent ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
INFO:__mp_main__:‚ö° Using HYBRID mode (fast OpenAI with agent memory + background Letta)
    16:09:48.997 INFO   __mp_main__      üé§ Current Agent    {"pid": 3847,      
                                         ID:                 "job_id":          
                                         agent-4dfca708-49a8 "AJ_jMSkF2bGXoss", 
                                         -4982-8e36-0f1146f9 "room_id":         
                                         a66e                "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üé§ Current Agent Name: Agent_66
INFO:__mp_main__:‚ö° OPENAI FAST PATH - Agent ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
INFO:__mp_main__:‚úÖ Memory already loaded for agent agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
INFO:__mp_main__:‚ö° Using direct OpenAI streaming with agent memory (fast path)
INFO:__mp_main__:‚ö° Agent persona loaded: 0 chars
INFO:__mp_main__:‚ö° Memory blocks count: 0
DEBUG:__mp_main__:üìã System instructions: You are a helpful voice AI orchestrator with long-term memory.

            You coordinate multiple specialist agents to help users build software.
            You have access to:
            - Memory...
DEBUG:__mp_main__:üìã Conversation history: 8 messages (using last 10)
                 INFO   __mp_main__      üé§ Current Agent    {"pid": 3847,      
                                         Name: Agent_66      "job_id":          
                                                             "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üé§ Memory Loaded: True
                 INFO   __mp_main__      üé§ Memory Loaded:  {"pid": 3847,       
                                         True               "job_id":           
                                                            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:üé§ ========================================
                 INFO   __mp_main__      üé§                  {"pid": 3847,      
                                         =================== "job_id":          
                                         =================== "AJ_jMSkF2bGXoss", 
                                         ==                  "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚ö° Using HYBRID mode (fast OpenAI with agent memory + background Letta)
    16:09:49.010 INFO   __mp_main__      ‚ö° Using HYBRID     {"pid": 3847,      
                                         mode (fast OpenAI   "job_id":          
                                         with agent memory + "AJ_jMSkF2bGXoss", 
                                         background Letta)   "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚ö° OPENAI FAST PATH - Agent ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
    16:09:49.013 INFO   __mp_main__      ‚ö° OPENAI FAST PATH {"pid": 3847,      
                                         - Agent ID:         "job_id":          
                                         agent-4dfca708-49a8 "AJ_jMSkF2bGXoss", 
                                         -4982-8e36-0f1146f9 "room_id":         
                                         a66e                "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚úÖ Memory already loaded for agent agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
                 INFO   __mp_main__      ‚úÖ Memory already   {"pid": 3847,      
                                         loaded for agent    "job_id":          
                                         agent-4dfca708-49a8 "AJ_jMSkF2bGXoss", 
                                         -4982-8e36-0f1146f9 "room_id":         
                                         a66e                "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚ö° Using direct OpenAI streaming with agent memory (fast path)
    16:09:49.014 INFO   __mp_main__      ‚ö° Using direct    {"pid": 3847,       
                                         OpenAI streaming   "job_id":           
                                         with agent memory  "AJ_jMSkF2bGXoss",  
                                         (fast path)        "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:‚ö° Agent persona loaded: 0 chars
                 INFO   __mp_main__      ‚ö° Agent persona   {"pid": 3847,       
                                         loaded: 0 chars    "job_id":           
                                                            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:‚ö° Memory blocks count: 0
                 INFO   __mp_main__      ‚ö° Memory blocks    {"pid": 3847,      
                                         count: 0            "job_id":          
                                                             "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
DEBUG:__mp_main__:üìã System instructions: You are a helpful voice AI orchestrator with long-term memory.

            You coordinate multiple specialist agents to help users build software.
            You have access to:
            - Memory...
                 DEBUG  __mp_main__      üìã System           {"pid": 3847,      
                                         instructions: You   "job_id":          
                                         are a helpful voice "AJ_jMSkF2bGXoss", 
                                         AI orchestrator     "room_id":         
                                         with long-term      "RM_fb2LtQVHREBB"} 
                                         memory.                                
                                                                                
                                                     You                        
                                         coordinate multiple                    
                                         specialist agents                      
                                         to help users build                    
                                         software.                              
                                                     You                        
                                         have access to:                        
                                                     -                          
                                         Memory...                              
DEBUG:__mp_main__:üìã Conversation history: 8 messages (using last 10)
    16:09:49.015 DEBUG  __mp_main__      üìã Conversation     {"pid": 3847,      
                                         history: 8 messages "job_id":          
                                         (using last 10)     "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
DEBUG:httpcore.connection:connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=30.0 socket_options=None
DEBUG:httpcore.connection:connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7960782435c0>
DEBUG:httpcore.connection:start_tls.started ssl_context=<ssl.SSLContext object at 0x795fe06e1ad0> server_hostname='api.openai.com' timeout=30.0
DEBUG:httpcore.connection:start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x796078243440>
DEBUG:httpcore.http11:send_request_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_headers.complete
DEBUG:httpcore.http11:send_request_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_body.complete
DEBUG:httpcore.http11:receive_response_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 28 Dec 2025 21:09:49 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-th7n7uhxazewwtohwceq5lya'), (b'openai-processing-ms', b'165'), (b'openai-project', b'proj_PzQ2TBpwtHVDCFtLt40ViURv'), (b'openai-version', b'2020-10-01'), (b'x-envoy-upstream-service-time', b'416'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'4000000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'3999658'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'5ms'), (b'x-request-id', b'req_b318b5ceb16f4db88c22d0f59050baba'), (b'x-openai-proxy-wasm', b'v0.1'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=cC1BdJ_JKKpQAnT0LIg0dAmeJbI_HE8gsoQMEMAxA7U-1766956189-1.0.1.1-hO0xoRgg74Q6tRYdB_9OpPa9CAiDd6qioSD.J6hDSWbqh2yNgbR4arnpE3ax7K.h05bycor9EZbab3FYsjTp2SNfVP7uGqFN0q_33wx.3_8; path=/; expires=Sun, 28-Dec-25 21:39:49 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=FlnNPq8YE3nIr2TfUROah1nmtpNE_aoKNM5pdJIO1sg-1766956189252-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9b540a739b01a942-DTW'), (b'alt-svc', b'h3=":443"; ma=86400')])
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
DEBUG:httpcore.http11:receive_response_body.started request=<Request [b'POST']>
INFO:__mp_main__:‚ö° TTFT: 715ms (with agent memory)
INFO:__mp_main__:‚ö° TTFT: 715ms (with agent memory)
    16:09:49.730 INFO   __mp_main__      ‚ö° TTFT: 715ms     {"pid": 3847,       
                                         (with agent        "job_id":           
                                         memory)            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
DEBUG:httpcore.http11:response_closed.started
DEBUG:httpcore.http11:response_closed.complete
INFO:__mp_main__:‚ö° Direct OpenAI streaming complete: 1.17s (with agent knowledge)
INFO:__mp_main__:‚ö° Fast path response duration: 1.17s
INFO:__mp_main__:‚ö° Direct OpenAI streaming complete: 1.17s (with agent knowledge)
DEBUG:httpcore.http11:receive_response_body.failed exception=GeneratorExit()
    16:09:50.181 INFO   __mp_main__      ‚ö° Direct OpenAI    {"pid": 3847,      
                                         streaming complete: "job_id":          
                                         1.17s (with agent   "AJ_jMSkF2bGXoss", 
                                         knowledge)          "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚ö° Fast path response duration: 1.17s
INFO:__mp_main__:üîÑ Syncing to Letta memory (background)...
DEBUG:letta_client._base_client:Request options: {'method': 'post', 'url': '/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-718f70d3-37ab-4f6d-bba9-b0f738e8269c', 'json_data': {'messages': [{'role': 'user', 'content': 'What time is it?'}, {'role': 'assistant', 'content': "I can't provide the current time, but you can check it on your device. If you have any other questions or need assistance, feel free to ask!"}]}}
DEBUG:letta_client._base_client:Sending HTTP Request: POST http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages
    16:09:50.182 INFO   __mp_main__      ‚ö° Fast path        {"pid": 3847,      
                                         response duration:  "job_id":          
                                         1.17s               "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üîÑ Syncing to Letta memory (background)...
DEBUG:httpcore.connection:close.started
DEBUG:httpcore.connection:close.complete
INFO:__mp_main__:üîä Response: [DEBUG: Using Agent ID 46f9a66e] I can't provide the current time, but you can check it on your devi...
INFO:__mp_main__:‚úÖ Total llm_node latency: 1.20s
INFO:__mp_main__:‚úÖ RESPONSE GENERATED BY AGENT: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
DEBUG:httpcore.connection:connect_tcp.started host='localhost' port=8283 local_address=None timeout=5.0 socket_options=None
    16:09:50.187 INFO   __mp_main__      üîÑ Syncing to      {"pid": 3847,       
                                         Letta memory       "job_id":           
                                         (background)...    "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
DEBUG:letta_client._base_client:Request options: {'method': 'post', 'url': '/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-718f70d3-37ab-4f6d-bba9-b0f738e8269c', 'json_data': {'messages': [{'role': 'user', 'content': 'What time is it?'}, {'role': 'assistant', 'content': "I can't provide the current time, but you can check it on your device. If you have any other questions or need assistance, feel free to ask!"}]}}
    16:09:50.189 DEBUG  letta_client._b‚Ä¶ Request options:    {"pid": 3847,      
                                         {'method': 'post',  "job_id":          
                                         'url':              "AJ_jMSkF2bGXoss", 
                                         '/v1/agents/agent-4 "room_id":         
                                         dfca708-49a8-4982-8 "RM_fb2LtQVHREBB"} 
                                         e36-0f1146f9a66e/me                    
                                         ssages', 'files':                      
                                         None,                                  
                                         'idempotency_key':                     
                                         'stainless-python-r                    
                                         etry-718f70d3-37ab-                    
                                         4f6d-bba9-b0f738e82                    
                                         69c', 'json_data':                     
                                         {'messages':                           
                                         [{'role': 'user',                      
                                         'content': 'What                       
                                         time is it?'},                         
                                         {'role':                               
                                         'assistant',                           
                                         'content': "I can't                    
                                         provide the current                    
                                         time, but you can                      
                                         check it on your                       
                                         device. If you have                    
                                         any other questions                    
                                         or need assistance,                    
                                         feel free to                           
                                         ask!"}]}}                              
DEBUG:letta_client._base_client:Sending HTTP Request: POST http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages
DEBUG:openai._base_client:Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'idempotency_key': 'stainless-python-retry-db588abe-fb02-440a-be0a-3c2f86c7f5f7', 'json_data': {'input': "[DEBUG: Using Agent ID 46f9a66e] I can't provide the current time, but you can check it on your device.", 'model': 'gpt-4o-mini-tts', 'voice': 'nova', 'response_format': 'mp3', 'speed': 1.0}}
DEBUG:openai._base_client:Sending HTTP Request: POST https://api.openai.com/v1/audio/speech
DEBUG:httpcore.http11:send_request_headers.started request=<Request [b'POST']>
    16:09:50.190 DEBUG  letta_client._b‚Ä¶ Sending HTTP        {"pid": 3847,      
                                         Request: POST       "job_id":          
                                         http://localhost:82 "AJ_jMSkF2bGXoss", 
                                         83/v1/agents/agent- "room_id":         
                                         4dfca708-49a8-4982- "RM_fb2LtQVHREBB"} 
                                         8e36-0f1146f9a66e/m                    
                                         essages                                
INFO:__mp_main__:üîä Response: [DEBUG: Using Agent ID 46f9a66e] I can't provide the current time, but you can check it on your devi...
DEBUG:httpcore.http11:send_request_headers.complete
DEBUG:httpcore.http11:send_request_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_body.complete
DEBUG:httpcore.http11:receive_response_headers.started request=<Request [b'POST']>
    16:09:50.192 INFO   __mp_main__      üîä Response:        {"pid": 3847,      
                                         [DEBUG: Using Agent "job_id":          
                                         ID 46f9a66e] I      "AJ_jMSkF2bGXoss", 
                                         can't provide the   "room_id":         
                                         current time, but   "RM_fb2LtQVHREBB"} 
                                         you can check it on                    
                                         your devi...                           
INFO:__mp_main__:‚úÖ Total llm_node latency: 1.20s
DEBUG:httpcore.connection:connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x795fe06e5f10>
DEBUG:httpcore.http11:send_request_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_headers.complete
DEBUG:httpcore.http11:send_request_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_body.complete
DEBUG:httpcore.http11:receive_response_headers.started request=<Request [b'POST']>
    16:09:50.193 INFO   __mp_main__      ‚úÖ Total llm_node  {"pid": 3847,       
                                         latency: 1.20s     "job_id":           
                                                            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:‚úÖ RESPONSE GENERATED BY AGENT: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
                 INFO   __mp_main__      ‚úÖ RESPONSE         {"pid": 3847,      
                                         GENERATED BY AGENT: "job_id":          
                                         agent-4dfca708-49a8 "AJ_jMSkF2bGXoss", 
                                         -4982-8e36-0f1146f9 "room_id":         
                                         a66e                "RM_fb2LtQVHREBB"} 
DEBUG:httpcore.http11:receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 28 Dec 2025 21:09:50 GMT'), (b'Content-Type', b'audio/mpeg'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-th7n7uhxazewwtohwceq5lya'), (b'openai-processing-ms', b'631'), (b'openai-project', b'proj_PzQ2TBpwtHVDCFtLt40ViURv'), (b'openai-version', b'2020-10-01'), (b'x-envoy-upstream-service-time', b'644'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'4000000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'3999975'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'0s'), (b'x-request-id', b'req_8014db93c4cd48d2b79657e91b63bf64'), (b'x-openai-proxy-wasm', b'v0.1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9b540a7a3c437308-DTW'), (b'alt-svc', b'h3=":443"; ma=86400')])
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
DEBUG:openai._base_client:HTTP Response: POST https://api.openai.com/v1/audio/speech "200 OK" Headers({'date': 'Sun, 28 Dec 2025 21:09:50 GMT', 'content-type': 'audio/mpeg', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-th7n7uhxazewwtohwceq5lya', 'openai-processing-ms': '631', 'openai-project': 'proj_PzQ2TBpwtHVDCFtLt40ViURv', 'openai-version': '2020-10-01', 'x-envoy-upstream-service-time': '644', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '4000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '3999975', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_8014db93c4cd48d2b79657e91b63bf64', 'x-openai-proxy-wasm': 'v0.1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '9b540a7a3c437308-DTW', 'alt-svc': 'h3=":443"; ma=86400'})
DEBUG:openai._base_client:request_id: req_8014db93c4cd48d2b79657e91b63bf64
DEBUG:httpcore.http11:receive_response_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_body.complete
DEBUG:httpcore.http11:response_closed.started
DEBUG:httpcore.http11:response_closed.complete
DEBUG:openai._base_client:Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'idempotency_key': 'stainless-python-retry-16814773-fac4-49bb-b07c-724c54f98c48', 'json_data': {'input': 'If you have any other questions or need assistance, feel free to ask!', 'model': 'gpt-4o-mini-tts', 'voice': 'nova', 'response_format': 'mp3', 'speed': 1.0}}
DEBUG:openai._base_client:Sending HTTP Request: POST https://api.openai.com/v1/audio/speech
DEBUG:httpcore.http11:send_request_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_headers.complete
DEBUG:httpcore.http11:send_request_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_body.complete
DEBUG:httpcore.http11:receive_response_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 28 Dec 2025 21:09:52 GMT'), (b'Content-Type', b'audio/mpeg'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-th7n7uhxazewwtohwceq5lya'), (b'openai-processing-ms', b'744'), (b'openai-project', b'proj_PzQ2TBpwtHVDCFtLt40ViURv'), (b'openai-version', b'2020-10-01'), (b'x-envoy-upstream-service-time', b'761'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'4000000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'3999983'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'0s'), (b'x-request-id', b'req_399943be53e943d6baa9bccb81b71566'), (b'x-openai-proxy-wasm', b'v0.1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9b540a84e9427308-DTW'), (b'alt-svc', b'h3=":443"; ma=86400')])
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
DEBUG:openai._base_client:HTTP Response: POST https://api.openai.com/v1/audio/speech "200 OK" Headers({'date': 'Sun, 28 Dec 2025 21:09:52 GMT', 'content-type': 'audio/mpeg', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-th7n7uhxazewwtohwceq5lya', 'openai-processing-ms': '744', 'openai-project': 'proj_PzQ2TBpwtHVDCFtLt40ViURv', 'openai-version': '2020-10-01', 'x-envoy-upstream-service-time': '761', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '4000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '3999983', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_399943be53e943d6baa9bccb81b71566', 'x-openai-proxy-wasm': 'v0.1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '9b540a84e9427308-DTW', 'alt-svc': 'h3=":443"; ma=86400'})
DEBUG:openai._base_client:request_id: req_399943be53e943d6baa9bccb81b71566
DEBUG:httpcore.http11:receive_response_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_body.complete
DEBUG:httpcore.http11:response_closed.started
DEBUG:httpcore.http11:response_closed.complete
DEBUG:httpcore.http11:receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Sun, 28 Dec 2025 21:09:49 GMT'), (b'server', b'uvicorn'), (b'content-length', b'765'), (b'content-type', b'application/json')])
INFO:httpx:HTTP Request: POST http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages "HTTP/1.1 200 OK"
DEBUG:httpcore.http11:receive_response_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_body.complete
DEBUG:httpcore.http11:response_closed.started
DEBUG:httpcore.http11:response_closed.complete
DEBUG:letta_client._base_client:HTTP Response: POST http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages "200 OK" Headers({'date': 'Sun, 28 Dec 2025 21:09:49 GMT', 'server': 'uvicorn', 'content-length': '765', 'content-type': 'application/json'})
INFO:__mp_main__:‚úÖ Letta memory synced in 10.68s (background)
INFO:__mp_main__:üîÑ Reloading agent memory to pick up recent changes...
INFO:__mp_main__:üß† LOADING MEMORY - Agent ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
DEBUG:letta_client._base_client:HTTP Response: POST http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages "200 OK" Headers({'date': 'Sun, 28 Dec 2025 21:09:49 GMT', 'server': 'uvicorn', 'content-length': '765', 'content-type': 'application/json'})
INFO:__mp_main__:üß† LOADING MEMORY - Agent Name: Agent_66
INFO:__mp_main__:üß† Retrieving agent details from Letta for ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
DEBUG:letta_client._base_client:Request options: {'method': 'get', 'url': '/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e', 'params': {}}
DEBUG:letta_client._base_client:Sending HTTP Request: GET http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
DEBUG:httpcore.http11:send_request_headers.started request=<Request [b'GET']>
DEBUG:httpcore.http11:send_request_headers.complete
DEBUG:httpcore.http11:send_request_body.started request=<Request [b'GET']>
DEBUG:httpcore.http11:send_request_body.complete
DEBUG:httpcore.http11:receive_response_headers.started request=<Request [b'GET']>
    16:10:00.863 DEBUG  letta_client._b‚Ä¶ HTTP Response: POST {"pid": 3847,      
                                         http://localhost:82 "job_id":          
                                         83/v1/agents/agent- "AJ_jMSkF2bGXoss", 
                                         4dfca708-49a8-4982- "room_id":         
                                         8e36-0f1146f9a66e/m "RM_fb2LtQVHREBB"} 
                                         essages "200 OK"                       
                                         Headers({'date':                       
                                         'Sun, 28 Dec 2025                      
                                         21:09:49 GMT',                         
                                         'server':                              
                                         'uvicorn',                             
                                         'content-length':                      
                                         '765',                                 
                                         'content-type':                        
                                         'application/json'}                    
                                         )                                      
INFO:__mp_main__:‚úÖ Letta memory synced in 10.68s (background)
    16:10:00.864 INFO   __mp_main__      ‚úÖ Letta memory     {"pid": 3847,      
                                         synced in 10.68s    "job_id":          
                                         (background)        "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üîÑ Reloading agent memory to pick up recent changes...
    16:10:00.865 INFO   __mp_main__      üîÑ Reloading agent {"pid": 3847,       
                                         memory to pick up  "job_id":           
                                         recent changes...  "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:üß† LOADING MEMORY - Agent ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
                 INFO   __mp_main__      üß† LOADING MEMORY - {"pid": 3847,      
                                         Agent ID:           "job_id":          
                                         agent-4dfca708-49a8 "AJ_jMSkF2bGXoss", 
                                         -4982-8e36-0f1146f9 "room_id":         
                                         a66e                "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üß† LOADING MEMORY - Agent Name: Agent_66
                 INFO   __mp_main__      üß† LOADING MEMORY  {"pid": 3847,       
                                         - Agent Name:      "job_id":           
                                         Agent_66           "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:üß† Retrieving agent details from Letta for ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
                 INFO   __mp_main__      üß† Retrieving agent {"pid": 3847,      
                                         details from Letta  "job_id":          
                                         for ID:             "AJ_jMSkF2bGXoss", 
                                         agent-4dfca708-49a8 "room_id":         
                                         -4982-8e36-0f1146f9 "RM_fb2LtQVHREBB"} 
                                         a66e                                   
DEBUG:letta_client._base_client:Request options: {'method': 'get', 'url': '/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e', 'params': {}}
    16:10:00.866 DEBUG  letta_client._b‚Ä¶ Request options:    {"pid": 3847,      
                                         {'method': 'get',   "job_id":          
                                         'url':              "AJ_jMSkF2bGXoss", 
                                         '/v1/agents/agent-4 "room_id":         
                                         dfca708-49a8-4982-8 "RM_fb2LtQVHREBB"} 
                                         e36-0f1146f9a66e',                     
                                         'params': {}}                          
DEBUG:letta_client._base_client:Sending HTTP Request: GET http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
    16:10:00.867 DEBUG  letta_client._b‚Ä¶ Sending HTTP        {"pid": 3847,      
                                         Request: GET        "job_id":          
                                         http://localhost:82 "AJ_jMSkF2bGXoss", 
                                         83/v1/agents/agent- "room_id":         
                                         4dfca708-49a8-4982- "RM_fb2LtQVHREBB"} 
                                         8e36-0f1146f9a66e                      
DEBUG:httpcore.http11:receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Sun, 28 Dec 2025 21:10:00 GMT'), (b'server', b'uvicorn'), (b'content-length', b'22201'), (b'content-type', b'application/json')])
INFO:httpx:HTTP Request: GET http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e "HTTP/1.1 200 OK"
DEBUG:httpcore.http11:receive_response_body.started request=<Request [b'GET']>
DEBUG:httpcore.http11:receive_response_body.complete
DEBUG:httpcore.http11:response_closed.started
DEBUG:httpcore.http11:response_closed.complete
DEBUG:letta_client._base_client:HTTP Response: GET http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e "200 OK" Headers({'date': 'Sun, 28 Dec 2025 21:10:00 GMT', 'server': 'uvicorn', 'content-length': '22201', 'content-type': 'application/json'})
INFO:__mp_main__:üß† Retrieved agent: Agent_66 (ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e)
DEBUG:letta_client._base_client:HTTP Response: GET http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e "200 OK" Headers({'date': 'Sun, 28 Dec 2025 21:10:00 GMT', 'server': 'uvicorn', 'content-length': '22201', 'content-type': 'application/json'})
INFO:__mp_main__:‚úÖ Memory loaded successfully in 0.15s
ERROR:__mp_main__:‚ùå Failed to load agent memory: object of type 'NoneType' has no len()
    16:10:01.017 DEBUG  letta_client._b‚Ä¶ HTTP Response: GET  {"pid": 3847,      
                                         http://localhost:82 "job_id":          
                                         83/v1/agents/agent- "AJ_jMSkF2bGXoss", 
                                         4dfca708-49a8-4982- "room_id":         
                                         8e36-0f1146f9a66e   "RM_fb2LtQVHREBB"} 
                                         "200 OK"                               
                                         Headers({'date':                       
                                         'Sun, 28 Dec 2025                      
                                         21:10:00 GMT',                         
                                         'server':                              
                                         'uvicorn',                             
                                         'content-length':                      
                                         '22201',                               
                                         'content-type':                        
                                         'application/json'}                    
                                         )                                      
INFO:__mp_main__:üß† Retrieved agent: Agent_66 (ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e)
    16:10:01.019 INFO   __mp_main__      üß† Retrieved agent: {"pid": 3847,      
                                         Agent_66 (ID:       "job_id":          
                                         agent-4dfca708-49a8 "AJ_jMSkF2bGXoss", 
                                         -4982-8e36-0f1146f9 "room_id":         
                                         a66e)               "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚úÖ Memory loaded successfully in 0.15s
                 INFO   __mp_main__      ‚úÖ Memory loaded   {"pid": 3847,       
                                         successfully in    "job_id":           
                                         0.15s              "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
ERROR:__mp_main__:‚ùå Failed to load agent memory: object of type 'NoneType' has no len()
    16:10:01.020 ERROR  __mp_main__      ‚ùå Failed to load  {"pid": 3847,       
                                         agent memory:      "job_id":           
                                         object of type     "AJ_jMSkF2bGXoss",  
                                         'NoneType' has no  "room_id":          
                                         len()              "RM_fb2LtQVHREBB"}  
DEBUG:livekit.agents:received user transcript
DEBUG:livekit.agents:received user transcript
    16:10:20.531 DEBUG  livekit.agents   received user      {"user_transcript": 
                                         transcript         "Put it in the      
                                                            eastern time zone.",
                                                            "language": "en",   
                                                            "transcript_delay": 
                                                            0.33373355865478516,
                                                            "pid": 3847,        
                                                            "job_id":           
                                                            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:üé§ ========================================
INFO:__mp_main__:üé§ NEW QUERY RECEIVED
INFO:__mp_main__:üé§ User message: Put it in the eastern time zone.
INFO:__mp_main__:üé§ ========================================
INFO:__mp_main__:üé§ Current Agent ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
INFO:__mp_main__:üé§ Current Agent Name: Agent_66
INFO:__mp_main__:üé§ Memory Loaded: True
INFO:__mp_main__:üé§ ========================================
    16:10:20.996 INFO   __mp_main__      üé§                  {"pid": 3847,      
                                         =================== "job_id":          
                                         =================== "AJ_jMSkF2bGXoss", 
                                         ==                  "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üé§ NEW QUERY RECEIVED
                 INFO   __mp_main__      üé§ NEW QUERY        {"pid": 3847,      
                                         RECEIVED            "job_id":          
                                                             "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üé§ User message: Put it in the eastern time zone.
                 INFO   __mp_main__      üé§ User message:    {"pid": 3847,      
                                         Put it in the       "job_id":          
                                         eastern time zone.  "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üé§ Current Agent ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
INFO:__mp_main__:‚ö° Using HYBRID mode (fast OpenAI with agent memory + background Letta)
                 INFO   __mp_main__      üé§ Current Agent    {"pid": 3847,      
                                         ID:                 "job_id":          
                                         agent-4dfca708-49a8 "AJ_jMSkF2bGXoss", 
                                         -4982-8e36-0f1146f9 "room_id":         
                                         a66e                "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚ö° OPENAI FAST PATH - Agent ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
INFO:__mp_main__:üé§ Current Agent Name: Agent_66
INFO:__mp_main__:‚úÖ Memory already loaded for agent agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
    16:10:20.997 INFO   __mp_main__      üé§ Current Agent    {"pid": 3847,      
                                         Name: Agent_66      "job_id":          
                                                             "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üé§ Memory Loaded: True
INFO:__mp_main__:‚ö° Using direct OpenAI streaming with agent memory (fast path)
INFO:__mp_main__:‚ö° Agent persona loaded: 0 chars
INFO:__mp_main__:‚ö° Memory blocks count: 0
DEBUG:__mp_main__:üìã System instructions: You are a helpful voice AI orchestrator with long-term memory.

            You coordinate multiple specialist agents to help users build software.
            You have access to:
            - Memory...
                 INFO   __mp_main__      üé§ Memory Loaded:  {"pid": 3847,       
                                         True               "job_id":           
                                                            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
DEBUG:__mp_main__:üìã Conversation history: 10 messages (using last 10)
INFO:__mp_main__:üé§ ========================================
                 INFO   __mp_main__      üé§                  {"pid": 3847,      
                                         =================== "job_id":          
                                         =================== "AJ_jMSkF2bGXoss", 
                                         ==                  "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚ö° Using HYBRID mode (fast OpenAI with agent memory + background Letta)
    16:10:21.007 INFO   __mp_main__      ‚ö° Using HYBRID     {"pid": 3847,      
                                         mode (fast OpenAI   "job_id":          
                                         with agent memory + "AJ_jMSkF2bGXoss", 
                                         background Letta)   "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚ö° OPENAI FAST PATH - Agent ID: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
    16:10:21.009 INFO   __mp_main__      ‚ö° OPENAI FAST PATH {"pid": 3847,      
                                         - Agent ID:         "job_id":          
                                         agent-4dfca708-49a8 "AJ_jMSkF2bGXoss", 
                                         -4982-8e36-0f1146f9 "room_id":         
                                         a66e                "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚úÖ Memory already loaded for agent agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
    16:10:21.010 INFO   __mp_main__      ‚úÖ Memory already   {"pid": 3847,      
                                         loaded for agent    "job_id":          
                                         agent-4dfca708-49a8 "AJ_jMSkF2bGXoss", 
                                         -4982-8e36-0f1146f9 "room_id":         
                                         a66e                "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚ö° Using direct OpenAI streaming with agent memory (fast path)
    16:10:21.013 INFO   __mp_main__      ‚ö° Using direct    {"pid": 3847,       
                                         OpenAI streaming   "job_id":           
                                         with agent memory  "AJ_jMSkF2bGXoss",  
                                         (fast path)        "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:‚ö° Agent persona loaded: 0 chars
    16:10:21.014 INFO   __mp_main__      ‚ö° Agent persona   {"pid": 3847,       
                                         loaded: 0 chars    "job_id":           
                                                            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:‚ö° Memory blocks count: 0
                 INFO   __mp_main__      ‚ö° Memory blocks    {"pid": 3847,      
                                         count: 0            "job_id":          
                                                             "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
DEBUG:__mp_main__:üìã System instructions: You are a helpful voice AI orchestrator with long-term memory.

            You coordinate multiple specialist agents to help users build software.
            You have access to:
            - Memory...
    16:10:21.015 DEBUG  __mp_main__      üìã System           {"pid": 3847,      
                                         instructions: You   "job_id":          
                                         are a helpful voice "AJ_jMSkF2bGXoss", 
                                         AI orchestrator     "room_id":         
                                         with long-term      "RM_fb2LtQVHREBB"} 
                                         memory.                                
                                                                                
                                                     You                        
                                         coordinate multiple                    
                                         specialist agents                      
                                         to help users build                    
                                         software.                              
                                                     You                        
                                         have access to:                        
                                                     -                          
                                         Memory...                              
DEBUG:__mp_main__:üìã Conversation history: 10 messages (using last 10)
                 DEBUG  __mp_main__      üìã Conversation    {"pid": 3847,       
                                         history: 10        "job_id":           
                                         messages (using    "AJ_jMSkF2bGXoss",  
                                         last 10)           "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
DEBUG:httpcore.connection:connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=30.0 socket_options=None
DEBUG:httpcore.connection:connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x796018039ac0>
DEBUG:httpcore.connection:start_tls.started ssl_context=<ssl.SSLContext object at 0x795fe06be8d0> server_hostname='api.openai.com' timeout=30.0
DEBUG:httpcore.connection:start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x796078240140>
DEBUG:httpcore.http11:send_request_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_headers.complete
DEBUG:httpcore.http11:send_request_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_body.complete
DEBUG:httpcore.http11:receive_response_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 28 Dec 2025 21:10:21 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-th7n7uhxazewwtohwceq5lya'), (b'openai-processing-ms', b'152'), (b'openai-project', b'proj_PzQ2TBpwtHVDCFtLt40ViURv'), (b'openai-version', b'2020-10-01'), (b'x-envoy-upstream-service-time', b'399'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'4000000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'3999613'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'5ms'), (b'x-request-id', b'req_b188fa4cdbb446f5abb43b6874a3c296'), (b'x-openai-proxy-wasm', b'v0.1'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=G4Nq2tpGECQy20hFFWwIMqokiXgvBohuy5ZnYVoy.pU-1766956221-1.0.1.1-1NfY_JJaWp02dhF.7SlH5jGwAf1omS51IPLtbV0wmLUjLnzU9LA9NTcCUsaLaqvWxFNNZ8S_xKDgmsISNEXm5r1GhxgsQ7c5rONUh2nJgiA; path=/; expires=Sun, 28-Dec-25 21:40:21 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=MiMR26uNSnJSJGIqpBEa.BNd.CSqPSpzzZJWE7OGyvI-1766956221173-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9b540b3b8c58e0b3-DTW'), (b'alt-svc', b'h3=":443"; ma=86400')])
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
DEBUG:httpcore.http11:receive_response_body.started request=<Request [b'POST']>
INFO:__mp_main__:‚ö° TTFT: 628ms (with agent memory)
INFO:__mp_main__:‚ö° TTFT: 628ms (with agent memory)
    16:10:21.643 INFO   __mp_main__      ‚ö° TTFT: 628ms     {"pid": 3847,       
                                         (with agent        "job_id":           
                                         memory)            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
DEBUG:httpcore.http11:response_closed.started
DEBUG:httpcore.http11:response_closed.complete
INFO:__mp_main__:‚ö° Direct OpenAI streaming complete: 1.24s (with agent knowledge)
INFO:__mp_main__:‚ö° Fast path response duration: 1.25s
INFO:__mp_main__:‚ö° Direct OpenAI streaming complete: 1.24s (with agent knowledge)
DEBUG:httpcore.http11:receive_response_body.failed exception=GeneratorExit()
INFO:__mp_main__:üîÑ Syncing to Letta memory (background)...
DEBUG:letta_client._base_client:Request options: {'method': 'post', 'url': '/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-534ea2c1-382e-43df-815a-107a3f93e540', 'json_data': {'messages': [{'role': 'user', 'content': 'Put it in the eastern time zone.'}, {'role': 'assistant', 'content': "I still can't check the current time, but you can easily convert it to Eastern Time by adjusting your local time accordingly. If there's anything else you'd like help with, just let me know!"}]}}
    16:10:22.255 INFO   __mp_main__      ‚ö° Direct OpenAI    {"pid": 3847,      
                                         streaming complete: "job_id":          
                                         1.24s (with agent   "AJ_jMSkF2bGXoss", 
                                         knowledge)          "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚ö° Fast path response duration: 1.25s
DEBUG:letta_client._base_client:Sending HTTP Request: POST http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages
DEBUG:httpcore.connection:close.started
DEBUG:httpcore.connection:close.complete
INFO:__mp_main__:üîä Response: [DEBUG: Using Agent ID 46f9a66e] I still can't check the current time, but you can easily convert it...
INFO:__mp_main__:‚úÖ Total llm_node latency: 1.27s
INFO:__mp_main__:‚úÖ RESPONSE GENERATED BY AGENT: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
DEBUG:httpcore.connection:connect_tcp.started host='localhost' port=8283 local_address=None timeout=5.0 socket_options=None
                 INFO   __mp_main__      ‚ö° Fast path        {"pid": 3847,      
                                         response duration:  "job_id":          
                                         1.25s               "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üîÑ Syncing to Letta memory (background)...
    16:10:22.260 INFO   __mp_main__      üîÑ Syncing to      {"pid": 3847,       
                                         Letta memory       "job_id":           
                                         (background)...    "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
DEBUG:letta_client._base_client:Request options: {'method': 'post', 'url': '/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages', 'files': None, 'idempotency_key': 'stainless-python-retry-534ea2c1-382e-43df-815a-107a3f93e540', 'json_data': {'messages': [{'role': 'user', 'content': 'Put it in the eastern time zone.'}, {'role': 'assistant', 'content': "I still can't check the current time, but you can easily convert it to Eastern Time by adjusting your local time accordingly. If there's anything else you'd like help with, just let me know!"}]}}
DEBUG:openai._base_client:Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'idempotency_key': 'stainless-python-retry-93695501-83a1-40bf-9260-9be979c869b5', 'json_data': {'input': "[DEBUG: Using Agent ID 46f9a66e] I still can't check the current time, but you can easily convert it to Eastern Time by adjusting your local time accordingly.", 'model': 'gpt-4o-mini-tts', 'voice': 'nova', 'response_format': 'mp3', 'speed': 1.0}}
DEBUG:openai._base_client:Sending HTTP Request: POST https://api.openai.com/v1/audio/speech
DEBUG:httpcore.http11:send_request_headers.started request=<Request [b'POST']>
    16:10:22.262 DEBUG  letta_client._b‚Ä¶ Request options:    {"pid": 3847,      
                                         {'method': 'post',  "job_id":          
                                         'url':              "AJ_jMSkF2bGXoss", 
                                         '/v1/agents/agent-4 "room_id":         
                                         dfca708-49a8-4982-8 "RM_fb2LtQVHREBB"} 
                                         e36-0f1146f9a66e/me                    
                                         ssages', 'files':                      
                                         None,                                  
                                         'idempotency_key':                     
                                         'stainless-python-r                    
                                         etry-534ea2c1-382e-                    
                                         43df-815a-107a3f93e                    
                                         540', 'json_data':                     
                                         {'messages':                           
                                         [{'role': 'user',                      
                                         'content': 'Put it                     
                                         in the eastern time                    
                                         zone.'}, {'role':                      
                                         'assistant',                           
                                         'content': "I still                    
                                         can't check the                        
                                         current time, but                      
                                         you can easily                         
                                         convert it to                          
                                         Eastern Time by                        
                                         adjusting your                         
                                         local time                             
                                         accordingly. If                        
                                         there's anything                       
                                         else you'd like                        
                                         help with, just let                    
                                         me know!"}]}}                          
DEBUG:letta_client._base_client:Sending HTTP Request: POST http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages
DEBUG:httpcore.http11:send_request_headers.complete
DEBUG:httpcore.http11:send_request_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_body.complete
DEBUG:httpcore.http11:receive_response_headers.started request=<Request [b'POST']>
DEBUG:httpcore.connection:connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x796078243470>
DEBUG:httpcore.http11:send_request_headers.started request=<Request [b'POST']>
    16:10:22.264 DEBUG  letta_client._b‚Ä¶ Sending HTTP        {"pid": 3847,      
                                         Request: POST       "job_id":          
                                         http://localhost:82 "AJ_jMSkF2bGXoss", 
                                         83/v1/agents/agent- "room_id":         
                                         4dfca708-49a8-4982- "RM_fb2LtQVHREBB"} 
                                         8e36-0f1146f9a66e/m                    
                                         essages                                
DEBUG:httpcore.http11:send_request_headers.complete
INFO:__mp_main__:üîä Response: [DEBUG: Using Agent ID 46f9a66e] I still can't check the current time, but you can easily convert it...
DEBUG:httpcore.http11:send_request_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_body.complete
DEBUG:httpcore.http11:receive_response_headers.started request=<Request [b'POST']>
    16:10:22.267 INFO   __mp_main__      üîä Response:        {"pid": 3847,      
                                         [DEBUG: Using Agent "job_id":          
                                         ID 46f9a66e] I      "AJ_jMSkF2bGXoss", 
                                         still can't check   "room_id":         
                                         the current time,   "RM_fb2LtQVHREBB"} 
                                         but you can easily                     
                                         convert it...                          
INFO:__mp_main__:‚úÖ Total llm_node latency: 1.27s
                 INFO   __mp_main__      ‚úÖ Total llm_node  {"pid": 3847,       
                                         latency: 1.27s     "job_id":           
                                                            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:‚úÖ RESPONSE GENERATED BY AGENT: agent-4dfca708-49a8-4982-8e36-0f1146f9a66e
    16:10:22.268 INFO   __mp_main__      ‚úÖ RESPONSE         {"pid": 3847,      
                                         GENERATED BY AGENT: "job_id":          
                                         agent-4dfca708-49a8 "AJ_jMSkF2bGXoss", 
                                         -4982-8e36-0f1146f9 "room_id":         
                                         a66e                "RM_fb2LtQVHREBB"} 
DEBUG:httpcore.http11:receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 28 Dec 2025 21:10:23 GMT'), (b'Content-Type', b'audio/mpeg'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-th7n7uhxazewwtohwceq5lya'), (b'openai-processing-ms', b'627'), (b'openai-project', b'proj_PzQ2TBpwtHVDCFtLt40ViURv'), (b'openai-version', b'2020-10-01'), (b'x-envoy-upstream-service-time', b'853'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'4000000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'3999961'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'0s'), (b'x-request-id', b'req_125aaee4dbc9412c903370f29906a352'), (b'x-openai-proxy-wasm', b'v0.1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9b540b42ab377308-DTW'), (b'alt-svc', b'h3=":443"; ma=86400')])
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
DEBUG:openai._base_client:HTTP Response: POST https://api.openai.com/v1/audio/speech "200 OK" Headers({'date': 'Sun, 28 Dec 2025 21:10:23 GMT', 'content-type': 'audio/mpeg', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-th7n7uhxazewwtohwceq5lya', 'openai-processing-ms': '627', 'openai-project': 'proj_PzQ2TBpwtHVDCFtLt40ViURv', 'openai-version': '2020-10-01', 'x-envoy-upstream-service-time': '853', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '4000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '3999961', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_125aaee4dbc9412c903370f29906a352', 'x-openai-proxy-wasm': 'v0.1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '9b540b42ab377308-DTW', 'alt-svc': 'h3=":443"; ma=86400'})
DEBUG:openai._base_client:request_id: req_125aaee4dbc9412c903370f29906a352
DEBUG:httpcore.http11:receive_response_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_body.complete
DEBUG:httpcore.http11:response_closed.started
DEBUG:httpcore.http11:response_closed.complete
DEBUG:openai._base_client:Request options: {'method': 'post', 'url': '/audio/speech', 'headers': {'Accept': 'application/octet-stream', 'X-Stainless-Raw-Response': 'stream'}, 'timeout': Timeout(connect=10.0, read=30, write=30, pool=30), 'files': None, 'idempotency_key': 'stainless-python-retry-157eca5e-312b-4fdb-b877-dd062d47916e', 'json_data': {'input': "If there's anything else you'd like help with, just let me know!", 'model': 'gpt-4o-mini-tts', 'voice': 'nova', 'response_format': 'mp3', 'speed': 1.0}}
DEBUG:openai._base_client:Sending HTTP Request: POST https://api.openai.com/v1/audio/speech
DEBUG:httpcore.http11:send_request_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_headers.complete
DEBUG:httpcore.http11:send_request_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:send_request_body.complete
DEBUG:httpcore.http11:receive_response_headers.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Sun, 28 Dec 2025 21:10:25 GMT'), (b'Content-Type', b'audio/mpeg'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-th7n7uhxazewwtohwceq5lya'), (b'openai-processing-ms', b'873'), (b'openai-project', b'proj_PzQ2TBpwtHVDCFtLt40ViURv'), (b'openai-version', b'2020-10-01'), (b'x-envoy-upstream-service-time', b'889'), (b'x-ratelimit-limit-requests', b'5000'), (b'x-ratelimit-limit-tokens', b'4000000'), (b'x-ratelimit-remaining-requests', b'4999'), (b'x-ratelimit-remaining-tokens', b'3999984'), (b'x-ratelimit-reset-requests', b'12ms'), (b'x-ratelimit-reset-tokens', b'0s'), (b'x-request-id', b'req_1af1754e797c414b88e5fc84c02ceb6f'), (b'x-openai-proxy-wasm', b'v0.1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9b540b54ecc17308-DTW'), (b'alt-svc', b'h3=":443"; ma=86400')])
INFO:httpx:HTTP Request: POST https://api.openai.com/v1/audio/speech "HTTP/1.1 200 OK"
DEBUG:openai._base_client:HTTP Response: POST https://api.openai.com/v1/audio/speech "200 OK" Headers({'date': 'Sun, 28 Dec 2025 21:10:25 GMT', 'content-type': 'audio/mpeg', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'user-th7n7uhxazewwtohwceq5lya', 'openai-processing-ms': '873', 'openai-project': 'proj_PzQ2TBpwtHVDCFtLt40ViURv', 'openai-version': '2020-10-01', 'x-envoy-upstream-service-time': '889', 'x-ratelimit-limit-requests': '5000', 'x-ratelimit-limit-tokens': '4000000', 'x-ratelimit-remaining-requests': '4999', 'x-ratelimit-remaining-tokens': '3999984', 'x-ratelimit-reset-requests': '12ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_1af1754e797c414b88e5fc84c02ceb6f', 'x-openai-proxy-wasm': 'v0.1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '9b540b54ecc17308-DTW', 'alt-svc': 'h3=":443"; ma=86400'})
DEBUG:openai._base_client:request_id: req_1af1754e797c414b88e5fc84c02ceb6f
DEBUG:httpcore.http11:receive_response_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_body.complete
DEBUG:httpcore.http11:response_closed.started
DEBUG:httpcore.http11:response_closed.complete
DEBUG:httpcore.http11:receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Sun, 28 Dec 2025 21:10:21 GMT'), (b'server', b'uvicorn'), (b'content-length', b'724'), (b'content-type', b'application/json')])
INFO:httpx:HTTP Request: POST http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages "HTTP/1.1 200 OK"
DEBUG:httpcore.http11:receive_response_body.started request=<Request [b'POST']>
DEBUG:httpcore.http11:receive_response_body.complete
DEBUG:httpcore.http11:response_closed.started
DEBUG:httpcore.http11:response_closed.complete
DEBUG:letta_client._base_client:HTTP Response: POST http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages "200 OK" Headers({'date': 'Sun, 28 Dec 2025 21:10:21 GMT', 'server': 'uvicorn', 'content-length': '724', 'content-type': 'application/json'})
INFO:__mp_main__:‚úÖ Letta memory synced in 6.10s (background)
DEBUG:letta_client._base_client:HTTP Response: POST http://localhost:8283/v1/agents/agent-4dfca708-49a8-4982-8e36-0f1146f9a66e/messages "200 OK" Headers({'date': 'Sun, 28 Dec 2025 21:10:21 GMT', 'server': 'uvicorn', 'content-length': '724', 'content-type': 'application/json'})
    16:10:28.355 DEBUG  letta_client._b‚Ä¶ HTTP Response: POST {"pid": 3847,      
                                         http://localhost:82 "job_id":          
                                         83/v1/agents/agent- "AJ_jMSkF2bGXoss", 
                                         4dfca708-49a8-4982- "room_id":         
                                         8e36-0f1146f9a66e/m "RM_fb2LtQVHREBB"} 
                                         essages "200 OK"                       
                                         Headers({'date':                       
                                         'Sun, 28 Dec 2025                      
                                         21:10:21 GMT',                         
                                         'server':                              
                                         'uvicorn',                             
                                         'content-length':                      
                                         '724',                                 
                                         'content-type':                        
                                         'application/json'}                    
                                         )                                      
INFO:__mp_main__:‚úÖ Letta memory synced in 6.10s (background)
    16:10:28.357 INFO   __mp_main__      ‚úÖ Letta memory    {"pid": 3847,       
                                         synced in 6.10s    "job_id":           
                                         (background)       "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:üì® ========================================
INFO:__mp_main__:üì® DATA RECEIVED FROM CLIENT
INFO:__mp_main__:üì® Raw data: {"type":"room_cleanup","timestamp":"2025-12-28T21:10:50.243Z"}
INFO:__mp_main__:üì® ========================================
INFO:__mp_main__:üì® ========================================
INFO:__mp_main__:üì® Message type: room_cleanup
INFO:__mp_main__:üßπ Room cleanup requested - preparing to exit room
INFO:__mp_main__:‚è≥ Initiating graceful shutdown...
    16:10:50.246 INFO   __mp_main__      üì®                  {"pid": 3847,      
                                         =================== "job_id":          
                                         =================== "AJ_jMSkF2bGXoss", 
                                         ==                  "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üì® DATA RECEIVED FROM CLIENT
DEBUG:livekit.agents:stream closed
    16:10:50.247 INFO   __mp_main__      üì® DATA RECEIVED   {"pid": 3847,       
                                         FROM CLIENT        "job_id":           
                                                            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:üì® Raw data: {"type":"room_cleanup","timestamp":"2025-12-28T21:10:50.243Z"}
DEBUG:livekit.agents:input stream detached
                 INFO   __mp_main__      üì® Raw data:        {"pid": 3847,      
                                         {"type":"room_clean "job_id":          
                                         up","timestamp":"20 "AJ_jMSkF2bGXoss", 
                                         25-12-28T21:10:50.2 "room_id":         
                                         43Z"}               "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üì® ========================================
DEBUG:livekit:tungstenite::protocol:666:tungstenite::protocol - Received close frame: None
                 INFO   __mp_main__      üì®                  {"pid": 3847,      
                                         =================== "job_id":          
                                         =================== "AJ_jMSkF2bGXoss", 
                                         ==                  "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:‚úÖ Graceful shutdown complete
INFO:__mp_main__:üì® Message type: room_cleanup
    16:10:50.248 INFO   __mp_main__      üì® Message type:    {"pid": 3847,      
                                         room_cleanup        "job_id":          
                                                             "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:__mp_main__:üßπ Room cleanup requested - preparing to exit room
DEBUG:livekit.agents:session closed
                 INFO   __mp_main__      üßπ Room cleanup    {"pid": 3847,       
                                         requested -        "job_id":           
                                         preparing to exit  "AJ_jMSkF2bGXoss",  
                                         room               "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:__mp_main__:‚è≥ Initiating graceful shutdown...
INFO:livekit:livekit::room:1400:livekit::room - disconnected from room with reason: ClientInitiated
    16:10:50.249 INFO   __mp_main__      ‚è≥ Initiating      {"pid": 3847,       
                                         graceful           "job_id":           
                                         shutdown...        "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
DEBUG:livekit.agents:stream closed
    16:10:50.254 DEBUG  livekit.agents   stream closed {"participant": "user1", 
                                                       "source":                
                                                       "SOURCE_MICROPHONE",     
                                                       "pid": 3847, "job_id":   
                                                       "AJ_jMSkF2bGXoss",       
                                                       "room_id":               
                                                       "RM_fb2LtQVHREBB"}       
DEBUG:livekit.agents:shutting down job task
DEBUG:livekit.agents:input stream detached
DEBUG:livekit.agents:http_session(): closing the httpclient ctx
    16:10:50.274 DEBUG  livekit.agents   input stream        {"participant":    
                                         detached            "user1", "source": 
                                                             "SOURCE_MICROPHONE‚Ä¶
                                                             "accepted_sources":
                                                             ["SOURCE_MICROPHON‚Ä¶
                                                             "pid": 3847,       
                                                             "job_id":          
                                                             "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
INFO:livekit.agents:process exiting
    16:10:50.307 INFO   livekit.agents   process exiting {"reason": "", "pid":  
                                                         3847, "job_id":        
                                                         "AJ_jMSkF2bGXoss",     
                                                         "room_id":             
                                                         "RM_fb2LtQVHREBB"}     
INFO:__mp_main__:‚úÖ Graceful shutdown complete
    16:10:50.282 INFO   __mp_main__      ‚úÖ Graceful         {"pid": 3847,      
                                         shutdown complete   "job_id":          
                                                             "AJ_jMSkF2bGXoss", 
                                                             "room_id":         
                                                             "RM_fb2LtQVHREBB"} 
DEBUG:livekit.agents:session closed
    16:10:50.295 DEBUG  livekit.agents   session closed {"reason":              
                                                        "user_initiated",       
                                                        "error": null, "pid":   
                                                        3847, "job_id":         
                                                        "AJ_jMSkF2bGXoss",      
                                                        "room_id":              
                                                        "RM_fb2LtQVHREBB"}      
DEBUG:livekit.agents:shutting down job task
    16:10:50.304 DEBUG  livekit.agents   shutting down job  {"reason": "",      
                                         task               "user_initiated":   
                                                            false, "pid": 3847, 
                                                            "job_id":           
                                                            "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
DEBUG:livekit.agents:http_session(): closing the httpclient ctx
    16:10:50.305 DEBUG  livekit.agents   http_session():    {"pid": 3847,       
                                         closing the        "job_id":           
                                         httpclient ctx     "AJ_jMSkF2bGXoss",  
                                                            "room_id":          
                                                            "RM_fb2LtQVHREBB"}  
INFO:livekit.agents:shutting down worker
    16:14:11.188 INFO   livekit.agents   shutting down      {"id":              
                                         worker             "AW_od9NRf8we7do"}  
INFO:livekit:livekit_ffi::server:139:livekit_ffi::server - initializing ffi server v0.12.39
INFO:livekit:livekit_ffi::cabi:50:livekit_ffi::cabi - initializing ffi server v0.12.39
DEBUG:asyncio:Using selector: EpollSelector
    16:14:14.857 DEBUG  asyncio          Using selector: EpollSelector  
INFO:livekit.agents:starting worker
    16:14:14.875 INFO   livekit.agents   starting worker {"version": "1.3.5",   
                                                         "rtc-version":         
                                                         "1.0.19"}              
INFO:livekit.agents:preloading plugins
    16:14:14.877 INFO   livekit.agents   preloading plugins {"packages":        
                                                            ["livekit.plugins.o‚Ä¶
                                                            "livekit.plugins.de‚Ä¶
                                                            "livekit.plugins.si‚Ä¶
                                                            "livekit.plugins.ca‚Ä¶
                                                            "av"]}              
INFO:livekit.agents:registered worker
    16:14:14.890 INFO   livekit.agents   registered worker {"agent_name":       
                                                           "letta-voice-agent", 
                                                           "id":                
                                                           "AW_dTfQtAXX3Xtk",   
                                                           "url":               
                                                           "ws://localhost:7880‚Ä¶
                                                           "region": "",        
                                                           "protocol": 16}      
WARNING:livekit.agents:failed to connect to livekit, retrying in 0s
Traceback (most recent call last):
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/livekit/agents/worker.py", line 981, in _connection_task
    await self._run_ws(ws)
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/livekit/agents/worker.py", line 1062, in _run_ws
    await asyncio.gather(*tasks)
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/livekit/agents/worker.py", line 1034, in _recv_task
    raise Exception("worker connection closed unexpectedly")
Exception: worker connection closed unexpectedly
    16:15:01.228 WARNI‚Ä¶ livekit.agents   failed to connect to livekit,          
                                         retrying in 0s                         
                                         Traceback (most recent call last):     
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/livekit/agents/wo  
                                         rker.py", line 981, in                 
                                         _connection_task                       
                                             await self._run_ws(ws)             
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/livekit/agents/wo  
                                         rker.py", line 1062, in _run_ws        
                                             await asyncio.gather(*tasks)       
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/livekit/agents/wo  
                                         rker.py", line 1034, in _recv_task     
                                             raise Exception("worker            
                                         connection closed unexpectedly")       
                                         Exception: worker connection closed    
                                         unexpectedly                           
WARNING:livekit.agents:failed to connect to livekit, retrying in 2s
Traceback (most recent call last):
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/connector.py", line 1268, in _wrap_create_connection
    sock = await aiohappyeyeballs.start_connection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohappyeyeballs/impl.py", line 122, in start_connection
    raise first_exception
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohappyeyeballs/impl.py", line 73, in start_connection
    sock = await _connect_sock(
           ^^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohappyeyeballs/impl.py", line 208, in _connect_sock
    await loop.sock_connect(sock, address)
  File "/usr/lib/python3.12/asyncio/selector_events.py", line 651, in sock_connect
    return await fut
           ^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/selector_events.py", line 691, in _sock_connect_cb
    raise OSError(err, f'Connect call failed {address}')
ConnectionRefusedError: [Errno 111] Connect call failed ('127.0.0.1', 7880)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/livekit/agents/worker.py", line 941, in _connection_task
    ws = await self._http_session.ws_connect(
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/client.py", line 1076, in _ws_connect
    resp = await self.request(
           ^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/client.py", line 779, in _request
    resp = await handler(req)
           ^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/client.py", line 734, in _connect_and_send_request
    conn = await self._connector.connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/connector.py", line 642, in connect
    proto = await self._create_connection(req, traces, timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/connector.py", line 1209, in _create_connection
    _, proto = await self._create_direct_connection(req, traces, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/connector.py", line 1581, in _create_direct_connection
    raise last_exc
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/connector.py", line 1550, in _create_direct_connection
    transp, proto = await self._wrap_create_connection(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/connector.py", line 1291, in _wrap_create_connection
    raise client_error(req.connection_key, exc) from exc
aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:7880 ssl:default [Connect call failed ('127.0.0.1', 7880)]
    16:15:01.238 WARNI‚Ä¶ livekit.agents   failed to connect to livekit,          
                                         retrying in 2s                         
                                         Traceback (most recent call last):     
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/connector  
                                         .py", line 1268, in                    
                                         _wrap_create_connection                
                                             sock = await                       
                                         aiohappyeyeballs.start_connection(     
                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^  
                                         ^^^^^^^^^^^^^^                         
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohappyeyeballs/  
                                         impl.py", line 122, in                 
                                         start_connection                       
                                             raise first_exception              
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohappyeyeballs/  
                                         impl.py", line 73, in                  
                                         start_connection                       
                                             sock = await _connect_sock(        
                                                    ^^^^^^^^^^^^^^^^^^^^        
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohappyeyeballs/  
                                         impl.py", line 208, in _connect_sock   
                                             await loop.sock_connect(sock,      
                                         address)                               
                                           File                                 
                                         "/usr/lib/python3.12/asyncio/selector  
                                         _events.py", line 651, in              
                                         sock_connect                           
                                             return await fut                   
                                                    ^^^^^^^^^                   
                                           File                                 
                                         "/usr/lib/python3.12/asyncio/selector  
                                         _events.py", line 691, in              
                                         _sock_connect_cb                       
                                             raise OSError(err, f'Connect call  
                                         failed {address}')                     
                                         ConnectionRefusedError: [Errno 111]    
                                         Connect call failed ('127.0.0.1',      
                                         7880)                                  
                                                                                
                                         The above exception was the direct     
                                         cause of the following exception:      
                                                                                
                                         Traceback (most recent call last):     
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/livekit/agents/wo  
                                         rker.py", line 941, in                 
                                         _connection_task                       
                                             ws = await                         
                                         self._http_session.ws_connect(         
                                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^  
                                         ^^^^^^^^                               
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/client.py  
                                         ", line 1076, in _ws_connect           
                                             resp = await self.request(         
                                                    ^^^^^^^^^^^^^^^^^^^         
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/client.py  
                                         ", line 779, in _request               
                                             resp = await handler(req)          
                                                    ^^^^^^^^^^^^^^^^^^          
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/client.py  
                                         ", line 734, in                        
                                         _connect_and_send_request              
                                             conn = await                       
                                         self._connector.connect(               
                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^  
                                         ^^^^                                   
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/connector  
                                         .py", line 642, in connect             
                                             proto = await                      
                                         self._create_connection(req, traces,   
                                         timeout)                               
                                                     ^^^^^^^^^^^^^^^^^^^^^^^^^  
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^             
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/connector  
                                         .py", line 1209, in                    
                                         _create_connection                     
                                             _, proto = await                   
                                         self._create_direct_connection(req,    
                                         traces, timeout)                       
                                                        ^^^^^^^^^^^^^^^^^^^^^^  
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^   
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/connector  
                                         .py", line 1581, in                    
                                         _create_direct_connection              
                                             raise last_exc                     
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/connector  
                                         .py", line 1550, in                    
                                         _create_direct_connection              
                                             transp, proto = await              
                                         self._wrap_create_connection(          
                                                             ^^^^^^^^^^^^^^^^^  
                                         ^^^^^^^^^^^^^^^^^^                     
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/connector  
                                         .py", line 1291, in                    
                                         _wrap_create_connection                
                                             raise                              
                                         client_error(req.connection_key, exc)  
                                         from exc                               
                                         aiohttp.client_exceptions.ClientConne  
                                         ctorError: Cannot connect to host      
                                         localhost:7880 ssl:default [Connect    
                                         call failed ('127.0.0.1', 7880)]       
WARNING:livekit.agents:failed to connect to livekit, retrying in 4s
Traceback (most recent call last):
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/connector.py", line 1268, in _wrap_create_connection
    sock = await aiohappyeyeballs.start_connection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohappyeyeballs/impl.py", line 122, in start_connection
    raise first_exception
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohappyeyeballs/impl.py", line 73, in start_connection
    sock = await _connect_sock(
           ^^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohappyeyeballs/impl.py", line 208, in _connect_sock
    await loop.sock_connect(sock, address)
  File "/usr/lib/python3.12/asyncio/selector_events.py", line 651, in sock_connect
    return await fut
           ^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/selector_events.py", line 691, in _sock_connect_cb
    raise OSError(err, f'Connect call failed {address}')
ConnectionRefusedError: [Errno 111] Connect call failed ('127.0.0.1', 7880)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/livekit/agents/worker.py", line 941, in _connection_task
    ws = await self._http_session.ws_connect(
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/client.py", line 1076, in _ws_connect
    resp = await self.request(
           ^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/client.py", line 779, in _request
    resp = await handler(req)
           ^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/client.py", line 734, in _connect_and_send_request
    conn = await self._connector.connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/connector.py", line 642, in connect
    proto = await self._create_connection(req, traces, timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/connector.py", line 1209, in _create_connection
    _, proto = await self._create_direct_connection(req, traces, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/connector.py", line 1581, in _create_direct_connection
    raise last_exc
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/connector.py", line 1550, in _create_direct_connection
    transp, proto = await self._wrap_create_connection(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/connector.py", line 1291, in _wrap_create_connection
    raise client_error(req.connection_key, exc) from exc
aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:7880 ssl:default [Connect call failed ('127.0.0.1', 7880)]
    16:15:03.262 WARNI‚Ä¶ livekit.agents   failed to connect to livekit,          
                                         retrying in 4s                         
                                         Traceback (most recent call last):     
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/connector  
                                         .py", line 1268, in                    
                                         _wrap_create_connection                
                                             sock = await                       
                                         aiohappyeyeballs.start_connection(     
                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^  
                                         ^^^^^^^^^^^^^^                         
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohappyeyeballs/  
                                         impl.py", line 122, in                 
                                         start_connection                       
                                             raise first_exception              
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohappyeyeballs/  
                                         impl.py", line 73, in                  
                                         start_connection                       
                                             sock = await _connect_sock(        
                                                    ^^^^^^^^^^^^^^^^^^^^        
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohappyeyeballs/  
                                         impl.py", line 208, in _connect_sock   
                                             await loop.sock_connect(sock,      
                                         address)                               
                                           File                                 
                                         "/usr/lib/python3.12/asyncio/selector  
                                         _events.py", line 651, in              
                                         sock_connect                           
                                             return await fut                   
                                                    ^^^^^^^^^                   
                                           File                                 
                                         "/usr/lib/python3.12/asyncio/selector  
                                         _events.py", line 691, in              
                                         _sock_connect_cb                       
                                             raise OSError(err, f'Connect call  
                                         failed {address}')                     
                                         ConnectionRefusedError: [Errno 111]    
                                         Connect call failed ('127.0.0.1',      
                                         7880)                                  
                                                                                
                                         The above exception was the direct     
                                         cause of the following exception:      
                                                                                
                                         Traceback (most recent call last):     
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/livekit/agents/wo  
                                         rker.py", line 941, in                 
                                         _connection_task                       
                                             ws = await                         
                                         self._http_session.ws_connect(         
                                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^  
                                         ^^^^^^^^                               
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/client.py  
                                         ", line 1076, in _ws_connect           
                                             resp = await self.request(         
                                                    ^^^^^^^^^^^^^^^^^^^         
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/client.py  
                                         ", line 779, in _request               
                                             resp = await handler(req)          
                                                    ^^^^^^^^^^^^^^^^^^          
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/client.py  
                                         ", line 734, in                        
                                         _connect_and_send_request              
                                             conn = await                       
                                         self._connector.connect(               
                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^  
                                         ^^^^                                   
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/connector  
                                         .py", line 642, in connect             
                                             proto = await                      
                                         self._create_connection(req, traces,   
                                         timeout)                               
                                                     ^^^^^^^^^^^^^^^^^^^^^^^^^  
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^             
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/connector  
                                         .py", line 1209, in                    
                                         _create_connection                     
                                             _, proto = await                   
                                         self._create_direct_connection(req,    
                                         traces, timeout)                       
                                                        ^^^^^^^^^^^^^^^^^^^^^^  
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^   
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/connector  
                                         .py", line 1581, in                    
                                         _create_direct_connection              
                                             raise last_exc                     
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/connector  
                                         .py", line 1550, in                    
                                         _create_direct_connection              
                                             transp, proto = await              
                                         self._wrap_create_connection(          
                                                             ^^^^^^^^^^^^^^^^^  
                                         ^^^^^^^^^^^^^^^^^^                     
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/connector  
                                         .py", line 1291, in                    
                                         _wrap_create_connection                
                                             raise                              
                                         client_error(req.connection_key, exc)  
                                         from exc                               
                                         aiohttp.client_exceptions.ClientConne  
                                         ctorError: Cannot connect to host      
                                         localhost:7880 ssl:default [Connect    
                                         call failed ('127.0.0.1', 7880)]       
INFO:livekit.agents:registered worker
    16:15:07.275 INFO   livekit.agents   registered worker {"agent_name":       
                                                           "letta-voice-agent", 
                                                           "id":                
                                                           "AW_Thkfd4REGWrd",   
                                                           "url":               
                                                           "ws://localhost:7880‚Ä¶
                                                           "region": "",        
                                                           "protocol": 16}      
WARNING:livekit.agents:failed to connect to livekit, retrying in 0s
Traceback (most recent call last):
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/livekit/agents/worker.py", line 981, in _connection_task
    await self._run_ws(ws)
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/livekit/agents/worker.py", line 1062, in _run_ws
    await asyncio.gather(*tasks)
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/livekit/agents/worker.py", line 1034, in _recv_task
    raise Exception("worker connection closed unexpectedly")
Exception: worker connection closed unexpectedly
    16:21:32.648 WARNI‚Ä¶ livekit.agents   failed to connect to livekit,          
                                         retrying in 0s                         
                                         Traceback (most recent call last):     
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/livekit/agents/wo  
                                         rker.py", line 981, in                 
                                         _connection_task                       
                                             await self._run_ws(ws)             
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/livekit/agents/wo  
                                         rker.py", line 1062, in _run_ws        
                                             await asyncio.gather(*tasks)       
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/livekit/agents/wo  
                                         rker.py", line 1034, in _recv_task     
                                             raise Exception("worker            
                                         connection closed unexpectedly")       
                                         Exception: worker connection closed    
                                         unexpectedly                           
WARNING:livekit.agents:failed to connect to livekit, retrying in 2s
Traceback (most recent call last):
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/connector.py", line 1268, in _wrap_create_connection
    sock = await aiohappyeyeballs.start_connection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohappyeyeballs/impl.py", line 122, in start_connection
    raise first_exception
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohappyeyeballs/impl.py", line 73, in start_connection
    sock = await _connect_sock(
           ^^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohappyeyeballs/impl.py", line 208, in _connect_sock
    await loop.sock_connect(sock, address)
  File "/usr/lib/python3.12/asyncio/selector_events.py", line 651, in sock_connect
    return await fut
           ^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/selector_events.py", line 691, in _sock_connect_cb
    raise OSError(err, f'Connect call failed {address}')
ConnectionRefusedError: [Errno 111] Connect call failed ('127.0.0.1', 7880)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/livekit/agents/worker.py", line 941, in _connection_task
    ws = await self._http_session.ws_connect(
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/client.py", line 1076, in _ws_connect
    resp = await self.request(
           ^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/client.py", line 779, in _request
    resp = await handler(req)
           ^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/client.py", line 734, in _connect_and_send_request
    conn = await self._connector.connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/connector.py", line 642, in connect
    proto = await self._create_connection(req, traces, timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/connector.py", line 1209, in _create_connection
    _, proto = await self._create_direct_connection(req, traces, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/connector.py", line 1581, in _create_direct_connection
    raise last_exc
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/connector.py", line 1550, in _create_direct_connection
    transp, proto = await self._wrap_create_connection(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/connector.py", line 1291, in _wrap_create_connection
    raise client_error(req.connection_key, exc) from exc
aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:7880 ssl:default [Connect call failed ('127.0.0.1', 7880)]
    16:21:32.660 WARNI‚Ä¶ livekit.agents   failed to connect to livekit,          
                                         retrying in 2s                         
                                         Traceback (most recent call last):     
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/connector  
                                         .py", line 1268, in                    
                                         _wrap_create_connection                
                                             sock = await                       
                                         aiohappyeyeballs.start_connection(     
                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^  
                                         ^^^^^^^^^^^^^^                         
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohappyeyeballs/  
                                         impl.py", line 122, in                 
                                         start_connection                       
                                             raise first_exception              
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohappyeyeballs/  
                                         impl.py", line 73, in                  
                                         start_connection                       
                                             sock = await _connect_sock(        
                                                    ^^^^^^^^^^^^^^^^^^^^        
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohappyeyeballs/  
                                         impl.py", line 208, in _connect_sock   
                                             await loop.sock_connect(sock,      
                                         address)                               
                                           File                                 
                                         "/usr/lib/python3.12/asyncio/selector  
                                         _events.py", line 651, in              
                                         sock_connect                           
                                             return await fut                   
                                                    ^^^^^^^^^                   
                                           File                                 
                                         "/usr/lib/python3.12/asyncio/selector  
                                         _events.py", line 691, in              
                                         _sock_connect_cb                       
                                             raise OSError(err, f'Connect call  
                                         failed {address}')                     
                                         ConnectionRefusedError: [Errno 111]    
                                         Connect call failed ('127.0.0.1',      
                                         7880)                                  
                                                                                
                                         The above exception was the direct     
                                         cause of the following exception:      
                                                                                
                                         Traceback (most recent call last):     
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/livekit/agents/wo  
                                         rker.py", line 941, in                 
                                         _connection_task                       
                                             ws = await                         
                                         self._http_session.ws_connect(         
                                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^  
                                         ^^^^^^^^                               
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/client.py  
                                         ", line 1076, in _ws_connect           
                                             resp = await self.request(         
                                                    ^^^^^^^^^^^^^^^^^^^         
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/client.py  
                                         ", line 779, in _request               
                                             resp = await handler(req)          
                                                    ^^^^^^^^^^^^^^^^^^          
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/client.py  
                                         ", line 734, in                        
                                         _connect_and_send_request              
                                             conn = await                       
                                         self._connector.connect(               
                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^  
                                         ^^^^                                   
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/connector  
                                         .py", line 642, in connect             
                                             proto = await                      
                                         self._create_connection(req, traces,   
                                         timeout)                               
                                                     ^^^^^^^^^^^^^^^^^^^^^^^^^  
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^             
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/connector  
                                         .py", line 1209, in                    
                                         _create_connection                     
                                             _, proto = await                   
                                         self._create_direct_connection(req,    
                                         traces, timeout)                       
                                                        ^^^^^^^^^^^^^^^^^^^^^^  
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^   
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/connector  
                                         .py", line 1581, in                    
                                         _create_direct_connection              
                                             raise last_exc                     
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/connector  
                                         .py", line 1550, in                    
                                         _create_direct_connection              
                                             transp, proto = await              
                                         self._wrap_create_connection(          
                                                             ^^^^^^^^^^^^^^^^^  
                                         ^^^^^^^^^^^^^^^^^^                     
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/connector  
                                         .py", line 1291, in                    
                                         _wrap_create_connection                
                                             raise                              
                                         client_error(req.connection_key, exc)  
                                         from exc                               
                                         aiohttp.client_exceptions.ClientConne  
                                         ctorError: Cannot connect to host      
                                         localhost:7880 ssl:default [Connect    
                                         call failed ('127.0.0.1', 7880)]       
WARNING:livekit.agents:failed to connect to livekit, retrying in 4s
Traceback (most recent call last):
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/connector.py", line 1268, in _wrap_create_connection
    sock = await aiohappyeyeballs.start_connection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohappyeyeballs/impl.py", line 122, in start_connection
    raise first_exception
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohappyeyeballs/impl.py", line 73, in start_connection
    sock = await _connect_sock(
           ^^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohappyeyeballs/impl.py", line 208, in _connect_sock
    await loop.sock_connect(sock, address)
  File "/usr/lib/python3.12/asyncio/selector_events.py", line 651, in sock_connect
    return await fut
           ^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/selector_events.py", line 691, in _sock_connect_cb
    raise OSError(err, f'Connect call failed {address}')
ConnectionRefusedError: [Errno 111] Connect call failed ('127.0.0.1', 7880)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/livekit/agents/worker.py", line 941, in _connection_task
    ws = await self._http_session.ws_connect(
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/client.py", line 1076, in _ws_connect
    resp = await self.request(
           ^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/client.py", line 779, in _request
    resp = await handler(req)
           ^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/client.py", line 734, in _connect_and_send_request
    conn = await self._connector.connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/connector.py", line 642, in connect
    proto = await self._create_connection(req, traces, timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/connector.py", line 1209, in _create_connection
    _, proto = await self._create_direct_connection(req, traces, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/connector.py", line 1581, in _create_direct_connection
    raise last_exc
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/connector.py", line 1550, in _create_direct_connection
    transp, proto = await self._wrap_create_connection(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/connector.py", line 1291, in _wrap_create_connection
    raise client_error(req.connection_key, exc) from exc
aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:7880 ssl:default [Connect call failed ('127.0.0.1', 7880)]
    16:21:34.678 WARNI‚Ä¶ livekit.agents   failed to connect to livekit,          
                                         retrying in 4s                         
                                         Traceback (most recent call last):     
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/connector  
                                         .py", line 1268, in                    
                                         _wrap_create_connection                
                                             sock = await                       
                                         aiohappyeyeballs.start_connection(     
                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^  
                                         ^^^^^^^^^^^^^^                         
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohappyeyeballs/  
                                         impl.py", line 122, in                 
                                         start_connection                       
                                             raise first_exception              
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohappyeyeballs/  
                                         impl.py", line 73, in                  
                                         start_connection                       
                                             sock = await _connect_sock(        
                                                    ^^^^^^^^^^^^^^^^^^^^        
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohappyeyeballs/  
                                         impl.py", line 208, in _connect_sock   
                                             await loop.sock_connect(sock,      
                                         address)                               
                                           File                                 
                                         "/usr/lib/python3.12/asyncio/selector  
                                         _events.py", line 651, in              
                                         sock_connect                           
                                             return await fut                   
                                                    ^^^^^^^^^                   
                                           File                                 
                                         "/usr/lib/python3.12/asyncio/selector  
                                         _events.py", line 691, in              
                                         _sock_connect_cb                       
                                             raise OSError(err, f'Connect call  
                                         failed {address}')                     
                                         ConnectionRefusedError: [Errno 111]    
                                         Connect call failed ('127.0.0.1',      
                                         7880)                                  
                                                                                
                                         The above exception was the direct     
                                         cause of the following exception:      
                                                                                
                                         Traceback (most recent call last):     
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/livekit/agents/wo  
                                         rker.py", line 941, in                 
                                         _connection_task                       
                                             ws = await                         
                                         self._http_session.ws_connect(         
                                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^  
                                         ^^^^^^^^                               
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/client.py  
                                         ", line 1076, in _ws_connect           
                                             resp = await self.request(         
                                                    ^^^^^^^^^^^^^^^^^^^         
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/client.py  
                                         ", line 779, in _request               
                                             resp = await handler(req)          
                                                    ^^^^^^^^^^^^^^^^^^          
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/client.py  
                                         ", line 734, in                        
                                         _connect_and_send_request              
                                             conn = await                       
                                         self._connector.connect(               
                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^  
                                         ^^^^                                   
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/connector  
                                         .py", line 642, in connect             
                                             proto = await                      
                                         self._create_connection(req, traces,   
                                         timeout)                               
                                                     ^^^^^^^^^^^^^^^^^^^^^^^^^  
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^             
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/connector  
                                         .py", line 1209, in                    
                                         _create_connection                     
                                             _, proto = await                   
                                         self._create_direct_connection(req,    
                                         traces, timeout)                       
                                                        ^^^^^^^^^^^^^^^^^^^^^^  
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^   
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/connector  
                                         .py", line 1581, in                    
                                         _create_direct_connection              
                                             raise last_exc                     
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/connector  
                                         .py", line 1550, in                    
                                         _create_direct_connection              
                                             transp, proto = await              
                                         self._wrap_create_connection(          
                                                             ^^^^^^^^^^^^^^^^^  
                                         ^^^^^^^^^^^^^^^^^^                     
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/connector  
                                         .py", line 1291, in                    
                                         _wrap_create_connection                
                                             raise                              
                                         client_error(req.connection_key, exc)  
                                         from exc                               
                                         aiohttp.client_exceptions.ClientConne  
                                         ctorError: Cannot connect to host      
                                         localhost:7880 ssl:default [Connect    
                                         call failed ('127.0.0.1', 7880)]       
INFO:livekit.agents:registered worker
    16:21:38.700 INFO   livekit.agents   registered worker {"agent_name":       
                                                           "letta-voice-agent", 
                                                           "id":                
                                                           "AW_jGtkpQsAxHdq",   
                                                           "url":               
                                                           "ws://localhost:7880‚Ä¶
                                                           "region": "",        
                                                           "protocol": 16}      
WARNING:livekit.agents:unexpected message type: 258
    16:25:32.227 WARNI‚Ä¶ livekit.agents   unexpected message type: 258  
WARNING:livekit.agents:failed to connect to livekit, retrying in 0s
Traceback (most recent call last):
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/livekit/agents/worker.py", line 981, in _connection_task
    await self._run_ws(ws)
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/livekit/agents/worker.py", line 1062, in _run_ws
    await asyncio.gather(*tasks)
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/livekit/agents/worker.py", line 1017, in _send_task
    await ws.send_bytes(msg.SerializeToString())
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/client_ws.py", line 252, in send_bytes
    await self._writer.send_frame(data, WSMsgType.BINARY, compress=compress)
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/_websocket/writer.py", line 83, in send_frame
    self._write_websocket_frame(message, opcode, 0)
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/_websocket/writer.py", line 151, in _write_websocket_frame
    raise ClientConnectionResetError("Cannot write to closing transport")
aiohttp.client_exceptions.ClientConnectionResetError: Cannot write to closing transport
    16:25:32.273 WARNI‚Ä¶ livekit.agents   failed to connect to livekit,          
                                         retrying in 0s                         
                                         Traceback (most recent call last):     
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/livekit/agents/wo  
                                         rker.py", line 981, in                 
                                         _connection_task                       
                                             await self._run_ws(ws)             
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/livekit/agents/wo  
                                         rker.py", line 1062, in _run_ws        
                                             await asyncio.gather(*tasks)       
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/livekit/agents/wo  
                                         rker.py", line 1017, in _send_task     
                                             await                              
                                         ws.send_bytes(msg.SerializeToString()  
                                         )                                      
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/client_ws  
                                         .py", line 252, in send_bytes          
                                             await                              
                                         self._writer.send_frame(data,          
                                         WSMsgType.BINARY, compress=compress)   
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/_websocke  
                                         t/writer.py", line 83, in send_frame   
                                             self._write_websocket_frame(messa  
                                         ge, opcode, 0)                         
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/_websocke  
                                         t/writer.py", line 151, in             
                                         _write_websocket_frame                 
                                             raise                              
                                         ClientConnectionResetError("Cannot     
                                         write to closing transport")           
                                         aiohttp.client_exceptions.ClientConne  
                                         ctionResetError: Cannot write to       
                                         closing transport                      
INFO:livekit.agents:registered worker
    16:25:32.398 INFO   livekit.agents   registered worker {"agent_name":       
                                                           "letta-voice-agent", 
                                                           "id":                
                                                           "AW_RaYBtviwVARv",   
                                                           "url":               
                                                           "ws://localhost:7880‚Ä¶
                                                           "region": "",        
                                                           "protocol": 16}      
WARNING:livekit.agents:unexpected message type: 258
    23:04:48.733 WARNI‚Ä¶ livekit.agents   unexpected message type: 258  
WARNING:livekit.agents:failed to connect to livekit, retrying in 0s
Traceback (most recent call last):
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/livekit/agents/worker.py", line 981, in _connection_task
    await self._run_ws(ws)
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/livekit/agents/worker.py", line 1062, in _run_ws
    await asyncio.gather(*tasks)
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/livekit/agents/worker.py", line 1034, in _recv_task
    raise Exception("worker connection closed unexpectedly")
Exception: worker connection closed unexpectedly
    23:05:04.348 WARNI‚Ä¶ livekit.agents   failed to connect to livekit,          
                                         retrying in 0s                         
                                         Traceback (most recent call last):     
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/livekit/agents/wo  
                                         rker.py", line 981, in                 
                                         _connection_task                       
                                             await self._run_ws(ws)             
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/livekit/agents/wo  
                                         rker.py", line 1062, in _run_ws        
                                             await asyncio.gather(*tasks)       
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/livekit/agents/wo  
                                         rker.py", line 1034, in _recv_task     
                                             raise Exception("worker            
                                         connection closed unexpectedly")       
                                         Exception: worker connection closed    
                                         unexpectedly                           
INFO:livekit.agents:registered worker
    23:05:07.170 INFO   livekit.agents   registered worker {"agent_name":       
                                                           "letta-voice-agent", 
                                                           "id":                
                                                           "AW_DHvYCxrMmnBr",   
                                                           "url":               
                                                           "ws://localhost:7880‚Ä¶
                                                           "region": "",        
                                                           "protocol": 16}      
WARNING:livekit.agents:failed to connect to livekit, retrying in 0s
Traceback (most recent call last):
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/livekit/agents/worker.py", line 981, in _connection_task
    await self._run_ws(ws)
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/livekit/agents/worker.py", line 1062, in _run_ws
    await asyncio.gather(*tasks)
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/livekit/agents/worker.py", line 1034, in _recv_task
    raise Exception("worker connection closed unexpectedly")
Exception: worker connection closed unexpectedly
    23:05:10.355 WARNI‚Ä¶ livekit.agents   failed to connect to livekit,          
                                         retrying in 0s                         
                                         Traceback (most recent call last):     
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/livekit/agents/wo  
                                         rker.py", line 981, in                 
                                         _connection_task                       
                                             await self._run_ws(ws)             
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/livekit/agents/wo  
                                         rker.py", line 1062, in _run_ws        
                                             await asyncio.gather(*tasks)       
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/livekit/agents/wo  
                                         rker.py", line 1034, in _recv_task     
                                             raise Exception("worker            
                                         connection closed unexpectedly")       
                                         Exception: worker connection closed    
                                         unexpectedly                           
WARNING:livekit.agents:failed to connect to livekit, retrying in 2s
Traceback (most recent call last):
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/connector.py", line 1268, in _wrap_create_connection
    sock = await aiohappyeyeballs.start_connection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohappyeyeballs/impl.py", line 122, in start_connection
    raise first_exception
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohappyeyeballs/impl.py", line 73, in start_connection
    sock = await _connect_sock(
           ^^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohappyeyeballs/impl.py", line 208, in _connect_sock
    await loop.sock_connect(sock, address)
  File "/usr/lib/python3.12/asyncio/selector_events.py", line 651, in sock_connect
    return await fut
           ^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/selector_events.py", line 691, in _sock_connect_cb
    raise OSError(err, f'Connect call failed {address}')
ConnectionRefusedError: [Errno 111] Connect call failed ('127.0.0.1', 7880)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/livekit/agents/worker.py", line 941, in _connection_task
    ws = await self._http_session.ws_connect(
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/client.py", line 1076, in _ws_connect
    resp = await self.request(
           ^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/client.py", line 779, in _request
    resp = await handler(req)
           ^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/client.py", line 734, in _connect_and_send_request
    conn = await self._connector.connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/connector.py", line 642, in connect
    proto = await self._create_connection(req, traces, timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/connector.py", line 1209, in _create_connection
    _, proto = await self._create_direct_connection(req, traces, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/connector.py", line 1581, in _create_direct_connection
    raise last_exc
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/connector.py", line 1550, in _create_direct_connection
    transp, proto = await self._wrap_create_connection(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/aiohttp/connector.py", line 1291, in _wrap_create_connection
    raise client_error(req.connection_key, exc) from exc
aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:7880 ssl:default [Connect call failed ('127.0.0.1', 7880)]
    23:05:10.368 WARNI‚Ä¶ livekit.agents   failed to connect to livekit,          
                                         retrying in 2s                         
                                         Traceback (most recent call last):     
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/connector  
                                         .py", line 1268, in                    
                                         _wrap_create_connection                
                                             sock = await                       
                                         aiohappyeyeballs.start_connection(     
                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^  
                                         ^^^^^^^^^^^^^^                         
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohappyeyeballs/  
                                         impl.py", line 122, in                 
                                         start_connection                       
                                             raise first_exception              
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohappyeyeballs/  
                                         impl.py", line 73, in                  
                                         start_connection                       
                                             sock = await _connect_sock(        
                                                    ^^^^^^^^^^^^^^^^^^^^        
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohappyeyeballs/  
                                         impl.py", line 208, in _connect_sock   
                                             await loop.sock_connect(sock,      
                                         address)                               
                                           File                                 
                                         "/usr/lib/python3.12/asyncio/selector  
                                         _events.py", line 651, in              
                                         sock_connect                           
                                             return await fut                   
                                                    ^^^^^^^^^                   
                                           File                                 
                                         "/usr/lib/python3.12/asyncio/selector  
                                         _events.py", line 691, in              
                                         _sock_connect_cb                       
                                             raise OSError(err, f'Connect call  
                                         failed {address}')                     
                                         ConnectionRefusedError: [Errno 111]    
                                         Connect call failed ('127.0.0.1',      
                                         7880)                                  
                                                                                
                                         The above exception was the direct     
                                         cause of the following exception:      
                                                                                
                                         Traceback (most recent call last):     
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/livekit/agents/wo  
                                         rker.py", line 941, in                 
                                         _connection_task                       
                                             ws = await                         
                                         self._http_session.ws_connect(         
                                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^  
                                         ^^^^^^^^                               
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/client.py  
                                         ", line 1076, in _ws_connect           
                                             resp = await self.request(         
                                                    ^^^^^^^^^^^^^^^^^^^         
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/client.py  
                                         ", line 779, in _request               
                                             resp = await handler(req)          
                                                    ^^^^^^^^^^^^^^^^^^          
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/client.py  
                                         ", line 734, in                        
                                         _connect_and_send_request              
                                             conn = await                       
                                         self._connector.connect(               
                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^  
                                         ^^^^                                   
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/connector  
                                         .py", line 642, in connect             
                                             proto = await                      
                                         self._create_connection(req, traces,   
                                         timeout)                               
                                                     ^^^^^^^^^^^^^^^^^^^^^^^^^  
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^             
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/connector  
                                         .py", line 1209, in                    
                                         _create_connection                     
                                             _, proto = await                   
                                         self._create_direct_connection(req,    
                                         traces, timeout)                       
                                                        ^^^^^^^^^^^^^^^^^^^^^^  
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^   
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/connector  
                                         .py", line 1581, in                    
                                         _create_direct_connection              
                                             raise last_exc                     
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/connector  
                                         .py", line 1550, in                    
                                         _create_direct_connection              
                                             transp, proto = await              
                                         self._wrap_create_connection(          
                                                             ^^^^^^^^^^^^^^^^^  
                                         ^^^^^^^^^^^^^^^^^^                     
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/aiohttp/connector  
                                         .py", line 1291, in                    
                                         _wrap_create_connection                
                                             raise                              
                                         client_error(req.connection_key, exc)  
                                         from exc                               
                                         aiohttp.client_exceptions.ClientConne  
                                         ctorError: Cannot connect to host      
                                         localhost:7880 ssl:default [Connect    
                                         call failed ('127.0.0.1', 7880)]       
INFO:livekit.agents:registered worker
    23:05:12.427 INFO   livekit.agents   registered worker {"agent_name":       
                                                           "letta-voice-agent", 
                                                           "id":                
                                                           "AW_Ki2Zjq4cSGTs",   
                                                           "url":               
                                                           "ws://localhost:7880‚Ä¶
                                                           "region": "",        
                                                           "protocol": 16}      
WARNING:livekit.agents:unexpected message type: 258
    23:06:32.083 WARNI‚Ä¶ livekit.agents   unexpected message type: 258  
WARNING:livekit.agents:failed to connect to livekit, retrying in 0s
Traceback (most recent call last):
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/livekit/agents/worker.py", line 981, in _connection_task
    await self._run_ws(ws)
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/livekit/agents/worker.py", line 1062, in _run_ws
    await asyncio.gather(*tasks)
  File "/home/adamsl/planner/.venv/lib/python3.12/site-packages/livekit/agents/worker.py", line 1034, in _recv_task
    raise Exception("worker connection closed unexpectedly")
Exception: worker connection closed unexpectedly
    23:07:00.014 WARNI‚Ä¶ livekit.agents   failed to connect to livekit,          
                                         retrying in 0s                         
                                         Traceback (most recent call last):     
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/livekit/agents/wo  
                                         rker.py", line 981, in                 
                                         _connection_task                       
                                             await self._run_ws(ws)             
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/livekit/agents/wo  
                                         rker.py", line 1062, in _run_ws        
                                             await asyncio.gather(*tasks)       
                                           File                                 
                                         "/home/adamsl/planner/.venv/lib/pytho  
                                         n3.12/site-packages/livekit/agents/wo  
                                         rker.py", line 1034, in _recv_task     
                                             raise Exception("worker            
                                         connection closed unexpectedly")       
                                         Exception: worker connection closed    
                                         unexpectedly                           
INFO:livekit.agents:registered worker
    23:08:55.698 INFO   livekit.agents   registered worker {"agent_name":       
                                                           "letta-voice-agent", 
                                                           "id":                
                                                           "AW_Qyv8FaowCTjt",   
                                                           "url":               
                                                           "ws://localhost:7880‚Ä¶
                                                           "region": "",        
                                                           "protocol": 16}      
