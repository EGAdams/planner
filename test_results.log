============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-7.4.3, pluggy-1.6.0 -- /home/adamsl/planner/.venv/bin/python
cachedir: .pytest_cache
rootdir: /home/adamsl/planner
configfile: pytest.ini
plugins: mock-3.12.0, anyio-4.11.0, typeguard-4.4.4, cov-4.1.0, Faker-38.2.0
collecting ... collected 11 items

tests/test_infrastructure_setup.py::TestLettaInstallation::test_letta_command_available PASSED [  9%]
tests/test_infrastructure_setup.py::TestLettaInstallation::test_alembic_command_available PASSED [ 18%]
tests/test_infrastructure_setup.py::TestLettaInstallation::test_letta_package_installed PASSED [ 27%]
tests/test_infrastructure_setup.py::TestLettaServerStartup::test_letta_health_endpoint FAILED [ 36%]
tests/test_infrastructure_setup.py::TestLettaServerStartup::test_letta_database_initialized SKIPPED [ 45%]
tests/test_infrastructure_setup.py::TestStaticAdminPage::test_static_admin_page_exists PASSED [ 54%]
tests/test_infrastructure_setup.py::TestStaticAdminPage::test_static_admin_page_is_valid_html PASSED [ 63%]
tests/test_infrastructure_setup.py::TestStaticAdminPage::test_static_admin_page_has_no_server_dependencies PASSED [ 72%]
tests/test_infrastructure_setup.py::TestStaticAdminPage::test_static_admin_page_contains_system_status PASSED [ 81%]
tests/test_infrastructure_setup.py::TestSystemIntegration::test_startup_script_exists PASSED [ 90%]
tests/test_infrastructure_setup.py::TestSystemIntegration::test_all_required_ports_available PASSED [100%]

=================================== FAILURES ===================================
______________ TestLettaServerStartup.test_letta_health_endpoint _______________
tests/test_infrastructure_setup.py:42: in test_letta_health_endpoint
    assert response.status_code == 200, f"Health check failed: {response.status_code}"
E   AssertionError: Health check failed: 404
E   assert 404 == 200
E    +  where 404 = <Response [404]>.status_code
=============================== warnings summary ===============================
.venv/lib/python3.12/site-packages/starlette/formparsers.py:12
  /home/adamsl/planner/.venv/lib/python3.12/site-packages/starlette/formparsers.py:12: PendingDeprecationWarning: Please use `import python_multipart` instead.
    import multipart

.venv/lib/python3.12/site-packages/letta/schemas/letta_message.py:207
  /home/adamsl/planner/.venv/lib/python3.12/site-packages/letta/schemas/letta_message.py:207: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ToolCallMessage(LettaMessage):

.venv/lib/python3.12/site-packages/pydantic/_internal/_generate_schema.py:319
.venv/lib/python3.12/site-packages/pydantic/_internal/_generate_schema.py:319
.venv/lib/python3.12/site-packages/pydantic/_internal/_generate_schema.py:319
.venv/lib/python3.12/site-packages/pydantic/_internal/_generate_schema.py:319
  /home/adamsl/planner/.venv/lib/python3.12/site-packages/pydantic/_internal/_generate_schema.py:319: PydanticDeprecatedSince20: `json_encoders` is deprecated. See https://docs.pydantic.dev/2.12/concepts/serialization/#custom-serializers for alternatives. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    warnings.warn(

.venv/lib/python3.12/site-packages/letta/schemas/response_format.py:18
  /home/adamsl/planner/.venv/lib/python3.12/site-packages/letta/schemas/response_format.py:18: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'example'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    type: ResponseFormatType = Field(

.venv/lib/python3.12/site-packages/_pytest/config/__init__.py:1373
  /home/adamsl/planner/.venv/lib/python3.12/site-packages/_pytest/config/__init__.py:1373: PytestConfigWarning: Unknown config option: asyncio_mode
  
    self._warn_or_fail_if_strict(f"Unknown config option: {key}\n")

tests/test_infrastructure_setup.py:129
  /home/adamsl/planner/tests/test_infrastructure_setup.py:129: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests/test_infrastructure_setup.py:137
  /home/adamsl/planner/tests/test_infrastructure_setup.py:137: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED tests/test_infrastructure_setup.py::TestLettaServerStartup::test_letta_health_endpoint
============= 1 failed, 9 passed, 1 skipped, 10 warnings in 0.41s ==============
